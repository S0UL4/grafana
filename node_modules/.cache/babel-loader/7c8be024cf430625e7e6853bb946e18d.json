{"ast":null,"code":"export class Store {\n  get(key) {\n    return window.localStorage[key];\n  }\n\n  set(key, value) {\n    window.localStorage[key] = value;\n  }\n\n  getBool(key, def) {\n    if (def !== void 0 && !this.exists(key)) {\n      return def;\n    }\n\n    return window.localStorage[key] === 'true';\n  }\n\n  getObject(key, def) {\n    let ret = def;\n\n    if (this.exists(key)) {\n      const json = window.localStorage[key];\n\n      try {\n        ret = JSON.parse(json);\n      } catch (error) {\n        console.error(`Error parsing store object: ${key}. Returning default: ${def}. [${error}]`);\n      }\n    }\n\n    return ret;\n  }\n  /* Returns true when successfully stored, throws error if not successfully stored */\n\n\n  setObject(key, value) {\n    let json;\n\n    try {\n      json = JSON.stringify(value);\n    } catch (error) {\n      throw new Error(`Could not stringify object: ${key}. [${error}]`);\n    }\n\n    try {\n      this.set(key, json);\n    } catch (error) {\n      // Likely hitting storage quota\n      const errorToThrow = new Error(`Could not save item in localStorage: ${key}. [${error}]`);\n\n      if (error instanceof Error) {\n        errorToThrow.name = error.name;\n      }\n\n      throw errorToThrow;\n    }\n\n    return true;\n  }\n\n  exists(key) {\n    return window.localStorage[key] !== void 0;\n  }\n\n  delete(key) {\n    window.localStorage.removeItem(key);\n  }\n\n}\nconst store = new Store();\nexport default store;","map":{"version":3,"names":["Store","get","key","window","localStorage","set","value","getBool","def","exists","getObject","ret","json","JSON","parse","error","console","setObject","stringify","Error","errorToThrow","name","delete","removeItem","store"],"sources":["/home/soula/grafana/public/app/core/store.ts"],"sourcesContent":["type StoreValue = string | number | boolean | null;\n\nexport class Store {\n  get(key: string) {\n    return window.localStorage[key];\n  }\n\n  set(key: string, value: StoreValue) {\n    window.localStorage[key] = value;\n  }\n\n  getBool(key: string, def: boolean): boolean {\n    if (def !== void 0 && !this.exists(key)) {\n      return def;\n    }\n    return window.localStorage[key] === 'true';\n  }\n\n  getObject<T = unknown>(key: string): T | undefined;\n  getObject<T = unknown>(key: string, def: T): T;\n  getObject<T = unknown>(key: string, def?: T) {\n    let ret = def;\n    if (this.exists(key)) {\n      const json = window.localStorage[key];\n      try {\n        ret = JSON.parse(json);\n      } catch (error) {\n        console.error(`Error parsing store object: ${key}. Returning default: ${def}. [${error}]`);\n      }\n    }\n    return ret;\n  }\n\n  /* Returns true when successfully stored, throws error if not successfully stored */\n  setObject(key: string, value: any) {\n    let json;\n    try {\n      json = JSON.stringify(value);\n    } catch (error) {\n      throw new Error(`Could not stringify object: ${key}. [${error}]`);\n    }\n    try {\n      this.set(key, json);\n    } catch (error) {\n      // Likely hitting storage quota\n      const errorToThrow = new Error(`Could not save item in localStorage: ${key}. [${error}]`);\n      if (error instanceof Error) {\n        errorToThrow.name = error.name;\n      }\n      throw errorToThrow;\n    }\n    return true;\n  }\n\n  exists(key: string) {\n    return window.localStorage[key] !== void 0;\n  }\n\n  delete(key: string) {\n    window.localStorage.removeItem(key);\n  }\n}\n\nconst store = new Store();\nexport default store;\n"],"mappings":"AAEA,OAAO,MAAMA,KAAN,CAAY;EACjBC,GAAG,CAACC,GAAD,EAAc;IACf,OAAOC,MAAM,CAACC,YAAP,CAAoBF,GAApB,CAAP;EACD;;EAEDG,GAAG,CAACH,GAAD,EAAcI,KAAd,EAAiC;IAClCH,MAAM,CAACC,YAAP,CAAoBF,GAApB,IAA2BI,KAA3B;EACD;;EAEDC,OAAO,CAACL,GAAD,EAAcM,GAAd,EAAqC;IAC1C,IAAIA,GAAG,KAAK,KAAK,CAAb,IAAkB,CAAC,KAAKC,MAAL,CAAYP,GAAZ,CAAvB,EAAyC;MACvC,OAAOM,GAAP;IACD;;IACD,OAAOL,MAAM,CAACC,YAAP,CAAoBF,GAApB,MAA6B,MAApC;EACD;;EAIDQ,SAAS,CAAcR,GAAd,EAA2BM,GAA3B,EAAoC;IAC3C,IAAIG,GAAG,GAAGH,GAAV;;IACA,IAAI,KAAKC,MAAL,CAAYP,GAAZ,CAAJ,EAAsB;MACpB,MAAMU,IAAI,GAAGT,MAAM,CAACC,YAAP,CAAoBF,GAApB,CAAb;;MACA,IAAI;QACFS,GAAG,GAAGE,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAN;MACD,CAFD,CAEE,OAAOG,KAAP,EAAc;QACdC,OAAO,CAACD,KAAR,CAAe,+BAA8Bb,GAAI,wBAAuBM,GAAI,MAAKO,KAAM,GAAvF;MACD;IACF;;IACD,OAAOJ,GAAP;EACD;EAED;;;EACAM,SAAS,CAACf,GAAD,EAAcI,KAAd,EAA0B;IACjC,IAAIM,IAAJ;;IACA,IAAI;MACFA,IAAI,GAAGC,IAAI,CAACK,SAAL,CAAeZ,KAAf,CAAP;IACD,CAFD,CAEE,OAAOS,KAAP,EAAc;MACd,MAAM,IAAII,KAAJ,CAAW,+BAA8BjB,GAAI,MAAKa,KAAM,GAAxD,CAAN;IACD;;IACD,IAAI;MACF,KAAKV,GAAL,CAASH,GAAT,EAAcU,IAAd;IACD,CAFD,CAEE,OAAOG,KAAP,EAAc;MACd;MACA,MAAMK,YAAY,GAAG,IAAID,KAAJ,CAAW,wCAAuCjB,GAAI,MAAKa,KAAM,GAAjE,CAArB;;MACA,IAAIA,KAAK,YAAYI,KAArB,EAA4B;QAC1BC,YAAY,CAACC,IAAb,GAAoBN,KAAK,CAACM,IAA1B;MACD;;MACD,MAAMD,YAAN;IACD;;IACD,OAAO,IAAP;EACD;;EAEDX,MAAM,CAACP,GAAD,EAAc;IAClB,OAAOC,MAAM,CAACC,YAAP,CAAoBF,GAApB,MAA6B,KAAK,CAAzC;EACD;;EAEDoB,MAAM,CAACpB,GAAD,EAAc;IAClBC,MAAM,CAACC,YAAP,CAAoBmB,UAApB,CAA+BrB,GAA/B;EACD;;AA1DgB;AA6DnB,MAAMsB,KAAK,GAAG,IAAIxB,KAAJ,EAAd;AACA,eAAewB,KAAf"},"metadata":{},"sourceType":"module"}