{"ast":null,"code":"import { css, cx } from '@emotion/css';\nimport { isString } from 'lodash';\nimport React, { useCallback, useState } from 'react';\nimport { getTimeZoneInfo } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Field, RadioButtonGroup, Select } from '../..';\nimport { stylesFactory, useTheme2 } from '../../../themes';\nimport { Button } from '../../Button';\nimport { TimeZonePicker } from '../TimeZonePicker';\nimport { TimeZoneDescription } from '../TimeZonePicker/TimeZoneDescription';\nimport { TimeZoneOffset } from '../TimeZonePicker/TimeZoneOffset';\nimport { TimeZoneTitle } from '../TimeZonePicker/TimeZoneTitle';\nimport { monthOptions } from '../options';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const TimePickerFooter = props => {\n  const {\n    timeZone,\n    fiscalYearStartMonth,\n    timestamp = Date.now(),\n    onChangeTimeZone,\n    onChangeFiscalYearStartMonth\n  } = props;\n  const [isEditing, setEditing] = useState(false);\n  const [editMode, setEditMode] = useState('tz');\n  const onToggleChangeTimeSettings = useCallback(event => {\n    if (event) {\n      event.stopPropagation();\n    }\n\n    setEditing(!isEditing);\n  }, [isEditing, setEditing]);\n  const theme = useTheme2();\n  const style = getStyle(theme);\n\n  if (!isString(timeZone)) {\n    return null;\n  }\n\n  const info = getTimeZoneInfo(timeZone, timestamp);\n\n  if (!info) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(\"section\", {\n      \"aria-label\": \"Time zone selection\",\n      className: style.container,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: style.timeZoneContainer,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: style.timeZone,\n          children: [/*#__PURE__*/_jsx(TimeZoneTitle, {\n            title: info.name\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: style.spacer\n          }), /*#__PURE__*/_jsx(TimeZoneDescription, {\n            info: info\n          })]\n        }), /*#__PURE__*/_jsx(TimeZoneOffset, {\n          timeZone: timeZone,\n          timestamp: timestamp\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: style.spacer\n      }), /*#__PURE__*/_jsx(Button, {\n        variant: \"secondary\",\n        onClick: onToggleChangeTimeSettings,\n        size: \"sm\",\n        children: \"Change time settings\"\n      })]\n    }), isEditing ? /*#__PURE__*/_jsxs(\"div\", {\n      className: style.editContainer,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(RadioButtonGroup, {\n          value: editMode,\n          options: [{\n            label: 'Time Zone',\n            value: 'tz'\n          }, {\n            label: 'Fiscal year',\n            value: 'fy'\n          }],\n          onChange: setEditMode\n        })\n      }), editMode === 'tz' ? /*#__PURE__*/_jsx(\"section\", {\n        \"data-testid\": selectors.components.TimeZonePicker.containerV2,\n        className: cx(style.timeZoneContainer, style.timeSettingContainer),\n        children: /*#__PURE__*/_jsx(TimeZonePicker, {\n          includeInternal: true,\n          onChange: timeZone => {\n            onToggleChangeTimeSettings();\n\n            if (isString(timeZone)) {\n              onChangeTimeZone(timeZone);\n            }\n          },\n          onBlur: onToggleChangeTimeSettings\n        })\n      }) : /*#__PURE__*/_jsx(\"section\", {\n        \"aria-label\": selectors.components.TimeZonePicker.containerV2,\n        className: cx(style.timeZoneContainer, style.timeSettingContainer),\n        children: /*#__PURE__*/_jsx(Field, {\n          className: style.fiscalYearField,\n          label: 'Fiscal year start month',\n          children: /*#__PURE__*/_jsx(Select, {\n            value: fiscalYearStartMonth,\n            menuShouldPortal: false,\n            options: monthOptions,\n            onChange: value => {\n              if (onChangeFiscalYearStartMonth) {\n                var _value$value;\n\n                onChangeFiscalYearStartMonth((_value$value = value.value) !== null && _value$value !== void 0 ? _value$value : 0);\n              }\n            }\n          })\n        })\n      })]\n    }) : null]\n  });\n};\nconst getStyle = stylesFactory(theme => {\n  return {\n    container: css`\n      border-top: 1px solid ${theme.colors.border.weak};\n      padding: 11px;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: center;\n    `,\n    editContainer: css`\n      border-top: 1px solid ${theme.colors.border.weak};\n      padding: 11px;\n      justify-content: space-between;\n      align-items: center;\n      padding: 7px;\n    `,\n    spacer: css`\n      margin-left: 7px;\n    `,\n    timeSettingContainer: css`\n      padding-top: ${theme.spacing(1)};\n    `,\n    fiscalYearField: css`\n      margin-bottom: 0px;\n    `,\n    timeZoneContainer: css`\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: center;\n      flex-grow: 1;\n    `,\n    timeZone: css`\n      display: flex;\n      flex-direction: row;\n      align-items: baseline;\n      flex-grow: 1;\n    `\n  };\n});","map":{"version":3,"names":["css","cx","isString","React","useCallback","useState","getTimeZoneInfo","selectors","Field","RadioButtonGroup","Select","stylesFactory","useTheme2","Button","TimeZonePicker","TimeZoneDescription","TimeZoneOffset","TimeZoneTitle","monthOptions","TimePickerFooter","props","timeZone","fiscalYearStartMonth","timestamp","Date","now","onChangeTimeZone","onChangeFiscalYearStartMonth","isEditing","setEditing","editMode","setEditMode","onToggleChangeTimeSettings","event","stopPropagation","theme","style","getStyle","info","container","timeZoneContainer","name","spacer","editContainer","label","value","components","containerV2","timeSettingContainer","fiscalYearField","colors","border","weak","spacing"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/DateTimePickers/TimeRangePicker/TimePickerFooter.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { isString } from 'lodash';\nimport React, { FC, useCallback, useState } from 'react';\n\nimport { getTimeZoneInfo, GrafanaTheme2, TimeZone } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { Field, RadioButtonGroup, Select } from '../..';\nimport { stylesFactory, useTheme2 } from '../../../themes';\nimport { Button } from '../../Button';\nimport { TimeZonePicker } from '../TimeZonePicker';\nimport { TimeZoneDescription } from '../TimeZonePicker/TimeZoneDescription';\nimport { TimeZoneOffset } from '../TimeZonePicker/TimeZoneOffset';\nimport { TimeZoneTitle } from '../TimeZonePicker/TimeZoneTitle';\nimport { monthOptions } from '../options';\n\ninterface Props {\n  timeZone?: TimeZone;\n  fiscalYearStartMonth?: number;\n  timestamp?: number;\n  onChangeTimeZone: (timeZone: TimeZone) => void;\n  onChangeFiscalYearStartMonth?: (month: number) => void;\n}\n\nexport const TimePickerFooter: FC<Props> = (props) => {\n  const {\n    timeZone,\n    fiscalYearStartMonth,\n    timestamp = Date.now(),\n    onChangeTimeZone,\n    onChangeFiscalYearStartMonth,\n  } = props;\n  const [isEditing, setEditing] = useState(false);\n  const [editMode, setEditMode] = useState('tz');\n\n  const onToggleChangeTimeSettings = useCallback(\n    (event?: React.MouseEvent) => {\n      if (event) {\n        event.stopPropagation();\n      }\n      setEditing(!isEditing);\n    },\n    [isEditing, setEditing]\n  );\n\n  const theme = useTheme2();\n  const style = getStyle(theme);\n\n  if (!isString(timeZone)) {\n    return null;\n  }\n\n  const info = getTimeZoneInfo(timeZone, timestamp);\n\n  if (!info) {\n    return null;\n  }\n\n  return (\n    <div>\n      <section aria-label=\"Time zone selection\" className={style.container}>\n        <div className={style.timeZoneContainer}>\n          <div className={style.timeZone}>\n            <TimeZoneTitle title={info.name} />\n            <div className={style.spacer} />\n            <TimeZoneDescription info={info} />\n          </div>\n          <TimeZoneOffset timeZone={timeZone} timestamp={timestamp} />\n        </div>\n        <div className={style.spacer} />\n        <Button variant=\"secondary\" onClick={onToggleChangeTimeSettings} size=\"sm\">\n          Change time settings\n        </Button>\n      </section>\n      {isEditing ? (\n        <div className={style.editContainer}>\n          <div>\n            <RadioButtonGroup\n              value={editMode}\n              options={[\n                { label: 'Time Zone', value: 'tz' },\n                { label: 'Fiscal year', value: 'fy' },\n              ]}\n              onChange={setEditMode}\n            ></RadioButtonGroup>\n          </div>\n          {editMode === 'tz' ? (\n            <section\n              data-testid={selectors.components.TimeZonePicker.containerV2}\n              className={cx(style.timeZoneContainer, style.timeSettingContainer)}\n            >\n              <TimeZonePicker\n                includeInternal={true}\n                onChange={(timeZone) => {\n                  onToggleChangeTimeSettings();\n\n                  if (isString(timeZone)) {\n                    onChangeTimeZone(timeZone);\n                  }\n                }}\n                onBlur={onToggleChangeTimeSettings}\n              />\n            </section>\n          ) : (\n            <section\n              aria-label={selectors.components.TimeZonePicker.containerV2}\n              className={cx(style.timeZoneContainer, style.timeSettingContainer)}\n            >\n              <Field className={style.fiscalYearField} label={'Fiscal year start month'}>\n                <Select\n                  value={fiscalYearStartMonth}\n                  menuShouldPortal={false}\n                  options={monthOptions}\n                  onChange={(value) => {\n                    if (onChangeFiscalYearStartMonth) {\n                      onChangeFiscalYearStartMonth(value.value ?? 0);\n                    }\n                  }}\n                />\n              </Field>\n            </section>\n          )}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nconst getStyle = stylesFactory((theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      border-top: 1px solid ${theme.colors.border.weak};\n      padding: 11px;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: center;\n    `,\n    editContainer: css`\n      border-top: 1px solid ${theme.colors.border.weak};\n      padding: 11px;\n      justify-content: space-between;\n      align-items: center;\n      padding: 7px;\n    `,\n    spacer: css`\n      margin-left: 7px;\n    `,\n    timeSettingContainer: css`\n      padding-top: ${theme.spacing(1)};\n    `,\n    fiscalYearField: css`\n      margin-bottom: 0px;\n    `,\n    timeZoneContainer: css`\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: center;\n      flex-grow: 1;\n    `,\n    timeZone: css`\n      display: flex;\n      flex-direction: row;\n      align-items: baseline;\n      flex-grow: 1;\n    `,\n  };\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}