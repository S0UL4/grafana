{"ast":null,"code":"var _FlexItem;\n\nimport { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { usePopperTooltip } from 'react-popper-tooltip';\nimport { renderMarkdown } from '@grafana/data';\nimport { FlexItem } from '@grafana/experimental';\nimport { Button, Portal, useStyles2 } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport const OperationInfoButton = /*#__PURE__*/React.memo(({\n  def,\n  operation\n}) => {\n  const styles = useStyles2(getStyles);\n  const [show, setShow] = useState(false);\n  const {\n    getTooltipProps,\n    setTooltipRef,\n    setTriggerRef,\n    visible\n  } = usePopperTooltip({\n    placement: 'top',\n    visible: show,\n    offset: [0, 16],\n    onVisibleChange: setShow,\n    interactive: true,\n    trigger: ['click']\n  });\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Button, {\n      title: \"Click to show description\",\n      ref: setTriggerRef,\n      icon: \"info-circle\",\n      size: \"sm\",\n      variant: \"secondary\",\n      fill: \"text\"\n    }), visible && /*#__PURE__*/_jsx(Portal, {\n      children: /*#__PURE__*/_jsxs(\"div\", Object.assign({\n        ref: setTooltipRef\n      }, getTooltipProps(), {\n        className: styles.docBox,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.docBoxHeader,\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            children: def.renderer(operation, def, '<expr>')\n          }), _FlexItem || (_FlexItem = /*#__PURE__*/_jsx(FlexItem, {\n            grow: 1\n          })), /*#__PURE__*/_jsx(Button, {\n            icon: \"times\",\n            onClick: () => setShow(false),\n            fill: \"text\",\n            variant: \"secondary\",\n            title: \"Remove operation\"\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.docBoxBody,\n          dangerouslySetInnerHTML: {\n            __html: getOperationDocs(def, operation)\n          }\n        })]\n      }))\n    })]\n  });\n});\nOperationInfoButton.displayName = 'OperationDocs';\n\nconst getStyles = theme => {\n  return {\n    docBox: css({\n      overflow: 'hidden',\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.strong}`,\n      boxShadow: theme.shadows.z3,\n      maxWidth: '600px',\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius(),\n      zIndex: theme.zIndex.tooltip\n    }),\n    docBoxHeader: css({\n      fontSize: theme.typography.h5.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n      paddingBottom: theme.spacing(1),\n      display: 'flex',\n      alignItems: 'center'\n    }),\n    docBoxBody: css({\n      // The markdown paragraph has a marginBottom this removes it\n      marginBottom: theme.spacing(-1),\n      color: theme.colors.text.secondary\n    }),\n    signature: css({\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace\n    }),\n    dropdown: css({\n      opacity: 0,\n      color: theme.colors.text.secondary\n    })\n  };\n};\n\nfunction getOperationDocs(def, op) {\n  var _def$documentation;\n\n  return renderMarkdown(def.explainHandler ? def.explainHandler(op, def) : (_def$documentation = def.documentation) !== null && _def$documentation !== void 0 ? _def$documentation : 'no docs');\n}","map":{"version":3,"names":["css","React","useState","usePopperTooltip","renderMarkdown","FlexItem","Button","Portal","useStyles2","OperationInfoButton","memo","def","operation","styles","getStyles","show","setShow","getTooltipProps","setTooltipRef","setTriggerRef","visible","placement","offset","onVisibleChange","interactive","trigger","docBox","docBoxHeader","renderer","docBoxBody","__html","getOperationDocs","displayName","theme","overflow","background","colors","primary","border","strong","boxShadow","shadows","z3","maxWidth","padding","spacing","borderRadius","shape","zIndex","tooltip","fontSize","typography","h5","fontFamily","fontFamilyMonospace","paddingBottom","display","alignItems","marginBottom","color","text","secondary","signature","bodySmall","dropdown","opacity","op","explainHandler","documentation"],"sources":["/home/soula/grafana/public/app/plugins/datasource/prometheus/querybuilder/shared/OperationInfoButton.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { usePopperTooltip } from 'react-popper-tooltip';\n\nimport { GrafanaTheme2, renderMarkdown } from '@grafana/data';\nimport { FlexItem } from '@grafana/experimental';\nimport { Button, Portal, useStyles2 } from '@grafana/ui';\n\nimport { QueryBuilderOperation, QueryBuilderOperationDef } from './types';\n\nexport interface Props {\n  operation: QueryBuilderOperation;\n  def: QueryBuilderOperationDef;\n}\n\nexport const OperationInfoButton = React.memo<Props>(({ def, operation }) => {\n  const styles = useStyles2(getStyles);\n  const [show, setShow] = useState(false);\n  const { getTooltipProps, setTooltipRef, setTriggerRef, visible } = usePopperTooltip({\n    placement: 'top',\n    visible: show,\n    offset: [0, 16],\n    onVisibleChange: setShow,\n    interactive: true,\n    trigger: ['click'],\n  });\n\n  return (\n    <>\n      <Button\n        title=\"Click to show description\"\n        ref={setTriggerRef}\n        icon=\"info-circle\"\n        size=\"sm\"\n        variant=\"secondary\"\n        fill=\"text\"\n      />\n      {visible && (\n        <Portal>\n          <div ref={setTooltipRef} {...getTooltipProps()} className={styles.docBox}>\n            <div className={styles.docBoxHeader}>\n              <span>{def.renderer(operation, def, '<expr>')}</span>\n              <FlexItem grow={1} />\n              <Button\n                icon=\"times\"\n                onClick={() => setShow(false)}\n                fill=\"text\"\n                variant=\"secondary\"\n                title=\"Remove operation\"\n              />\n            </div>\n            <div\n              className={styles.docBoxBody}\n              dangerouslySetInnerHTML={{ __html: getOperationDocs(def, operation) }}\n            ></div>\n          </div>\n        </Portal>\n      )}\n    </>\n  );\n});\n\nOperationInfoButton.displayName = 'OperationDocs';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    docBox: css({\n      overflow: 'hidden',\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.strong}`,\n      boxShadow: theme.shadows.z3,\n      maxWidth: '600px',\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius(),\n      zIndex: theme.zIndex.tooltip,\n    }),\n    docBoxHeader: css({\n      fontSize: theme.typography.h5.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n      paddingBottom: theme.spacing(1),\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    docBoxBody: css({\n      // The markdown paragraph has a marginBottom this removes it\n      marginBottom: theme.spacing(-1),\n      color: theme.colors.text.secondary,\n    }),\n    signature: css({\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n    }),\n    dropdown: css({\n      opacity: 0,\n      color: theme.colors.text.secondary,\n    }),\n  };\n};\nfunction getOperationDocs(def: QueryBuilderOperationDef, op: QueryBuilderOperation): string {\n  return renderMarkdown(def.explainHandler ? def.explainHandler(op, def) : def.documentation ?? 'no docs');\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}