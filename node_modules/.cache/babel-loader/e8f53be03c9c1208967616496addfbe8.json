{"ast":null,"code":"var _h;\n\nimport React from 'react';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { config } from '@grafana/runtime';\nimport { Button, Field, Form, HorizontalGroup, Input, LinkButton } from '@grafana/ui';\nimport { DashboardPickerByID } from 'app/core/components/OptionsUI/DashboardPickerByID';\nimport { TagFilter } from '../../core/components/TagFilter/TagFilter';\nimport { SearchSrv } from '../../core/services/search_srv';\nimport { PlaylistTable } from './PlaylistTable';\nimport { usePlaylistItems } from './usePlaylistItems';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nconst searchSrv = new SearchSrv();\nexport const PlaylistForm = ({\n  onSubmit,\n  playlist\n}) => {\n  var _PlaylistTable, _Field;\n\n  const {\n    name,\n    interval,\n    items: propItems\n  } = playlist;\n  const {\n    items,\n    addById,\n    addByTag,\n    deleteItem,\n    moveDown,\n    moveUp\n  } = usePlaylistItems(propItems);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Form, {\n      onSubmit: list => onSubmit(Object.assign({}, list, {\n        items\n      })),\n      validateOn: 'onBlur',\n      children: ({\n        register,\n        errors\n      }) => {\n        var _errors$name, _errors$interval;\n\n        const isDisabled = items.length === 0 || Object.keys(errors).length > 0;\n        return /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(Field, {\n            label: \"Name\",\n            invalid: !!errors.name,\n            error: errors === null || errors === void 0 ? void 0 : (_errors$name = errors.name) === null || _errors$name === void 0 ? void 0 : _errors$name.message,\n            children: /*#__PURE__*/_jsx(Input, Object.assign({\n              type: \"text\"\n            }, register('name', {\n              required: 'Name is required'\n            }), {\n              placeholder: \"Name\",\n              defaultValue: name,\n              \"aria-label\": selectors.pages.PlaylistForm.name\n            }))\n          }), /*#__PURE__*/_jsx(Field, {\n            label: \"Interval\",\n            invalid: !!errors.interval,\n            error: errors === null || errors === void 0 ? void 0 : (_errors$interval = errors.interval) === null || _errors$interval === void 0 ? void 0 : _errors$interval.message,\n            children: /*#__PURE__*/_jsx(Input, Object.assign({\n              type: \"text\"\n            }, register('interval', {\n              required: 'Interval is required'\n            }), {\n              placeholder: \"5m\",\n              defaultValue: interval !== null && interval !== void 0 ? interval : '5m',\n              \"aria-label\": selectors.pages.PlaylistForm.interval\n            }))\n          }), _PlaylistTable || (_PlaylistTable = /*#__PURE__*/_jsx(PlaylistTable, {\n            items: items,\n            onMoveUp: moveUp,\n            onMoveDown: moveDown,\n            onDelete: deleteItem\n          })), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"gf-form-group\",\n            children: [_h || (_h = /*#__PURE__*/_jsx(\"h3\", {\n              className: \"page-headering\",\n              children: \"Add dashboards\"\n            })), _Field || (_Field = /*#__PURE__*/_jsx(Field, {\n              label: \"Add by title\",\n              children: /*#__PURE__*/_jsx(DashboardPickerByID, {\n                onChange: addById,\n                id: \"dashboard-picker\",\n                isClearable: true\n              })\n            })), /*#__PURE__*/_jsx(Field, {\n              label: \"Add by tag\",\n              children: /*#__PURE__*/_jsx(TagFilter, {\n                isClearable: true,\n                tags: [],\n                hideValues: true,\n                tagOptions: searchSrv.getDashboardTags,\n                onChange: addByTag,\n                placeholder: ''\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(HorizontalGroup, {\n            children: [/*#__PURE__*/_jsx(Button, {\n              type: \"submit\",\n              variant: \"primary\",\n              disabled: isDisabled,\n              children: \"Save\"\n            }), /*#__PURE__*/_jsx(LinkButton, {\n              variant: \"secondary\",\n              href: `${config.appSubUrl}/playlists`,\n              children: \"Cancel\"\n            })]\n          })]\n        });\n      }\n    })\n  });\n};","map":{"version":3,"names":["React","selectors","config","Button","Field","Form","HorizontalGroup","Input","LinkButton","DashboardPickerByID","TagFilter","SearchSrv","PlaylistTable","usePlaylistItems","searchSrv","PlaylistForm","onSubmit","playlist","name","interval","items","propItems","addById","addByTag","deleteItem","moveDown","moveUp","list","register","errors","isDisabled","length","Object","keys","message","required","pages","getDashboardTags","appSubUrl"],"sources":["/home/soula/grafana/public/app/features/playlist/PlaylistForm.tsx"],"sourcesContent":["import React, { FC } from 'react';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { config } from '@grafana/runtime';\nimport { Button, Field, Form, HorizontalGroup, Input, LinkButton } from '@grafana/ui';\nimport { DashboardPickerByID } from 'app/core/components/OptionsUI/DashboardPickerByID';\n\nimport { TagFilter } from '../../core/components/TagFilter/TagFilter';\nimport { SearchSrv } from '../../core/services/search_srv';\n\nimport { PlaylistTable } from './PlaylistTable';\nimport { Playlist } from './types';\nimport { usePlaylistItems } from './usePlaylistItems';\n\ninterface PlaylistFormProps {\n  onSubmit: (playlist: Playlist) => void;\n  playlist: Playlist;\n}\n\nconst searchSrv = new SearchSrv();\n\nexport const PlaylistForm: FC<PlaylistFormProps> = ({ onSubmit, playlist }) => {\n  const { name, interval, items: propItems } = playlist;\n  const { items, addById, addByTag, deleteItem, moveDown, moveUp } = usePlaylistItems(propItems);\n  return (\n    <>\n      <Form onSubmit={(list: Playlist) => onSubmit({ ...list, items })} validateOn={'onBlur'}>\n        {({ register, errors }) => {\n          const isDisabled = items.length === 0 || Object.keys(errors).length > 0;\n          return (\n            <>\n              <Field label=\"Name\" invalid={!!errors.name} error={errors?.name?.message}>\n                <Input\n                  type=\"text\"\n                  {...register('name', { required: 'Name is required' })}\n                  placeholder=\"Name\"\n                  defaultValue={name}\n                  aria-label={selectors.pages.PlaylistForm.name}\n                />\n              </Field>\n              <Field label=\"Interval\" invalid={!!errors.interval} error={errors?.interval?.message}>\n                <Input\n                  type=\"text\"\n                  {...register('interval', { required: 'Interval is required' })}\n                  placeholder=\"5m\"\n                  defaultValue={interval ?? '5m'}\n                  aria-label={selectors.pages.PlaylistForm.interval}\n                />\n              </Field>\n\n              <PlaylistTable items={items} onMoveUp={moveUp} onMoveDown={moveDown} onDelete={deleteItem} />\n\n              <div className=\"gf-form-group\">\n                <h3 className=\"page-headering\">Add dashboards</h3>\n\n                <Field label=\"Add by title\">\n                  <DashboardPickerByID onChange={addById} id=\"dashboard-picker\" isClearable />\n                </Field>\n\n                <Field label=\"Add by tag\">\n                  <TagFilter\n                    isClearable\n                    tags={[]}\n                    hideValues\n                    tagOptions={searchSrv.getDashboardTags}\n                    onChange={addByTag}\n                    placeholder={''}\n                  />\n                </Field>\n              </div>\n\n              <HorizontalGroup>\n                <Button type=\"submit\" variant=\"primary\" disabled={isDisabled}>\n                  Save\n                </Button>\n                <LinkButton variant=\"secondary\" href={`${config.appSubUrl}/playlists`}>\n                  Cancel\n                </LinkButton>\n              </HorizontalGroup>\n            </>\n          );\n        }}\n      </Form>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}