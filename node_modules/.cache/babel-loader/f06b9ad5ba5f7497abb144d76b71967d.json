{"ast":null,"code":"import { useMemo } from 'react';\nimport { useQuery } from '../components/QueryEditor/ElasticsearchQueryContext';\n\nconst toId = e => e.id;\n\nconst toInt = idString => parseInt(idString, 10);\n\nexport const useNextId = () => {\n  const {\n    metrics,\n    bucketAggs\n  } = useQuery();\n  return useMemo(() => (Math.max(...[...((metrics === null || metrics === void 0 ? void 0 : metrics.map(toId)) || ['0']), ...((bucketAggs === null || bucketAggs === void 0 ? void 0 : bucketAggs.map(toId)) || ['0'])].map(toInt)) + 1).toString(), [metrics, bucketAggs]);\n};","map":{"version":3,"names":["useMemo","useQuery","toId","e","id","toInt","idString","parseInt","useNextId","metrics","bucketAggs","Math","max","map","toString"],"sources":["/home/soula/grafana/public/app/plugins/datasource/elasticsearch/hooks/useNextId.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport { BucketAggregation } from '../components/QueryEditor/BucketAggregationsEditor/aggregations';\nimport { useQuery } from '../components/QueryEditor/ElasticsearchQueryContext';\nimport { MetricAggregation } from '../components/QueryEditor/MetricAggregationsEditor/aggregations';\n\nconst toId = <T extends { id: unknown }>(e: T): T['id'] => e.id;\n\nconst toInt = (idString: string) => parseInt(idString, 10);\n\nexport const useNextId = (): MetricAggregation['id'] | BucketAggregation['id'] => {\n  const { metrics, bucketAggs } = useQuery();\n\n  return useMemo(\n    () =>\n      (Math.max(...[...(metrics?.map(toId) || ['0']), ...(bucketAggs?.map(toId) || ['0'])].map(toInt)) + 1).toString(),\n    [metrics, bucketAggs]\n  );\n};\n"],"mappings":"AAAA,SAASA,OAAT,QAAwB,OAAxB;AAGA,SAASC,QAAT,QAAyB,qDAAzB;;AAGA,MAAMC,IAAI,GAA+BC,CAA5B,IAA8CA,CAAC,CAACC,EAA7D;;AAEA,MAAMC,KAAK,GAAIC,QAAD,IAAsBC,QAAQ,CAACD,QAAD,EAAW,EAAX,CAA5C;;AAEA,OAAO,MAAME,SAAS,GAAG,MAAyD;EAChF,MAAM;IAAEC,OAAF;IAAWC;EAAX,IAA0BT,QAAQ,EAAxC;EAEA,OAAOD,OAAO,CACZ,MACE,CAACW,IAAI,CAACC,GAAL,CAAS,GAAG,CAAC,IAAI,CAAAH,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEI,GAAT,CAAaX,IAAb,MAAsB,CAAC,GAAD,CAA1B,CAAD,EAAmC,IAAI,CAAAQ,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEG,GAAZ,CAAgBX,IAAhB,MAAyB,CAAC,GAAD,CAA7B,CAAnC,EAAwEW,GAAxE,CAA4ER,KAA5E,CAAZ,IAAkG,CAAnG,EAAsGS,QAAtG,EAFU,EAGZ,CAACL,OAAD,EAAUC,UAAV,CAHY,CAAd;AAKD,CARM"},"metadata":{},"sourceType":"module"}