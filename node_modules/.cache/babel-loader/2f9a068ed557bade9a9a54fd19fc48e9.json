{"ast":null,"code":"var _div;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { Subscription } from 'rxjs';\nimport { LegacyGraphHoverEvent, LegacyGraphHoverClearEvent, DataHoverEvent, DataHoverClearEvent } from '@grafana/data';\nimport { CustomScrollbar } from '@grafana/ui';\nimport { DataHoverView } from '../geomap/components/DataHoverView';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport class CursorView extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"subscription\", new Subscription());\n\n    _defineProperty(this, \"state\", {});\n  }\n\n  componentDidMount() {\n    const {\n      eventBus\n    } = this.props;\n    this.subscription.add(eventBus.subscribe(DataHoverEvent, event => {\n      this.setState({\n        event\n      });\n    }));\n    this.subscription.add(eventBus.subscribe(DataHoverClearEvent, event => {\n      this.setState({\n        event\n      });\n    }));\n    this.subscription.add(eventBus.subscribe(LegacyGraphHoverEvent, event => {\n      this.setState({\n        event\n      });\n    }));\n    this.subscription.add(eventBus.subscribe(LegacyGraphHoverClearEvent, event => {\n      this.setState({\n        event\n      });\n    }));\n  }\n\n  componentWillUnmount() {\n    this.subscription.unsubscribe();\n  }\n\n  render() {\n    const {\n      event\n    } = this.state;\n\n    if (!event) {\n      return _div || (_div = /*#__PURE__*/_jsx(\"div\", {\n        children: \"no events yet\"\n      }));\n    }\n\n    const {\n      type,\n      payload,\n      origin\n    } = event;\n    return /*#__PURE__*/_jsxs(CustomScrollbar, {\n      autoHeightMin: \"100%\",\n      autoHeightMax: \"100%\",\n      children: [/*#__PURE__*/_jsxs(\"h3\", {\n        children: [\"Origin: \", origin === null || origin === void 0 ? void 0 : origin.path]\n      }), /*#__PURE__*/_jsxs(\"span\", {\n        children: [\"Type: \", type]\n      }), Boolean(payload) && /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"pre\", {\n          children: JSON.stringify(payload.point, null, '  ')\n        }), payload.data && /*#__PURE__*/_jsx(DataHoverView, {\n          data: payload.data,\n          rowIndex: payload.rowIndex,\n          columnIndex: payload.columnIndex\n        })]\n      })]\n    });\n  }\n\n}","map":{"version":3,"names":["React","Component","Subscription","LegacyGraphHoverEvent","LegacyGraphHoverClearEvent","DataHoverEvent","DataHoverClearEvent","CustomScrollbar","DataHoverView","CursorView","componentDidMount","eventBus","props","subscription","add","subscribe","event","setState","componentWillUnmount","unsubscribe","render","state","type","payload","origin","path","Boolean","JSON","stringify","point","data","rowIndex","columnIndex"],"sources":["/home/soula/grafana/public/app/plugins/panel/debug/CursorView.tsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Subscription } from 'rxjs';\n\nimport {\n  EventBus,\n  LegacyGraphHoverEvent,\n  LegacyGraphHoverClearEvent,\n  DataHoverEvent,\n  DataHoverClearEvent,\n  BusEventBase,\n} from '@grafana/data';\nimport { CustomScrollbar } from '@grafana/ui';\n\nimport { DataHoverView } from '../geomap/components/DataHoverView';\n\ninterface Props {\n  eventBus: EventBus;\n}\n\ninterface State {\n  event?: BusEventBase;\n}\nexport class CursorView extends Component<Props, State> {\n  subscription = new Subscription();\n  state: State = {};\n\n  componentDidMount() {\n    const { eventBus } = this.props;\n\n    this.subscription.add(\n      eventBus.subscribe(DataHoverEvent, (event) => {\n        this.setState({ event });\n      })\n    );\n\n    this.subscription.add(\n      eventBus.subscribe(DataHoverClearEvent, (event) => {\n        this.setState({ event });\n      })\n    );\n\n    this.subscription.add(\n      eventBus.subscribe(LegacyGraphHoverEvent, (event) => {\n        this.setState({ event });\n      })\n    );\n\n    this.subscription.add(\n      eventBus.subscribe(LegacyGraphHoverClearEvent, (event) => {\n        this.setState({ event });\n      })\n    );\n  }\n\n  componentWillUnmount() {\n    this.subscription.unsubscribe();\n  }\n\n  render() {\n    const { event } = this.state;\n    if (!event) {\n      return <div>no events yet</div>;\n    }\n    const { type, payload, origin } = event;\n    return (\n      <CustomScrollbar autoHeightMin=\"100%\" autoHeightMax=\"100%\">\n        <h3>Origin: {(origin as any)?.path}</h3>\n        <span>Type: {type}</span>\n        {Boolean(payload) && (\n          <>\n            <pre>{JSON.stringify(payload.point, null, '  ')}</pre>\n            {payload.data && (\n              <DataHoverView data={payload.data} rowIndex={payload.rowIndex} columnIndex={payload.columnIndex} />\n            )}\n          </>\n        )}\n      </CustomScrollbar>\n    );\n  }\n}\n"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,YAAT,QAA6B,MAA7B;AAEA,SAEEC,qBAFF,EAGEC,0BAHF,EAIEC,cAJF,EAKEC,mBALF,QAOO,eAPP;AAQA,SAASC,eAAT,QAAgC,aAAhC;AAEA,SAASC,aAAT,QAA8B,oCAA9B;;;;AASA,OAAO,MAAMC,UAAN,SAAyBR,SAAzB,CAAiD;EAAA;IAAA;;IAAA,sCACvC,IAAIC,YAAJ,EADuC;;IAAA,+BAEvC,EAFuC;EAAA;;EAItDQ,iBAAiB,GAAG;IAClB,MAAM;MAAEC;IAAF,IAAe,KAAKC,KAA1B;IAEA,KAAKC,YAAL,CAAkBC,GAAlB,CACEH,QAAQ,CAACI,SAAT,CAAmBV,cAAnB,EAAoCW,KAAD,IAAW;MAC5C,KAAKC,QAAL,CAAc;QAAED;MAAF,CAAd;IACD,CAFD,CADF;IAMA,KAAKH,YAAL,CAAkBC,GAAlB,CACEH,QAAQ,CAACI,SAAT,CAAmBT,mBAAnB,EAAyCU,KAAD,IAAW;MACjD,KAAKC,QAAL,CAAc;QAAED;MAAF,CAAd;IACD,CAFD,CADF;IAMA,KAAKH,YAAL,CAAkBC,GAAlB,CACEH,QAAQ,CAACI,SAAT,CAAmBZ,qBAAnB,EAA2Ca,KAAD,IAAW;MACnD,KAAKC,QAAL,CAAc;QAAED;MAAF,CAAd;IACD,CAFD,CADF;IAMA,KAAKH,YAAL,CAAkBC,GAAlB,CACEH,QAAQ,CAACI,SAAT,CAAmBX,0BAAnB,EAAgDY,KAAD,IAAW;MACxD,KAAKC,QAAL,CAAc;QAAED;MAAF,CAAd;IACD,CAFD,CADF;EAKD;;EAEDE,oBAAoB,GAAG;IACrB,KAAKL,YAAL,CAAkBM,WAAlB;EACD;;EAEDC,MAAM,GAAG;IACP,MAAM;MAAEJ;IAAF,IAAY,KAAKK,KAAvB;;IACA,IAAI,CAACL,KAAL,EAAY;MACV,oCAAO;QAAA;MAAA,EAAP;IACD;;IACD,MAAM;MAAEM,IAAF;MAAQC,OAAR;MAAiBC;IAAjB,IAA4BR,KAAlC;IACA,oBACE,MAAC,eAAD;MAAiB,aAAa,EAAC,MAA/B;MAAsC,aAAa,EAAC,MAApD;MAAA,wBACE;QAAA,uBAAcQ,MAAd,aAAcA,MAAd,uBAAcA,MAAD,CAAiBC,IAA9B;MAAA,EADF,eAEE;QAAA,qBAAaH,IAAb;MAAA,EAFF,EAGGI,OAAO,CAACH,OAAD,CAAP,iBACC;QAAA,wBACE;UAAA,UAAMI,IAAI,CAACC,SAAL,CAAeL,OAAO,CAACM,KAAvB,EAA8B,IAA9B,EAAoC,IAApC;QAAN,EADF,EAEGN,OAAO,CAACO,IAAR,iBACC,KAAC,aAAD;UAAe,IAAI,EAAEP,OAAO,CAACO,IAA7B;UAAmC,QAAQ,EAAEP,OAAO,CAACQ,QAArD;UAA+D,WAAW,EAAER,OAAO,CAACS;QAApF,EAHJ;MAAA,EAJJ;IAAA,EADF;EAcD;;AAxDqD"},"metadata":{},"sourceType":"module"}