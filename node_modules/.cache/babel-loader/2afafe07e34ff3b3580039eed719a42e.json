{"ast":null,"code":"import { css } from '@emotion/css';\nimport React from 'react';\nimport { Button, Input, useStyles2 } from '@grafana/ui';\nimport { ActionIcon } from '../../../rules/ActionIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const StringArrayInput = ({\n  value,\n  onChange,\n  readOnly = false\n}) => {\n  const styles = useStyles2(getStyles);\n\n  const deleteItem = index => {\n    if (!value) {\n      return;\n    }\n\n    const newValue = value.slice();\n    newValue.splice(index, 1);\n    onChange(newValue);\n  };\n\n  const updateValue = (itemValue, index) => {\n    if (!value) {\n      return;\n    }\n\n    onChange(value.map((v, i) => i === index ? itemValue : v));\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [!!(value !== null && value !== void 0 && value.length) && value.map((v, index) => /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.row,\n      children: [/*#__PURE__*/_jsx(Input, {\n        readOnly: readOnly,\n        value: v,\n        onChange: e => updateValue(e.currentTarget.value, index)\n      }), !readOnly && /*#__PURE__*/_jsx(ActionIcon, {\n        className: styles.deleteIcon,\n        icon: \"trash-alt\",\n        tooltip: \"delete\",\n        onClick: () => deleteItem(index)\n      })]\n    }, index)), !readOnly && /*#__PURE__*/_jsx(Button, {\n      className: styles.addButton,\n      type: \"button\",\n      variant: \"secondary\",\n      icon: \"plus\",\n      size: \"sm\",\n      onClick: () => onChange([...(value !== null && value !== void 0 ? value : []), '']),\n      children: \"Add\"\n    })]\n  });\n};\n\nconst getStyles = theme => ({\n  row: css`\n    display: flex;\n    flex-direction: row;\n    margin-bottom: ${theme.spacing(1)};\n    align-items: center;\n  `,\n  deleteIcon: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n  addButton: css`\n    margin-top: ${theme.spacing(1)};\n  `\n});","map":{"version":3,"names":["css","React","Button","Input","useStyles2","ActionIcon","StringArrayInput","value","onChange","readOnly","styles","getStyles","deleteItem","index","newValue","slice","splice","updateValue","itemValue","map","v","i","length","row","e","currentTarget","deleteIcon","addButton","theme","spacing"],"sources":["/home/soula/grafana/public/app/features/alerting/unified/components/receivers/form/fields/StringArrayInput.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { FC } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, Input, useStyles2 } from '@grafana/ui';\n\nimport { ActionIcon } from '../../../rules/ActionIcon';\n\ninterface Props {\n  value?: string[];\n  readOnly?: boolean;\n  onChange: (value: string[]) => void;\n}\n\nexport const StringArrayInput: FC<Props> = ({ value, onChange, readOnly = false }) => {\n  const styles = useStyles2(getStyles);\n\n  const deleteItem = (index: number) => {\n    if (!value) {\n      return;\n    }\n    const newValue = value.slice();\n    newValue.splice(index, 1);\n    onChange(newValue);\n  };\n\n  const updateValue = (itemValue: string, index: number) => {\n    if (!value) {\n      return;\n    }\n    onChange(value.map((v, i) => (i === index ? itemValue : v)));\n  };\n\n  return (\n    <div>\n      {!!value?.length &&\n        value.map((v, index) => (\n          <div key={index} className={styles.row}>\n            <Input readOnly={readOnly} value={v} onChange={(e) => updateValue(e.currentTarget.value, index)} />\n            {!readOnly && (\n              <ActionIcon\n                className={styles.deleteIcon}\n                icon=\"trash-alt\"\n                tooltip=\"delete\"\n                onClick={() => deleteItem(index)}\n              />\n            )}\n          </div>\n        ))}\n      {!readOnly && (\n        <Button\n          className={styles.addButton}\n          type=\"button\"\n          variant=\"secondary\"\n          icon=\"plus\"\n          size=\"sm\"\n          onClick={() => onChange([...(value ?? []), ''])}\n        >\n          Add\n        </Button>\n      )}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  row: css`\n    display: flex;\n    flex-direction: row;\n    margin-bottom: ${theme.spacing(1)};\n    align-items: center;\n  `,\n  deleteIcon: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n  addButton: css`\n    margin-top: ${theme.spacing(1)};\n  `,\n});\n"],"mappings":"AAAA,SAASA,GAAT,QAAoB,cAApB;AACA,OAAOC,KAAP,MAA0B,OAA1B;AAGA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,UAAxB,QAA0C,aAA1C;AAEA,SAASC,UAAT,QAA2B,2BAA3B;;;AAQA,OAAO,MAAMC,gBAA2B,GAAG,CAAC;EAAEC,KAAF;EAASC,QAAT;EAAmBC,QAAQ,GAAG;AAA9B,CAAD,KAA2C;EACpF,MAAMC,MAAM,GAAGN,UAAU,CAACO,SAAD,CAAzB;;EAEA,MAAMC,UAAU,GAAIC,KAAD,IAAmB;IACpC,IAAI,CAACN,KAAL,EAAY;MACV;IACD;;IACD,MAAMO,QAAQ,GAAGP,KAAK,CAACQ,KAAN,EAAjB;IACAD,QAAQ,CAACE,MAAT,CAAgBH,KAAhB,EAAuB,CAAvB;IACAL,QAAQ,CAACM,QAAD,CAAR;EACD,CAPD;;EASA,MAAMG,WAAW,GAAG,CAACC,SAAD,EAAoBL,KAApB,KAAsC;IACxD,IAAI,CAACN,KAAL,EAAY;MACV;IACD;;IACDC,QAAQ,CAACD,KAAK,CAACY,GAAN,CAAU,CAACC,CAAD,EAAIC,CAAJ,KAAWA,CAAC,KAAKR,KAAN,GAAcK,SAAd,GAA0BE,CAA/C,CAAD,CAAR;EACD,CALD;;EAOA,oBACE;IAAA,WACG,CAAC,EAACb,KAAD,aAACA,KAAD,eAACA,KAAK,CAAEe,MAAR,CAAD,IACCf,KAAK,CAACY,GAAN,CAAU,CAACC,CAAD,EAAIP,KAAJ,kBACR;MAAiB,SAAS,EAAEH,MAAM,CAACa,GAAnC;MAAA,wBACE,KAAC,KAAD;QAAO,QAAQ,EAAEd,QAAjB;QAA2B,KAAK,EAAEW,CAAlC;QAAqC,QAAQ,EAAGI,CAAD,IAAOP,WAAW,CAACO,CAAC,CAACC,aAAF,CAAgBlB,KAAjB,EAAwBM,KAAxB;MAAjE,EADF,EAEG,CAACJ,QAAD,iBACC,KAAC,UAAD;QACE,SAAS,EAAEC,MAAM,CAACgB,UADpB;QAEE,IAAI,EAAC,WAFP;QAGE,OAAO,EAAC,QAHV;QAIE,OAAO,EAAE,MAAMd,UAAU,CAACC,KAAD;MAJ3B,EAHJ;IAAA,GAAUA,KAAV,CADF,CAFJ,EAeG,CAACJ,QAAD,iBACC,KAAC,MAAD;MACE,SAAS,EAAEC,MAAM,CAACiB,SADpB;MAEE,IAAI,EAAC,QAFP;MAGE,OAAO,EAAC,WAHV;MAIE,IAAI,EAAC,MAJP;MAKE,IAAI,EAAC,IALP;MAME,OAAO,EAAE,MAAMnB,QAAQ,CAAC,CAAC,IAAID,KAAJ,aAAIA,KAAJ,cAAIA,KAAJ,GAAa,EAAb,CAAD,EAAmB,EAAnB,CAAD,CANzB;MAAA;IAAA,EAhBJ;EAAA,EADF;AA8BD,CAjDM;;AAmDP,MAAMI,SAAS,GAAIiB,KAAD,KAA2B;EAC3CL,GAAG,EAAEvB,GAAI;AACX;AACA;AACA,qBAAqB4B,KAAK,CAACC,OAAN,CAAc,CAAd,CAAiB;AACtC;AACA,GAN6C;EAO3CH,UAAU,EAAE1B,GAAI;AAClB,mBAAmB4B,KAAK,CAACC,OAAN,CAAc,CAAd,CAAiB;AACpC,GAT6C;EAU3CF,SAAS,EAAE3B,GAAI;AACjB,kBAAkB4B,KAAK,CAACC,OAAN,CAAc,CAAd,CAAiB;AACnC;AAZ6C,CAA3B,CAAlB"},"metadata":{},"sourceType":"module"}