{"ast":null,"code":"export let MetricQueryType;\n\n(function (MetricQueryType) {\n  MetricQueryType[MetricQueryType[\"Search\"] = 0] = \"Search\";\n  MetricQueryType[MetricQueryType[\"Query\"] = 1] = \"Query\";\n})(MetricQueryType || (MetricQueryType = {}));\n\nexport let MetricEditorMode;\n\n(function (MetricEditorMode) {\n  MetricEditorMode[MetricEditorMode[\"Builder\"] = 0] = \"Builder\";\n  MetricEditorMode[MetricEditorMode[\"Code\"] = 1] = \"Code\";\n})(MetricEditorMode || (MetricEditorMode = {}));\n\nexport let CloudWatchLogsQueryStatus;\n\n(function (CloudWatchLogsQueryStatus) {\n  CloudWatchLogsQueryStatus[\"Scheduled\"] = \"Scheduled\";\n  CloudWatchLogsQueryStatus[\"Running\"] = \"Running\";\n  CloudWatchLogsQueryStatus[\"Complete\"] = \"Complete\";\n  CloudWatchLogsQueryStatus[\"Failed\"] = \"Failed\";\n  CloudWatchLogsQueryStatus[\"Cancelled\"] = \"Cancelled\";\n  CloudWatchLogsQueryStatus[\"Timeout\"] = \"Timeout\";\n})(CloudWatchLogsQueryStatus || (CloudWatchLogsQueryStatus = {}));\n\nexport let VariableQueryType;\n\n(function (VariableQueryType) {\n  VariableQueryType[\"Regions\"] = \"regions\";\n  VariableQueryType[\"Namespaces\"] = \"namespaces\";\n  VariableQueryType[\"Metrics\"] = \"metrics\";\n  VariableQueryType[\"DimensionKeys\"] = \"dimensionKeys\";\n  VariableQueryType[\"DimensionValues\"] = \"dimensionValues\";\n  VariableQueryType[\"EBSVolumeIDs\"] = \"ebsVolumeIDs\";\n  VariableQueryType[\"EC2InstanceAttributes\"] = \"ec2InstanceAttributes\";\n  VariableQueryType[\"ResourceArns\"] = \"resourceARNs\";\n  VariableQueryType[\"Statistics\"] = \"statistics\";\n  VariableQueryType[\"LogGroups\"] = \"logGroups\";\n})(VariableQueryType || (VariableQueryType = {}));","map":{"version":3,"names":["MetricQueryType","MetricEditorMode","CloudWatchLogsQueryStatus","VariableQueryType"],"sources":["/home/soula/grafana/public/app/plugins/datasource/cloudwatch/types.ts"],"sourcesContent":["import { AwsAuthDataSourceJsonData, AwsAuthDataSourceSecureJsonData } from '@grafana/aws-sdk';\nimport { DataQuery, DataSourceRef, SelectableValue } from '@grafana/data';\n\nimport {\n  QueryEditorArrayExpression,\n  QueryEditorFunctionExpression,\n  QueryEditorPropertyExpression,\n} from './expressions';\n\nexport interface Dimensions {\n  [key: string]: string | string[];\n}\n\nexport interface MultiFilters {\n  [key: string]: string[];\n}\n\nexport type CloudWatchQueryMode = 'Metrics' | 'Logs' | 'Annotations';\n\nexport enum MetricQueryType {\n  'Search',\n  'Query',\n}\n\nexport enum MetricEditorMode {\n  'Builder',\n  'Code',\n}\n\nexport type Direction = 'ASC' | 'DESC';\n\nexport interface SQLExpression {\n  select?: QueryEditorFunctionExpression;\n  from?: QueryEditorPropertyExpression | QueryEditorFunctionExpression;\n  where?: QueryEditorArrayExpression;\n  groupBy?: QueryEditorArrayExpression;\n  orderBy?: QueryEditorFunctionExpression;\n  orderByDirection?: string;\n  limit?: number;\n}\n\nexport interface CloudWatchMetricsQuery extends MetricStat, DataQuery {\n  queryMode?: 'Metrics';\n  metricQueryType?: MetricQueryType;\n  metricEditorMode?: MetricEditorMode;\n\n  //common props\n  id: string;\n\n  alias?: string;\n  label?: string;\n\n  // Math expression query\n  expression?: string;\n\n  sqlExpression?: string;\n  sql?: SQLExpression;\n}\n\nexport interface MetricStat {\n  region: string;\n  namespace: string;\n  metricName?: string;\n  dimensions?: Dimensions;\n  matchExact?: boolean;\n  period?: string;\n  statistic?: string;\n  /**\n   * @deprecated use statistic\n   */\n  statistics?: string[];\n}\n\nexport interface CloudWatchMathExpressionQuery extends DataQuery {\n  expression: string;\n}\n\nexport type LogAction =\n  | 'DescribeLogGroups'\n  | 'GetQueryResults'\n  | 'GetLogGroupFields'\n  | 'GetLogEvents'\n  | 'StartQuery'\n  | 'StopQuery';\n\nexport enum CloudWatchLogsQueryStatus {\n  Scheduled = 'Scheduled',\n  Running = 'Running',\n  Complete = 'Complete',\n  Failed = 'Failed',\n  Cancelled = 'Cancelled',\n  Timeout = 'Timeout',\n}\n\nexport interface CloudWatchLogsQuery extends DataQuery {\n  queryMode: 'Logs';\n  id: string;\n  region: string;\n  expression?: string;\n  logGroupNames?: string[];\n  statsGroups?: string[];\n}\n\nexport type CloudWatchQuery = CloudWatchMetricsQuery | CloudWatchLogsQuery | CloudWatchAnnotationQuery;\n\nexport interface CloudWatchAnnotationQuery extends MetricStat, DataQuery {\n  queryMode: 'Annotations';\n  prefixMatching?: boolean;\n  actionPrefix?: string;\n  alarmNamePrefix?: string;\n}\n\nexport type SelectableStrings = Array<SelectableValue<string>>;\n\nexport interface CloudWatchJsonData extends AwsAuthDataSourceJsonData {\n  timeField?: string;\n  database?: string;\n  customMetricsNamespaces?: string;\n  endpoint?: string;\n  // Time string like 15s, 10m etc, see rangeUtils.intervalToMs.\n  logsTimeout?: string;\n  // Used to create links if logs contain traceId.\n  tracingDatasourceUid?: string;\n}\n\nexport interface CloudWatchSecureJsonData extends AwsAuthDataSourceSecureJsonData {\n  accessKey?: string;\n  secretKey?: string;\n}\n\nexport interface GetQueryResultsRequest {\n  /**\n   * The ID number of the query.\n   */\n  queryId: string;\n}\n\nexport interface ResultField {\n  /**\n   * The log event field.\n   */\n  field?: string;\n  /**\n   * The value of this field.\n   */\n  value?: string;\n}\n\nexport interface QueryStatistics {\n  /**\n   * The number of log events that matched the query string.\n   */\n  recordsMatched?: number;\n  /**\n   * The total number of log events scanned during the query.\n   */\n  recordsScanned?: number;\n  /**\n   * The total number of bytes in the log events scanned during the query.\n   */\n  bytesScanned?: number;\n}\n\nexport type QueryStatus = 'Scheduled' | 'Running' | 'Complete' | 'Failed' | 'Cancelled' | string;\n\nexport type CloudWatchLogsRequest =\n  | GetLogEventsRequest\n  | StartQueryRequest\n  | DescribeLogGroupsRequest\n  | GetLogGroupFieldsRequest;\n\nexport interface GetLogEventsRequest {\n  /**\n   * The name of the log group.\n   */\n  logGroupName: string;\n  /**\n   * The name of the log stream.\n   */\n  logStreamName: string;\n  /**\n   * The start of the time range, expressed as the number of milliseconds after Jan 1, 1970 00:00:00 UTC. Events with a timestamp equal to this time or later than this time are included. Events with a timestamp earlier than this time are not included.\n   */\n  startTime?: number;\n  /**\n   * The end of the time range, expressed as the number of milliseconds after Jan 1, 1970 00:00:00 UTC. Events with a timestamp equal to or later than this time are not included.\n   */\n  endTime?: number;\n  /**\n   * The token for the next set of items to return. (You received this token from a previous call.) Using this token works only when you specify true for startFromHead.\n   */\n  nextToken?: string;\n  /**\n   * The maximum number of log events returned. If you don't specify a value, the maximum is as many log events as can fit in a response size of 1 MB, up to 10,000 log events.\n   */\n  limit?: number;\n  /**\n   * If the value is true, the earliest log events are returned first. If the value is false, the latest log events are returned first. The default value is false. If you are using nextToken in this operation, you must specify true for startFromHead.\n   */\n  startFromHead?: boolean;\n}\n\nexport interface GetQueryResultsResponse {\n  /**\n   * The log events that matched the query criteria during the most recent time it ran. The results value is an array of arrays. Each log event is one object in the top-level array. Each of these log event objects is an array of field/value pairs.\n   */\n  results?: ResultField[][];\n  /**\n   * Includes the number of log events scanned by the query, the number of log events that matched the query criteria, and the total number of bytes in the log events that were scanned.\n   */\n  statistics?: QueryStatistics;\n  /**\n   * The status of the most recent running of the query. Possible values are Cancelled, Complete, Failed, Running, Scheduled, Timeout, and Unknown. Queries time out after 15 minutes of execution. To avoid having your queries time out, reduce the time range being searched, or partition your query into a number of queries.\n   */\n  status?: QueryStatus;\n}\n\nexport interface DescribeLogGroupsRequest {\n  /**\n   * The prefix to match.\n   */\n  logGroupNamePrefix?: string;\n  /**\n   * The token for the next set of items to return. (You received this token from a previous call.)\n   */\n  nextToken?: string;\n  /**\n   * The maximum number of items returned. If you don't specify a value, the default is up to 50 items.\n   */\n  limit?: number;\n  refId?: string;\n  region: string;\n}\n\nexport interface TSDBResponse<T = any> {\n  results: Record<string, TSDBQueryResult<T>>;\n  message?: string;\n}\n\nexport interface TSDBQueryResult<T = any> {\n  refId: string;\n  series: TSDBTimeSeries[];\n  tables: Array<TSDBTable<T>>;\n\n  error?: string;\n  meta?: any;\n}\n\nexport interface TSDBTable<T = any> {\n  columns: Array<{ text: string }>;\n  rows: T[];\n}\n\nexport interface TSDBTimeSeries {\n  name: string;\n  points: TSDBTimePoint[];\n  tags?: Record<string, string>;\n}\nexport type TSDBTimePoint = [number, number];\n\nexport interface LogGroup {\n  /**\n   * The name of the log group.\n   */\n  logGroupName?: string;\n  /**\n   * The creation time of the log group, expressed as the number of milliseconds after Jan 1, 1970 00:00:00 UTC.\n   */\n  creationTime?: number;\n  retentionInDays?: number;\n  /**\n   * The number of metric filters.\n   */\n  metricFilterCount?: number;\n  /**\n   * The Amazon Resource Name (ARN) of the log group.\n   */\n  arn?: string;\n  /**\n   * The number of bytes stored.\n   */\n  storedBytes?: number;\n  /**\n   * The Amazon Resource Name (ARN) of the CMK to use when encrypting log data.\n   */\n  kmsKeyId?: string;\n}\n\nexport interface DescribeLogGroupsResponse {\n  /**\n   * The log groups.\n   */\n  logGroups?: LogGroup[];\n  nextToken?: string;\n}\n\nexport interface GetLogGroupFieldsRequest {\n  /**\n   * The name of the log group to search.\n   */\n  logGroupName: string;\n  /**\n   * The time to set as the center of the query. If you specify time, the 8 minutes before and 8 minutes after this time are searched. If you omit time, the past 15 minutes are queried. The time value is specified as epoch time, the number of seconds since January 1, 1970, 00:00:00 UTC.\n   */\n  time?: number;\n  region: string;\n}\n\nexport interface LogGroupField {\n  /**\n   * The name of a log field.\n   */\n  name?: string;\n  /**\n   * The percentage of log events queried that contained the field.\n   */\n  percent?: number;\n}\n\nexport interface GetLogGroupFieldsResponse {\n  /**\n   * The array of fields found in the query. Each object in the array contains the name of the field, along with the percentage of time it appeared in the log events that were queried.\n   */\n  logGroupFields?: LogGroupField[];\n}\n\nexport interface StartQueryRequest {\n  /**\n   * The log group on which to perform the query. A StartQuery operation must include a logGroupNames or a logGroupName parameter, but not both.\n   */\n  logGroupName?: string;\n  /**\n   * The list of log groups to be queried. You can include up to 20 log groups. A StartQuery operation must include a logGroupNames or a logGroupName parameter, but not both.\n   */\n  logGroupNames?: string[];\n  /**\n   * The query string to use. For more information, see CloudWatch Logs Insights Query Syntax.\n   */\n  queryString: string;\n  /**\n   * The maximum number of log events to return in the query. If the query string uses the fields command, only the specified fields and their values are returned. The default is 1000.\n   */\n  limit?: number;\n  refId: string;\n  region: string;\n}\nexport interface StartQueryResponse {\n  /**\n   * The unique ID of the query.\n   */\n  queryId?: string;\n}\n\nexport interface MetricRequest {\n  from: string;\n  to: string;\n  queries: MetricQuery[];\n  debug?: boolean;\n}\n\nexport interface MetricQuery {\n  [key: string]: any;\n  datasource?: DataSourceRef;\n  refId?: string;\n  maxDataPoints?: number;\n  intervalMs?: number;\n}\n\nexport enum VariableQueryType {\n  Regions = 'regions',\n  Namespaces = 'namespaces',\n  Metrics = 'metrics',\n  DimensionKeys = 'dimensionKeys',\n  DimensionValues = 'dimensionValues',\n  EBSVolumeIDs = 'ebsVolumeIDs',\n  EC2InstanceAttributes = 'ec2InstanceAttributes',\n  ResourceArns = 'resourceARNs',\n  Statistics = 'statistics',\n  LogGroups = 'logGroups',\n}\n\nexport interface OldVariableQuery extends DataQuery {\n  queryType: VariableQueryType;\n  namespace: string;\n  region: string;\n  metricName: string;\n  dimensionKey: string;\n  dimensionFilters: string;\n  ec2Filters: string;\n  instanceID: string;\n  attributeName: string;\n  resourceType: string;\n  tags: string;\n}\n\nexport interface VariableQuery extends DataQuery {\n  queryType: VariableQueryType;\n  namespace: string;\n  region: string;\n  metricName: string;\n  dimensionKey: string;\n  dimensionFilters?: Dimensions;\n  ec2Filters?: MultiFilters;\n  instanceID: string;\n  attributeName: string;\n  resourceType: string;\n  tags?: MultiFilters;\n  logGroupPrefix?: string;\n}\n\nexport interface LegacyAnnotationQuery extends MetricStat, DataQuery {\n  actionPrefix: string;\n  alarmNamePrefix: string;\n  alias: string;\n  builtIn: number;\n  datasource: any;\n  dimensions: Dimensions;\n  enable: boolean;\n  expression: string;\n  hide: boolean;\n  iconColor: string;\n  id: string;\n  matchExact: boolean;\n  metricName: string;\n  name: string;\n  namespace: string;\n  period: string;\n  prefixMatching: boolean;\n  region: string;\n  statistic: string;\n  statistics: string[];\n  target: {\n    limit: number;\n    matchAny: boolean;\n    tags: any[];\n    type: string;\n  };\n  type: string;\n}\n"],"mappings":"AAmBA,WAAYA,eAAZ;;WAAYA,e;EAAAA,e,CAAAA,e;EAAAA,e,CAAAA,e;GAAAA,e,KAAAA,e;;AAKZ,WAAYC,gBAAZ;;WAAYA,gB;EAAAA,gB,CAAAA,gB;EAAAA,gB,CAAAA,gB;GAAAA,gB,KAAAA,gB;;AA6DZ,WAAYC,yBAAZ;;WAAYA,yB;EAAAA,yB;EAAAA,yB;EAAAA,yB;EAAAA,yB;EAAAA,yB;EAAAA,yB;GAAAA,yB,KAAAA,yB;;AA2RZ,WAAYC,iBAAZ;;WAAYA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;EAAAA,iB;GAAAA,iB,KAAAA,iB"},"metadata":{},"sourceType":"module"}