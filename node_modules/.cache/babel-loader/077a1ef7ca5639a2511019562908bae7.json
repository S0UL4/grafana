{"ast":null,"code":"import { css } from '@emotion/css';\nimport classNames from 'classnames';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport Scrollbars from 'react-custom-scrollbars-2';\nimport { useStyles2 } from '../../themes';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\n/**\n * Wraps component into <Scrollbars> component from `react-custom-scrollbars`\n */\nexport const CustomScrollbar = ({\n  autoHide = false,\n  autoHideTimeout = 200,\n  setScrollTop,\n  className,\n  testId,\n  autoHeightMin = '0',\n  autoHeightMax = '100%',\n  hideTracksWhenNotNeeded = false,\n  hideHorizontalTrack,\n  hideVerticalTrack,\n  scrollRefCallback,\n  updateAfterMountMs,\n  scrollTop,\n  children\n}) => {\n  const ref = useRef(null);\n  const styles = useStyles2(getStyles);\n  useEffect(() => {\n    if (ref.current && scrollRefCallback) {\n      scrollRefCallback(ref.current.view);\n    }\n  }, [ref, scrollRefCallback]);\n  useEffect(() => {\n    if (ref.current && scrollTop != null) {\n      ref.current.scrollTop(scrollTop);\n    }\n  }, [scrollTop]);\n  /**\n   * Special logic for doing a update a few milliseconds after mount to check for\n   * updated height due to dynamic content\n   */\n\n  useEffect(() => {\n    if (!updateAfterMountMs) {\n      return;\n    }\n\n    setTimeout(() => {\n      const scrollbar = ref.current;\n\n      if (scrollbar !== null && scrollbar !== void 0 && scrollbar.update) {\n        scrollbar.update();\n      }\n    }, updateAfterMountMs);\n  }, [updateAfterMountMs]);\n\n  function renderTrack(className, hideTrack, passedProps) {\n    if (passedProps.style && hideTrack) {\n      passedProps.style.display = 'none';\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", Object.assign({}, passedProps, {\n      className: className\n    }));\n  }\n\n  const renderTrackHorizontal = useCallback(passedProps => {\n    return renderTrack('track-horizontal', hideHorizontalTrack, passedProps);\n  }, [hideHorizontalTrack]);\n  const renderTrackVertical = useCallback(passedProps => {\n    return renderTrack('track-vertical', hideVerticalTrack, passedProps);\n  }, [hideVerticalTrack]);\n  const renderThumbHorizontal = useCallback(passedProps => {\n    return /*#__PURE__*/_jsx(\"div\", Object.assign({}, passedProps, {\n      className: \"thumb-horizontal\"\n    }));\n  }, []);\n  const renderThumbVertical = useCallback(passedProps => {\n    return /*#__PURE__*/_jsx(\"div\", Object.assign({}, passedProps, {\n      className: \"thumb-vertical\"\n    }));\n  }, []);\n  const renderView = useCallback(passedProps => {\n    return /*#__PURE__*/_jsx(\"div\", Object.assign({}, passedProps, {\n      className: \"scrollbar-view\"\n    }));\n  }, []);\n  const onScrollStop = useCallback(() => {\n    ref.current && setScrollTop && setScrollTop(ref.current.getValues());\n  }, [setScrollTop]);\n  return /*#__PURE__*/_jsx(Scrollbars, {\n    \"data-testid\": testId,\n    ref: ref,\n    className: classNames(styles.customScrollbar, className),\n    onScrollStop: onScrollStop,\n    autoHeight: true,\n    autoHide: autoHide,\n    autoHideTimeout: autoHideTimeout,\n    hideTracksWhenNotNeeded: hideTracksWhenNotNeeded // These autoHeightMin & autoHeightMax options affect firefox and chrome differently.\n    // Before these where set to inherit but that caused problems with cut of legends in firefox\n    ,\n    autoHeightMax: autoHeightMax,\n    autoHeightMin: autoHeightMin,\n    renderTrackHorizontal: renderTrackHorizontal,\n    renderTrackVertical: renderTrackVertical,\n    renderThumbHorizontal: renderThumbHorizontal,\n    renderThumbVertical: renderThumbVertical,\n    renderView: renderView,\n    children: children\n  });\n};\nexport default CustomScrollbar;\n\nconst getStyles = theme => {\n  return {\n    customScrollbar: css`\n      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to\n      // make scroll working it should fit outer container size (scroll appears only when inner container size is\n      // greater than outer one).\n      display: flex;\n      flex-grow: 1;\n      .scrollbar-view {\n        display: flex;\n        flex-grow: 1;\n        flex-direction: column;\n      }\n      .track-vertical {\n        border-radius: ${theme.shape.borderRadius(2)};\n        width: ${theme.spacing(1)} !important;\n        right: 0px;\n        bottom: ${theme.spacing(0.25)};\n        top: ${theme.spacing(0.25)};\n      }\n      .track-horizontal {\n        border-radius: ${theme.shape.borderRadius(2)};\n        height: ${theme.spacing(1)} !important;\n        right: ${theme.spacing(0.25)};\n        bottom: ${theme.spacing(0.25)};\n        left: ${theme.spacing(0.25)};\n      }\n      .thumb-vertical {\n        background: ${theme.colors.action.focus};\n        border-radius: ${theme.shape.borderRadius(2)};\n        opacity: 0;\n      }\n      .thumb-horizontal {\n        background: ${theme.colors.action.focus};\n        border-radius: ${theme.shape.borderRadius(2)};\n        opacity: 0;\n      }\n      &:hover {\n        .thumb-vertical,\n        .thumb-horizontal {\n          opacity: 1;\n          transition: opacity 0.3s ease-in-out;\n        }\n      }\n    `\n  };\n};","map":{"version":3,"names":["css","classNames","React","useCallback","useEffect","useRef","Scrollbars","useStyles2","CustomScrollbar","autoHide","autoHideTimeout","setScrollTop","className","testId","autoHeightMin","autoHeightMax","hideTracksWhenNotNeeded","hideHorizontalTrack","hideVerticalTrack","scrollRefCallback","updateAfterMountMs","scrollTop","children","ref","styles","getStyles","current","view","setTimeout","scrollbar","update","renderTrack","hideTrack","passedProps","style","display","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","renderView","onScrollStop","getValues","customScrollbar","theme","shape","borderRadius","spacing","colors","action","focus"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport classNames from 'classnames';\nimport React, { FC, RefCallback, useCallback, useEffect, useRef } from 'react';\nimport Scrollbars, { positionValues } from 'react-custom-scrollbars-2';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes';\n\nexport type ScrollbarPosition = positionValues;\n\ninterface Props {\n  className?: string;\n  testId?: string;\n  autoHide?: boolean;\n  autoHideTimeout?: number;\n  autoHeightMax?: string;\n  hideTracksWhenNotNeeded?: boolean;\n  hideHorizontalTrack?: boolean;\n  hideVerticalTrack?: boolean;\n  scrollRefCallback?: RefCallback<HTMLDivElement>;\n  scrollTop?: number;\n  setScrollTop?: (position: ScrollbarPosition) => void;\n  autoHeightMin?: number | string;\n  updateAfterMountMs?: number;\n}\n\n/**\n * Wraps component into <Scrollbars> component from `react-custom-scrollbars`\n */\nexport const CustomScrollbar: FC<Props> = ({\n  autoHide = false,\n  autoHideTimeout = 200,\n  setScrollTop,\n  className,\n  testId,\n  autoHeightMin = '0',\n  autoHeightMax = '100%',\n  hideTracksWhenNotNeeded = false,\n  hideHorizontalTrack,\n  hideVerticalTrack,\n  scrollRefCallback,\n  updateAfterMountMs,\n  scrollTop,\n  children,\n}) => {\n  const ref = useRef<Scrollbars & { view: HTMLDivElement }>(null);\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    if (ref.current && scrollRefCallback) {\n      scrollRefCallback(ref.current.view);\n    }\n  }, [ref, scrollRefCallback]);\n\n  useEffect(() => {\n    if (ref.current && scrollTop != null) {\n      ref.current.scrollTop(scrollTop);\n    }\n  }, [scrollTop]);\n\n  /**\n   * Special logic for doing a update a few milliseconds after mount to check for\n   * updated height due to dynamic content\n   */\n  useEffect(() => {\n    if (!updateAfterMountMs) {\n      return;\n    }\n    setTimeout(() => {\n      const scrollbar = ref.current as any;\n      if (scrollbar?.update) {\n        scrollbar.update();\n      }\n    }, updateAfterMountMs);\n  }, [updateAfterMountMs]);\n\n  function renderTrack(className: string, hideTrack: boolean | undefined, passedProps: any) {\n    if (passedProps.style && hideTrack) {\n      passedProps.style.display = 'none';\n    }\n\n    return <div {...passedProps} className={className} />;\n  }\n\n  const renderTrackHorizontal = useCallback(\n    (passedProps: any) => {\n      return renderTrack('track-horizontal', hideHorizontalTrack, passedProps);\n    },\n    [hideHorizontalTrack]\n  );\n\n  const renderTrackVertical = useCallback(\n    (passedProps: any) => {\n      return renderTrack('track-vertical', hideVerticalTrack, passedProps);\n    },\n    [hideVerticalTrack]\n  );\n\n  const renderThumbHorizontal = useCallback((passedProps: any) => {\n    return <div {...passedProps} className=\"thumb-horizontal\" />;\n  }, []);\n\n  const renderThumbVertical = useCallback((passedProps: any) => {\n    return <div {...passedProps} className=\"thumb-vertical\" />;\n  }, []);\n\n  const renderView = useCallback((passedProps: any) => {\n    return <div {...passedProps} className=\"scrollbar-view\" />;\n  }, []);\n\n  const onScrollStop = useCallback(() => {\n    ref.current && setScrollTop && setScrollTop(ref.current.getValues());\n  }, [setScrollTop]);\n\n  return (\n    <Scrollbars\n      data-testid={testId}\n      ref={ref}\n      className={classNames(styles.customScrollbar, className)}\n      onScrollStop={onScrollStop}\n      autoHeight={true}\n      autoHide={autoHide}\n      autoHideTimeout={autoHideTimeout}\n      hideTracksWhenNotNeeded={hideTracksWhenNotNeeded}\n      // These autoHeightMin & autoHeightMax options affect firefox and chrome differently.\n      // Before these where set to inherit but that caused problems with cut of legends in firefox\n      autoHeightMax={autoHeightMax}\n      autoHeightMin={autoHeightMin}\n      renderTrackHorizontal={renderTrackHorizontal}\n      renderTrackVertical={renderTrackVertical}\n      renderThumbHorizontal={renderThumbHorizontal}\n      renderThumbVertical={renderThumbVertical}\n      renderView={renderView}\n    >\n      {children}\n    </Scrollbars>\n  );\n};\n\nexport default CustomScrollbar;\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    customScrollbar: css`\n      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to\n      // make scroll working it should fit outer container size (scroll appears only when inner container size is\n      // greater than outer one).\n      display: flex;\n      flex-grow: 1;\n      .scrollbar-view {\n        display: flex;\n        flex-grow: 1;\n        flex-direction: column;\n      }\n      .track-vertical {\n        border-radius: ${theme.shape.borderRadius(2)};\n        width: ${theme.spacing(1)} !important;\n        right: 0px;\n        bottom: ${theme.spacing(0.25)};\n        top: ${theme.spacing(0.25)};\n      }\n      .track-horizontal {\n        border-radius: ${theme.shape.borderRadius(2)};\n        height: ${theme.spacing(1)} !important;\n        right: ${theme.spacing(0.25)};\n        bottom: ${theme.spacing(0.25)};\n        left: ${theme.spacing(0.25)};\n      }\n      .thumb-vertical {\n        background: ${theme.colors.action.focus};\n        border-radius: ${theme.shape.borderRadius(2)};\n        opacity: 0;\n      }\n      .thumb-horizontal {\n        background: ${theme.colors.action.focus};\n        border-radius: ${theme.shape.borderRadius(2)};\n        opacity: 0;\n      }\n      &:hover {\n        .thumb-vertical,\n        .thumb-horizontal {\n          opacity: 1;\n          transition: opacity 0.3s ease-in-out;\n        }\n      }\n    `,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}