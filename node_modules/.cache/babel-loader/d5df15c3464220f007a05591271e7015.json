{"ast":null,"code":"import { css } from '@emotion/css';\nimport React, { useReducer } from 'react';\nimport { HorizontalGroup, useStyles2, VerticalGroup, FilterInput } from '@grafana/ui';\nimport { FolderFilter } from '../../../../core/components/FolderFilter/FolderFilter';\nimport { PanelTypeFilter } from '../../../../core/components/PanelTypeFilter/PanelTypeFilter';\nimport { SortPicker } from '../../../../core/components/Select/SortPicker';\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../core/constants';\nimport { LibraryPanelsView } from '../LibraryPanelsView/LibraryPanelsView';\nimport { folderFilterChanged, initialLibraryPanelsSearchState, libraryPanelsSearchReducer, panelFilterChanged, searchChanged, sortChanged } from './reducer';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport let LibraryPanelsSearchVariant;\n\n(function (LibraryPanelsSearchVariant) {\n  LibraryPanelsSearchVariant[\"Tight\"] = \"tight\";\n  LibraryPanelsSearchVariant[\"Spacious\"] = \"spacious\";\n})(LibraryPanelsSearchVariant || (LibraryPanelsSearchVariant = {}));\n\nexport const LibraryPanelsSearch = ({\n  onClick,\n  variant = LibraryPanelsSearchVariant.Spacious,\n  currentPanelId,\n  currentFolderId,\n  perPage = DEFAULT_PER_PAGE_PAGINATION,\n  showPanelFilter = false,\n  showFolderFilter = false,\n  showSort = false,\n  showSecondaryActions = false\n}) => {\n  const styles = useStyles2(getStyles);\n  const [{\n    sortDirection,\n    panelFilter,\n    folderFilter,\n    searchQuery\n  }, dispatch] = useReducer(libraryPanelsSearchReducer, Object.assign({}, initialLibraryPanelsSearchState, {\n    folderFilter: currentFolderId ? [currentFolderId.toString(10)] : []\n  }));\n\n  const onFilterChange = searchString => dispatch(searchChanged(searchString));\n\n  const onSortChange = sorting => dispatch(sortChanged(sorting));\n\n  const onFolderFilterChange = folders => dispatch(folderFilterChanged(folders));\n\n  const onPanelFilterChange = plugins => dispatch(panelFilterChanged(plugins));\n\n  if (variant === LibraryPanelsSearchVariant.Spacious) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: styles.container,\n      children: /*#__PURE__*/_jsxs(VerticalGroup, {\n        spacing: \"lg\",\n        children: [/*#__PURE__*/_jsx(FilterInput, {\n          value: searchQuery,\n          onChange: onFilterChange,\n          placeholder: 'Search by name or description',\n          width: 0\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.buttonRow,\n          children: /*#__PURE__*/_jsxs(HorizontalGroup, {\n            spacing: \"sm\",\n            justify: showSort && showPanelFilter || showFolderFilter ? 'space-between' : 'flex-end',\n            children: [showSort && /*#__PURE__*/_jsx(SortPicker, {\n              value: sortDirection,\n              onChange: onSortChange,\n              filter: ['alpha-asc', 'alpha-desc']\n            }), /*#__PURE__*/_jsxs(HorizontalGroup, {\n              spacing: \"sm\",\n              justify: showFolderFilter && showPanelFilter ? 'space-between' : 'flex-end',\n              children: [showFolderFilter && /*#__PURE__*/_jsx(FolderFilter, {\n                onChange: onFolderFilterChange\n              }), showPanelFilter && /*#__PURE__*/_jsx(PanelTypeFilter, {\n                onChange: onPanelFilterChange\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.libraryPanelsView,\n          children: /*#__PURE__*/_jsx(LibraryPanelsView, {\n            onClickCard: onClick,\n            searchString: searchQuery,\n            sortDirection: sortDirection,\n            panelFilter: panelFilter,\n            folderFilter: folderFilter,\n            currentPanelId: currentPanelId,\n            showSecondaryActions: showSecondaryActions,\n            perPage: perPage\n          })\n        })]\n      })\n    });\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.container,\n    children: /*#__PURE__*/_jsxs(VerticalGroup, {\n      spacing: \"xs\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.tightButtonRow,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.tightFilter,\n          children: /*#__PURE__*/_jsx(FilterInput, {\n            value: searchQuery,\n            onChange: onFilterChange,\n            placeholder: 'Search by name',\n            width: 0\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.tightSortFilter,\n          children: [showSort && /*#__PURE__*/_jsx(SortPicker, {\n            value: sortDirection,\n            onChange: onSortChange\n          }), showFolderFilter && /*#__PURE__*/_jsx(FolderFilter, {\n            onChange: onFolderFilterChange,\n            maxMenuHeight: 200\n          }), showPanelFilter && /*#__PURE__*/_jsx(PanelTypeFilter, {\n            onChange: onPanelFilterChange,\n            maxMenuHeight: 200\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.libraryPanelsView,\n        children: /*#__PURE__*/_jsx(LibraryPanelsView, {\n          onClickCard: onClick,\n          searchString: searchQuery,\n          sortDirection: sortDirection,\n          panelFilter: panelFilter,\n          folderFilter: folderFilter,\n          currentPanelId: currentPanelId,\n          showSecondaryActions: showSecondaryActions,\n          perPage: perPage\n        })\n      })]\n    })\n  });\n};\n\nfunction getStyles(theme) {\n  return {\n    container: css`\n      width: 100%;\n      overflow-y: auto;\n      padding: ${theme.spacing(1)};\n    `,\n    buttonRow: css`\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      margin-top: ${theme.spacing(2)}; // Clear types link\n    `,\n    tightButtonRow: css`\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      margin-top: ${theme.spacing(4)}; // Clear types link\n    `,\n    tightFilter: css`\n      flex-grow: 1;\n    `,\n    tightSortFilter: css`\n      flex-grow: 1;\n      padding: ${theme.spacing(0, 0, 0, 0.5)};\n    `,\n    libraryPanelsView: css`\n      width: 100%;\n    `\n  };\n}","map":{"version":3,"names":["css","React","useReducer","HorizontalGroup","useStyles2","VerticalGroup","FilterInput","FolderFilter","PanelTypeFilter","SortPicker","DEFAULT_PER_PAGE_PAGINATION","LibraryPanelsView","folderFilterChanged","initialLibraryPanelsSearchState","libraryPanelsSearchReducer","panelFilterChanged","searchChanged","sortChanged","LibraryPanelsSearchVariant","LibraryPanelsSearch","onClick","variant","Spacious","currentPanelId","currentFolderId","perPage","showPanelFilter","showFolderFilter","showSort","showSecondaryActions","styles","getStyles","sortDirection","panelFilter","folderFilter","searchQuery","dispatch","toString","onFilterChange","searchString","onSortChange","sorting","onFolderFilterChange","folders","onPanelFilterChange","plugins","container","buttonRow","libraryPanelsView","tightButtonRow","tightFilter","tightSortFilter","theme","spacing"],"sources":["/home/soula/grafana/public/app/features/library-panels/components/LibraryPanelsSearch/LibraryPanelsSearch.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useReducer } from 'react';\n\nimport { GrafanaTheme2, PanelPluginMeta, SelectableValue } from '@grafana/data';\nimport { HorizontalGroup, useStyles2, VerticalGroup, FilterInput } from '@grafana/ui';\n\nimport { FolderFilter } from '../../../../core/components/FolderFilter/FolderFilter';\nimport { PanelTypeFilter } from '../../../../core/components/PanelTypeFilter/PanelTypeFilter';\nimport { SortPicker } from '../../../../core/components/Select/SortPicker';\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../core/constants';\nimport { FolderInfo } from '../../../../types';\nimport { LibraryElementDTO } from '../../types';\nimport { LibraryPanelsView } from '../LibraryPanelsView/LibraryPanelsView';\n\nimport {\n  folderFilterChanged,\n  initialLibraryPanelsSearchState,\n  libraryPanelsSearchReducer,\n  panelFilterChanged,\n  searchChanged,\n  sortChanged,\n} from './reducer';\n\nexport enum LibraryPanelsSearchVariant {\n  Tight = 'tight',\n  Spacious = 'spacious',\n}\n\nexport interface LibraryPanelsSearchProps {\n  onClick: (panel: LibraryElementDTO) => void;\n  variant?: LibraryPanelsSearchVariant;\n  showSort?: boolean;\n  showPanelFilter?: boolean;\n  showFolderFilter?: boolean;\n  showSecondaryActions?: boolean;\n  currentPanelId?: string;\n  currentFolderId?: number;\n  perPage?: number;\n}\n\nexport const LibraryPanelsSearch = ({\n  onClick,\n  variant = LibraryPanelsSearchVariant.Spacious,\n  currentPanelId,\n  currentFolderId,\n  perPage = DEFAULT_PER_PAGE_PAGINATION,\n  showPanelFilter = false,\n  showFolderFilter = false,\n  showSort = false,\n  showSecondaryActions = false,\n}: LibraryPanelsSearchProps): JSX.Element => {\n  const styles = useStyles2(getStyles);\n  const [{ sortDirection, panelFilter, folderFilter, searchQuery }, dispatch] = useReducer(libraryPanelsSearchReducer, {\n    ...initialLibraryPanelsSearchState,\n    folderFilter: currentFolderId ? [currentFolderId.toString(10)] : [],\n  });\n  const onFilterChange = (searchString: string) => dispatch(searchChanged(searchString));\n  const onSortChange = (sorting: SelectableValue<string>) => dispatch(sortChanged(sorting));\n  const onFolderFilterChange = (folders: FolderInfo[]) => dispatch(folderFilterChanged(folders));\n  const onPanelFilterChange = (plugins: PanelPluginMeta[]) => dispatch(panelFilterChanged(plugins));\n\n  if (variant === LibraryPanelsSearchVariant.Spacious) {\n    return (\n      <div className={styles.container}>\n        <VerticalGroup spacing=\"lg\">\n          <FilterInput\n            value={searchQuery}\n            onChange={onFilterChange}\n            placeholder={'Search by name or description'}\n            width={0}\n          />\n          <div className={styles.buttonRow}>\n            <HorizontalGroup\n              spacing=\"sm\"\n              justify={(showSort && showPanelFilter) || showFolderFilter ? 'space-between' : 'flex-end'}\n            >\n              {showSort && (\n                <SortPicker value={sortDirection} onChange={onSortChange} filter={['alpha-asc', 'alpha-desc']} />\n              )}\n              <HorizontalGroup\n                spacing=\"sm\"\n                justify={showFolderFilter && showPanelFilter ? 'space-between' : 'flex-end'}\n              >\n                {showFolderFilter && <FolderFilter onChange={onFolderFilterChange} />}\n                {showPanelFilter && <PanelTypeFilter onChange={onPanelFilterChange} />}\n              </HorizontalGroup>\n            </HorizontalGroup>\n          </div>\n          <div className={styles.libraryPanelsView}>\n            <LibraryPanelsView\n              onClickCard={onClick}\n              searchString={searchQuery}\n              sortDirection={sortDirection}\n              panelFilter={panelFilter}\n              folderFilter={folderFilter}\n              currentPanelId={currentPanelId}\n              showSecondaryActions={showSecondaryActions}\n              perPage={perPage}\n            />\n          </div>\n        </VerticalGroup>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <VerticalGroup spacing=\"xs\">\n        <div className={styles.tightButtonRow}>\n          <div className={styles.tightFilter}>\n            <FilterInput value={searchQuery} onChange={onFilterChange} placeholder={'Search by name'} width={0} />\n          </div>\n          <div className={styles.tightSortFilter}>\n            {showSort && <SortPicker value={sortDirection} onChange={onSortChange} />}\n            {showFolderFilter && <FolderFilter onChange={onFolderFilterChange} maxMenuHeight={200} />}\n            {showPanelFilter && <PanelTypeFilter onChange={onPanelFilterChange} maxMenuHeight={200} />}\n          </div>\n        </div>\n        <div className={styles.libraryPanelsView}>\n          <LibraryPanelsView\n            onClickCard={onClick}\n            searchString={searchQuery}\n            sortDirection={sortDirection}\n            panelFilter={panelFilter}\n            folderFilter={folderFilter}\n            currentPanelId={currentPanelId}\n            showSecondaryActions={showSecondaryActions}\n            perPage={perPage}\n          />\n        </div>\n      </VerticalGroup>\n    </div>\n  );\n};\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    container: css`\n      width: 100%;\n      overflow-y: auto;\n      padding: ${theme.spacing(1)};\n    `,\n    buttonRow: css`\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      margin-top: ${theme.spacing(2)}; // Clear types link\n    `,\n    tightButtonRow: css`\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      margin-top: ${theme.spacing(4)}; // Clear types link\n    `,\n    tightFilter: css`\n      flex-grow: 1;\n    `,\n    tightSortFilter: css`\n      flex-grow: 1;\n      padding: ${theme.spacing(0, 0, 0, 0.5)};\n    `,\n    libraryPanelsView: css`\n      width: 100%;\n    `,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}