{"ast":null,"code":"var _p;\n\nimport { css } from '@emotion/css';\nimport React from 'react';\nimport { PluginErrorCode, PluginSignatureStatus } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { HorizontalGroup, InfoBox, List, PluginSignatureBadge, useTheme } from '@grafana/ui';\nimport { useGetErrors, useFetchStatus } from '../admin/state/hooks';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function PluginsErrorsInfo() {\n  const errors = useGetErrors();\n  const {\n    isLoading\n  } = useFetchStatus();\n  const theme = useTheme();\n\n  if (isLoading || errors.length === 0) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(InfoBox, {\n    \"aria-label\": selectors.pages.PluginsList.signatureErrorNotice,\n    severity: \"warning\",\n    urlTitle: \"Read more about plugin signing\",\n    url: \"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/\",\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      children: [_p || (_p = /*#__PURE__*/_jsx(\"p\", {\n        children: \"Unsigned plugins were found during plugin initialization. Grafana Labs cannot guarantee the integrity of these plugins. We recommend only using signed plugins.\"\n      })), \"The following plugins are disabled and not shown in the list below:\", /*#__PURE__*/_jsx(List, {\n        items: errors,\n        className: css`\n            list-style-type: circle;\n          `,\n        renderItem: error => /*#__PURE__*/_jsx(\"div\", {\n          className: css`\n                margin-top: ${theme.spacing.sm};\n              `,\n          children: /*#__PURE__*/_jsxs(HorizontalGroup, {\n            spacing: \"sm\",\n            justify: \"flex-start\",\n            align: \"center\",\n            children: [/*#__PURE__*/_jsx(\"strong\", {\n              children: error.pluginId\n            }), /*#__PURE__*/_jsx(PluginSignatureBadge, {\n              status: mapPluginErrorCodeToSignatureStatus(error.errorCode),\n              className: css`\n                    margin-top: 0;\n                  `\n            })]\n          })\n        })\n      })]\n    })\n  });\n}\n\nfunction mapPluginErrorCodeToSignatureStatus(code) {\n  switch (code) {\n    case PluginErrorCode.invalidSignature:\n      return PluginSignatureStatus.invalid;\n\n    case PluginErrorCode.missingSignature:\n      return PluginSignatureStatus.missing;\n\n    case PluginErrorCode.modifiedSignature:\n      return PluginSignatureStatus.modified;\n\n    default:\n      return PluginSignatureStatus.missing;\n  }\n}","map":{"version":3,"names":["css","React","PluginErrorCode","PluginSignatureStatus","selectors","HorizontalGroup","InfoBox","List","PluginSignatureBadge","useTheme","useGetErrors","useFetchStatus","PluginsErrorsInfo","errors","isLoading","theme","length","pages","PluginsList","signatureErrorNotice","error","spacing","sm","pluginId","mapPluginErrorCodeToSignatureStatus","errorCode","code","invalidSignature","invalid","missingSignature","missing","modifiedSignature","modified"],"sources":["/home/soula/grafana/public/app/features/plugins/components/PluginsErrorsInfo.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { PluginErrorCode, PluginSignatureStatus } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { HorizontalGroup, InfoBox, List, PluginSignatureBadge, useTheme } from '@grafana/ui';\n\nimport { useGetErrors, useFetchStatus } from '../admin/state/hooks';\n\nexport function PluginsErrorsInfo(): React.ReactElement | null {\n  const errors = useGetErrors();\n  const { isLoading } = useFetchStatus();\n  const theme = useTheme();\n\n  if (isLoading || errors.length === 0) {\n    return null;\n  }\n\n  return (\n    <InfoBox\n      aria-label={selectors.pages.PluginsList.signatureErrorNotice}\n      severity=\"warning\"\n      urlTitle=\"Read more about plugin signing\"\n      url=\"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/\"\n    >\n      <div>\n        <p>\n          Unsigned plugins were found during plugin initialization. Grafana Labs cannot guarantee the integrity of these\n          plugins. We recommend only using signed plugins.\n        </p>\n        The following plugins are disabled and not shown in the list below:\n        <List\n          items={errors}\n          className={css`\n            list-style-type: circle;\n          `}\n          renderItem={(error) => (\n            <div\n              className={css`\n                margin-top: ${theme.spacing.sm};\n              `}\n            >\n              <HorizontalGroup spacing=\"sm\" justify=\"flex-start\" align=\"center\">\n                <strong>{error.pluginId}</strong>\n                <PluginSignatureBadge\n                  status={mapPluginErrorCodeToSignatureStatus(error.errorCode)}\n                  className={css`\n                    margin-top: 0;\n                  `}\n                />\n              </HorizontalGroup>\n            </div>\n          )}\n        />\n      </div>\n    </InfoBox>\n  );\n}\n\nfunction mapPluginErrorCodeToSignatureStatus(code: PluginErrorCode) {\n  switch (code) {\n    case PluginErrorCode.invalidSignature:\n      return PluginSignatureStatus.invalid;\n    case PluginErrorCode.missingSignature:\n      return PluginSignatureStatus.missing;\n    case PluginErrorCode.modifiedSignature:\n      return PluginSignatureStatus.modified;\n    default:\n      return PluginSignatureStatus.missing;\n  }\n}\n"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,cAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,eAAT,EAA0BC,qBAA1B,QAAuD,eAAvD;AACA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,eAAT,EAA0BC,OAA1B,EAAmCC,IAAnC,EAAyCC,oBAAzC,EAA+DC,QAA/D,QAA+E,aAA/E;AAEA,SAASC,YAAT,EAAuBC,cAAvB,QAA6C,sBAA7C;;;AAEA,OAAO,SAASC,iBAAT,GAAwD;EAC7D,MAAMC,MAAM,GAAGH,YAAY,EAA3B;EACA,MAAM;IAAEI;EAAF,IAAgBH,cAAc,EAApC;EACA,MAAMI,KAAK,GAAGN,QAAQ,EAAtB;;EAEA,IAAIK,SAAS,IAAID,MAAM,CAACG,MAAP,KAAkB,CAAnC,EAAsC;IACpC,OAAO,IAAP;EACD;;EAED,oBACE,KAAC,OAAD;IACE,cAAYZ,SAAS,CAACa,KAAV,CAAgBC,WAAhB,CAA4BC,oBAD1C;IAEE,QAAQ,EAAC,SAFX;IAGE,QAAQ,EAAC,gCAHX;IAIE,GAAG,EAAC,oEAJN;IAAA,uBAME;MAAA,oCACE;QAAA;MAAA,EADF,uFAME,KAAC,IAAD;QACE,KAAK,EAAEN,MADT;QAEE,SAAS,EAAEb,GAAI;AACzB;AACA,WAJQ;QAKE,UAAU,EAAGoB,KAAD,iBACV;UACE,SAAS,EAAEpB,GAAI;AAC7B,8BAA8Be,KAAK,CAACM,OAAN,CAAcC,EAAG;AAC/C,eAHY;UAAA,uBAKE,MAAC,eAAD;YAAiB,OAAO,EAAC,IAAzB;YAA8B,OAAO,EAAC,YAAtC;YAAmD,KAAK,EAAC,QAAzD;YAAA,wBACE;cAAA,UAASF,KAAK,CAACG;YAAf,EADF,eAEE,KAAC,oBAAD;cACE,MAAM,EAAEC,mCAAmC,CAACJ,KAAK,CAACK,SAAP,CAD7C;cAEE,SAAS,EAAEzB,GAAI;AACjC;AACA;YAJgB,EAFF;UAAA;QALF;MANJ,EANF;IAAA;EANF,EADF;AAuCD;;AAED,SAASwB,mCAAT,CAA6CE,IAA7C,EAAoE;EAClE,QAAQA,IAAR;IACE,KAAKxB,eAAe,CAACyB,gBAArB;MACE,OAAOxB,qBAAqB,CAACyB,OAA7B;;IACF,KAAK1B,eAAe,CAAC2B,gBAArB;MACE,OAAO1B,qBAAqB,CAAC2B,OAA7B;;IACF,KAAK5B,eAAe,CAAC6B,iBAArB;MACE,OAAO5B,qBAAqB,CAAC6B,QAA7B;;IACF;MACE,OAAO7B,qBAAqB,CAAC2B,OAA7B;EARJ;AAUD"},"metadata":{},"sourceType":"module"}