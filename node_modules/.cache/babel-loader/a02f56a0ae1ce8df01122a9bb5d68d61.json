{"ast":null,"code":"import { LoadingState } from '@grafana/data';\nexport function variableQueryObserver(resolve, reject, subscription) {\n  const observer = {\n    next: results => {\n      if (results.state === LoadingState.Error) {\n        subscription.unsubscribe();\n        reject(results.error);\n        return;\n      }\n\n      if (results.state === LoadingState.Done) {\n        subscription.unsubscribe();\n        resolve();\n        return;\n      }\n    },\n    error: err => {\n      subscription.unsubscribe();\n      reject(err);\n    },\n    complete: () => {\n      subscription.unsubscribe();\n      resolve();\n    }\n  };\n  return observer;\n}","map":{"version":3,"names":["LoadingState","variableQueryObserver","resolve","reject","subscription","observer","next","results","state","Error","unsubscribe","error","Done","err","complete"],"sources":["/home/soula/grafana/public/app/features/variables/query/variableQueryObserver.ts"],"sourcesContent":["import { Observer, Subscription } from 'rxjs';\n\nimport { LoadingState } from '@grafana/data';\n\nimport { UpdateOptionsResults } from './VariableQueryRunner';\n\nexport function variableQueryObserver(\n  resolve: (value?: any) => void,\n  reject: (value?: any) => void,\n  subscription: Subscription\n): Observer<UpdateOptionsResults> {\n  const observer: Observer<UpdateOptionsResults> = {\n    next: (results) => {\n      if (results.state === LoadingState.Error) {\n        subscription.unsubscribe();\n        reject(results.error);\n        return;\n      }\n\n      if (results.state === LoadingState.Done) {\n        subscription.unsubscribe();\n        resolve();\n        return;\n      }\n    },\n    error: (err) => {\n      subscription.unsubscribe();\n      reject(err);\n    },\n    complete: () => {\n      subscription.unsubscribe();\n      resolve();\n    },\n  };\n\n  return observer;\n}\n"],"mappings":"AAEA,SAASA,YAAT,QAA6B,eAA7B;AAIA,OAAO,SAASC,qBAAT,CACLC,OADK,EAELC,MAFK,EAGLC,YAHK,EAI2B;EAChC,MAAMC,QAAwC,GAAG;IAC/CC,IAAI,EAAGC,OAAD,IAAa;MACjB,IAAIA,OAAO,CAACC,KAAR,KAAkBR,YAAY,CAACS,KAAnC,EAA0C;QACxCL,YAAY,CAACM,WAAb;QACAP,MAAM,CAACI,OAAO,CAACI,KAAT,CAAN;QACA;MACD;;MAED,IAAIJ,OAAO,CAACC,KAAR,KAAkBR,YAAY,CAACY,IAAnC,EAAyC;QACvCR,YAAY,CAACM,WAAb;QACAR,OAAO;QACP;MACD;IACF,CAb8C;IAc/CS,KAAK,EAAGE,GAAD,IAAS;MACdT,YAAY,CAACM,WAAb;MACAP,MAAM,CAACU,GAAD,CAAN;IACD,CAjB8C;IAkB/CC,QAAQ,EAAE,MAAM;MACdV,YAAY,CAACM,WAAb;MACAR,OAAO;IACR;EArB8C,CAAjD;EAwBA,OAAOG,QAAP;AACD"},"metadata":{},"sourceType":"module"}