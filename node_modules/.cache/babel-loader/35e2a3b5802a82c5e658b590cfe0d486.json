{"ast":null,"code":"var _Alert;\n\nimport React from 'react';\nimport { SIGV4ConnectionConfig } from '@grafana/aws-sdk';\nimport { AlertingSettings, DataSourceHttpSettings, Alert } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { getAllAlertmanagerDataSources } from 'app/features/alerting/unified/utils/alertmanager';\nimport { AzureAuthSettings } from './AzureAuthSettings';\nimport { hasCredentials, setDefaultCredentials, resetCredentials } from './AzureCredentialsConfig';\nimport { PromSettings } from './PromSettings';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const ConfigEditor = props => {\n  const {\n    options,\n    onOptionsChange\n  } = props;\n  const alertmanagers = getAllAlertmanagerDataSources();\n  const azureAuthSettings = {\n    azureAuthSupported: !!config.featureToggles.prometheus_azure_auth,\n    getAzureAuthEnabled: config => hasCredentials(config),\n    setAzureAuthEnabled: (config, enabled) => enabled ? setDefaultCredentials(config) : resetCredentials(config),\n    azureSettingsUI: AzureAuthSettings\n  };\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [options.access === 'direct' && (_Alert || (_Alert = /*#__PURE__*/_jsx(Alert, {\n      title: \"Deprecation Notice\",\n      severity: \"warning\",\n      children: \"Browser access mode in the Prometheus datasource is deprecated and will be removed in a future release.\"\n    }))), /*#__PURE__*/_jsx(DataSourceHttpSettings, {\n      defaultUrl: \"http://localhost:9090\",\n      dataSourceConfig: options,\n      showAccessOptions: true,\n      onChange: onOptionsChange,\n      sigV4AuthToggleEnabled: config.sigV4AuthEnabled,\n      azureAuthSettings: azureAuthSettings,\n      renderSigV4Editor: /*#__PURE__*/_jsx(SIGV4ConnectionConfig, Object.assign({}, props))\n    }), /*#__PURE__*/_jsx(AlertingSettings, {\n      alertmanagerDataSources: alertmanagers,\n      options: options,\n      onOptionsChange: onOptionsChange\n    }), /*#__PURE__*/_jsx(PromSettings, {\n      options: options,\n      onOptionsChange: onOptionsChange\n    })]\n  });\n};","map":{"version":3,"names":["React","SIGV4ConnectionConfig","AlertingSettings","DataSourceHttpSettings","Alert","config","getAllAlertmanagerDataSources","AzureAuthSettings","hasCredentials","setDefaultCredentials","resetCredentials","PromSettings","ConfigEditor","props","options","onOptionsChange","alertmanagers","azureAuthSettings","azureAuthSupported","featureToggles","prometheus_azure_auth","getAzureAuthEnabled","setAzureAuthEnabled","enabled","azureSettingsUI","access","sigV4AuthEnabled"],"sources":["/home/soula/grafana/public/app/plugins/datasource/prometheus/configuration/ConfigEditor.tsx"],"sourcesContent":["import React from 'react';\n\nimport { SIGV4ConnectionConfig } from '@grafana/aws-sdk';\nimport { DataSourcePluginOptionsEditorProps, DataSourceSettings } from '@grafana/data';\nimport { AlertingSettings, DataSourceHttpSettings, Alert } from '@grafana/ui';\nimport { config } from 'app/core/config';\nimport { getAllAlertmanagerDataSources } from 'app/features/alerting/unified/utils/alertmanager';\n\nimport { PromOptions } from '../types';\n\nimport { AzureAuthSettings } from './AzureAuthSettings';\nimport { hasCredentials, setDefaultCredentials, resetCredentials } from './AzureCredentialsConfig';\nimport { PromSettings } from './PromSettings';\n\nexport type Props = DataSourcePluginOptionsEditorProps<PromOptions>;\nexport const ConfigEditor = (props: Props) => {\n  const { options, onOptionsChange } = props;\n  const alertmanagers = getAllAlertmanagerDataSources();\n\n  const azureAuthSettings = {\n    azureAuthSupported: !!config.featureToggles.prometheus_azure_auth,\n    getAzureAuthEnabled: (config: DataSourceSettings<any, any>): boolean => hasCredentials(config),\n    setAzureAuthEnabled: (config: DataSourceSettings<any, any>, enabled: boolean) =>\n      enabled ? setDefaultCredentials(config) : resetCredentials(config),\n    azureSettingsUI: AzureAuthSettings,\n  };\n\n  return (\n    <>\n      {options.access === 'direct' && (\n        <Alert title=\"Deprecation Notice\" severity=\"warning\">\n          Browser access mode in the Prometheus datasource is deprecated and will be removed in a future release.\n        </Alert>\n      )}\n\n      <DataSourceHttpSettings\n        defaultUrl=\"http://localhost:9090\"\n        dataSourceConfig={options}\n        showAccessOptions={true}\n        onChange={onOptionsChange}\n        sigV4AuthToggleEnabled={config.sigV4AuthEnabled}\n        azureAuthSettings={azureAuthSettings}\n        renderSigV4Editor={<SIGV4ConnectionConfig {...props}></SIGV4ConnectionConfig>}\n      />\n\n      <AlertingSettings<PromOptions>\n        alertmanagerDataSources={alertmanagers}\n        options={options}\n        onOptionsChange={onOptionsChange}\n      />\n\n      <PromSettings options={options} onOptionsChange={onOptionsChange} />\n    </>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,qBAAT,QAAsC,kBAAtC;AAEA,SAASC,gBAAT,EAA2BC,sBAA3B,EAAmDC,KAAnD,QAAgE,aAAhE;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,SAASC,6BAAT,QAA8C,kDAA9C;AAIA,SAASC,iBAAT,QAAkC,qBAAlC;AACA,SAASC,cAAT,EAAyBC,qBAAzB,EAAgDC,gBAAhD,QAAwE,0BAAxE;AACA,SAASC,YAAT,QAA6B,gBAA7B;;;;AAGA,OAAO,MAAMC,YAAY,GAAIC,KAAD,IAAkB;EAC5C,MAAM;IAAEC,OAAF;IAAWC;EAAX,IAA+BF,KAArC;EACA,MAAMG,aAAa,GAAGV,6BAA6B,EAAnD;EAEA,MAAMW,iBAAiB,GAAG;IACxBC,kBAAkB,EAAE,CAAC,CAACb,MAAM,CAACc,cAAP,CAAsBC,qBADpB;IAExBC,mBAAmB,EAAGhB,MAAD,IAAmDG,cAAc,CAACH,MAAD,CAF9D;IAGxBiB,mBAAmB,EAAE,CAACjB,MAAD,EAAuCkB,OAAvC,KACnBA,OAAO,GAAGd,qBAAqB,CAACJ,MAAD,CAAxB,GAAmCK,gBAAgB,CAACL,MAAD,CAJpC;IAKxBmB,eAAe,EAAEjB;EALO,CAA1B;EAQA,oBACE;IAAA,WACGO,OAAO,CAACW,MAAR,KAAmB,QAAnB,sCACC,KAAC,KAAD;MAAO,KAAK,EAAC,oBAAb;MAAkC,QAAQ,EAAC,SAA3C;MAAA;IAAA,EADD,EADH,eAOE,KAAC,sBAAD;MACE,UAAU,EAAC,uBADb;MAEE,gBAAgB,EAAEX,OAFpB;MAGE,iBAAiB,EAAE,IAHrB;MAIE,QAAQ,EAAEC,eAJZ;MAKE,sBAAsB,EAAEV,MAAM,CAACqB,gBALjC;MAME,iBAAiB,EAAET,iBANrB;MAOE,iBAAiB,eAAE,KAAC,qBAAD,oBAA2BJ,KAA3B;IAPrB,EAPF,eAiBE,KAAC,gBAAD;MACE,uBAAuB,EAAEG,aAD3B;MAEE,OAAO,EAAEF,OAFX;MAGE,eAAe,EAAEC;IAHnB,EAjBF,eAuBE,KAAC,YAAD;MAAc,OAAO,EAAED,OAAvB;MAAgC,eAAe,EAAEC;IAAjD,EAvBF;EAAA,EADF;AA2BD,CAvCM"},"metadata":{},"sourceType":"module"}