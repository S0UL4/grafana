{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent, createRef } from 'react';\nimport { JsonExplorer } from './json_explorer/json_explorer'; // We have made some monkey-patching of json-formatter-js so we can't switch right now\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport class JSONFormatter extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"wrapperRef\", /*#__PURE__*/createRef());\n\n    _defineProperty(this, \"renderJson\", () => {\n      const {\n        json,\n        config,\n        open,\n        onDidRender\n      } = this.props;\n      const wrapperEl = this.wrapperRef.current;\n      const formatter = new JsonExplorer(json, open, config); // @ts-ignore\n\n      const hasChildren = wrapperEl.hasChildNodes();\n\n      if (hasChildren) {\n        // @ts-ignore\n        wrapperEl.replaceChild(formatter.render(), wrapperEl.lastChild);\n      } else {\n        // @ts-ignore\n        wrapperEl.appendChild(formatter.render());\n      }\n\n      if (onDidRender) {\n        onDidRender(formatter.json);\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.renderJson();\n  }\n\n  componentDidUpdate() {\n    this.renderJson();\n  }\n\n  render() {\n    const {\n      className\n    } = this.props;\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: className,\n      ref: this.wrapperRef\n    });\n  }\n\n}\n\n_defineProperty(JSONFormatter, \"defaultProps\", {\n  open: 3,\n  config: {\n    animateOpen: true\n  }\n});","map":{"version":3,"names":["React","PureComponent","createRef","JsonExplorer","JSONFormatter","json","config","open","onDidRender","props","wrapperEl","wrapperRef","current","formatter","hasChildren","hasChildNodes","replaceChild","render","lastChild","appendChild","componentDidMount","renderJson","componentDidUpdate","className","animateOpen"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/JSONFormatter/JSONFormatter.tsx"],"sourcesContent":["import React, { PureComponent, createRef } from 'react';\n\nimport { JsonExplorer } from './json_explorer/json_explorer'; // We have made some monkey-patching of json-formatter-js so we can't switch right now\n\ninterface Props {\n  className?: string;\n  json: {};\n  config?: any;\n  open?: number;\n  onDidRender?: (formattedJson: any) => void;\n}\n\nexport class JSONFormatter extends PureComponent<Props> {\n  private wrapperRef = createRef<HTMLDivElement>();\n\n  static defaultProps = {\n    open: 3,\n    config: {\n      animateOpen: true,\n    },\n  };\n\n  componentDidMount() {\n    this.renderJson();\n  }\n\n  componentDidUpdate() {\n    this.renderJson();\n  }\n\n  renderJson = () => {\n    const { json, config, open, onDidRender } = this.props;\n    const wrapperEl = this.wrapperRef.current;\n    const formatter = new JsonExplorer(json, open, config);\n    // @ts-ignore\n    const hasChildren: boolean = wrapperEl.hasChildNodes();\n    if (hasChildren) {\n      // @ts-ignore\n      wrapperEl.replaceChild(formatter.render(), wrapperEl.lastChild);\n    } else {\n      // @ts-ignore\n      wrapperEl.appendChild(formatter.render());\n    }\n\n    if (onDidRender) {\n      onDidRender(formatter.json);\n    }\n  };\n\n  render() {\n    const { className } = this.props;\n    return <div className={className} ref={this.wrapperRef} />;\n  }\n}\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,QAAgD,OAAhD;AAEA,SAASC,YAAT,QAA6B,+BAA7B,C,CAA8D;;;AAU9D,OAAO,MAAMC,aAAN,SAA4BH,aAA5B,CAAiD;EAAA;IAAA;;IAAA,iDACjCC,SAAS,EADwB;;IAAA,oCAkBzC,MAAM;MACjB,MAAM;QAAEG,IAAF;QAAQC,MAAR;QAAgBC,IAAhB;QAAsBC;MAAtB,IAAsC,KAAKC,KAAjD;MACA,MAAMC,SAAS,GAAG,KAAKC,UAAL,CAAgBC,OAAlC;MACA,MAAMC,SAAS,GAAG,IAAIV,YAAJ,CAAiBE,IAAjB,EAAuBE,IAAvB,EAA6BD,MAA7B,CAAlB,CAHiB,CAIjB;;MACA,MAAMQ,WAAoB,GAAGJ,SAAS,CAACK,aAAV,EAA7B;;MACA,IAAID,WAAJ,EAAiB;QACf;QACAJ,SAAS,CAACM,YAAV,CAAuBH,SAAS,CAACI,MAAV,EAAvB,EAA2CP,SAAS,CAACQ,SAArD;MACD,CAHD,MAGO;QACL;QACAR,SAAS,CAACS,WAAV,CAAsBN,SAAS,CAACI,MAAV,EAAtB;MACD;;MAED,IAAIT,WAAJ,EAAiB;QACfA,WAAW,CAACK,SAAS,CAACR,IAAX,CAAX;MACD;IACF,CAnCqD;EAAA;;EAUtDe,iBAAiB,GAAG;IAClB,KAAKC,UAAL;EACD;;EAEDC,kBAAkB,GAAG;IACnB,KAAKD,UAAL;EACD;;EAqBDJ,MAAM,GAAG;IACP,MAAM;MAAEM;IAAF,IAAgB,KAAKd,KAA3B;IACA,oBAAO;MAAK,SAAS,EAAEc,SAAhB;MAA2B,GAAG,EAAE,KAAKZ;IAArC,EAAP;EACD;;AAxCqD;;gBAA3CP,a,kBAGW;EACpBG,IAAI,EAAE,CADc;EAEpBD,MAAM,EAAE;IACNkB,WAAW,EAAE;EADP;AAFY,C"},"metadata":{},"sourceType":"module"}