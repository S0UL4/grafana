{"ast":null,"code":"import { css, cx } from '@emotion/css';\nimport React from 'react'; // @ts-ignore\n\nimport Highlighter from 'react-highlight-words';\nimport { FieldConfigProperty } from '@grafana/data';\nimport { Counter, Field, HorizontalGroup, IconButton, Label, stylesFactory, useTheme } from '@grafana/ui';\nimport { OptionsPaneCategory } from './OptionsPaneCategory';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const DynamicConfigValueEditor = ({\n  property,\n  context,\n  registry,\n  onChange,\n  onRemove,\n  isSystemOverride,\n  searchQuery\n}) => {\n  var _item$category, _div;\n\n  const theme = useTheme();\n  const styles = getStyles(theme);\n  const item = registry === null || registry === void 0 ? void 0 : registry.getIfExists(property.id);\n\n  if (!item) {\n    return null;\n  }\n\n  const isCollapsible = Array.isArray(property.value) || property.id === FieldConfigProperty.Thresholds || property.id === FieldConfigProperty.Links || property.id === FieldConfigProperty.Mappings;\n  const labelCategory = (_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.filter(c => c !== item.name);\n  let editor;\n  /* eslint-disable react/display-name */\n\n  const renderLabel = (includeDescription = true, includeCounter = false) => (isExpanded = false) => /*#__PURE__*/_jsxs(HorizontalGroup, {\n    justify: \"space-between\",\n    children: [/*#__PURE__*/_jsxs(Label, {\n      category: labelCategory,\n      description: includeDescription ? item.description : undefined,\n      children: [/*#__PURE__*/_jsx(Highlighter, {\n        textToHighlight: item.name,\n        searchWords: [searchQuery],\n        highlightClassName: 'search-fragment-highlight'\n      }), !isExpanded && includeCounter && item.getItemsCount && /*#__PURE__*/_jsx(Counter, {\n        value: item.getItemsCount(property.value)\n      })]\n    }), !isSystemOverride && (_div || (_div = /*#__PURE__*/_jsx(\"div\", {\n      children: /*#__PURE__*/_jsx(IconButton, {\n        name: \"times\",\n        onClick: onRemove\n      })\n    })))]\n  });\n  /* eslint-enable react/display-name */\n\n\n  if (isCollapsible) {\n    editor = /*#__PURE__*/_jsx(OptionsPaneCategory, {\n      id: item.name,\n      renderTitle: renderLabel(false, true),\n      className: css`\n          padding-left: 0;\n          padding-right: 0;\n        `,\n      isNested: true,\n      isOpenDefault: property.value !== undefined,\n      children: /*#__PURE__*/_jsx(item.override, {\n        value: property.value,\n        onChange: value => {\n          onChange(value);\n        },\n        item: item,\n        context: context\n      })\n    });\n  } else {\n    editor = /*#__PURE__*/_jsx(\"div\", {\n      children: /*#__PURE__*/_jsx(Field, {\n        label: renderLabel()(),\n        description: item.description,\n        children: /*#__PURE__*/_jsx(item.override, {\n          value: property.value,\n          onChange: value => {\n            onChange(value);\n          },\n          item: item,\n          context: context\n        })\n      })\n    });\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: cx(isCollapsible && styles.collapsibleOverrideEditor, !isCollapsible && 'dynamicConfigValueEditor--nonCollapsible'),\n    children: editor\n  });\n};\nconst getStyles = stylesFactory(theme => {\n  return {\n    collapsibleOverrideEditor: css`\n      label: collapsibleOverrideEditor;\n      & + .dynamicConfigValueEditor--nonCollapsible {\n        margin-top: ${theme.spacing.formSpacingBase}px;\n      }\n    `\n  };\n});","map":{"version":3,"names":["css","cx","React","Highlighter","FieldConfigProperty","Counter","Field","HorizontalGroup","IconButton","Label","stylesFactory","useTheme","OptionsPaneCategory","DynamicConfigValueEditor","property","context","registry","onChange","onRemove","isSystemOverride","searchQuery","theme","styles","getStyles","item","getIfExists","id","isCollapsible","Array","isArray","value","Thresholds","Links","Mappings","labelCategory","category","filter","c","name","editor","renderLabel","includeDescription","includeCounter","isExpanded","description","undefined","getItemsCount","collapsibleOverrideEditor","spacing","formSpacingBase"],"sources":["/home/soula/grafana/public/app/features/dashboard/components/PanelEditor/DynamicConfigValueEditor.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React from 'react';\n// @ts-ignore\nimport Highlighter from 'react-highlight-words';\n\nimport {\n  DynamicConfigValue,\n  FieldConfigOptionsRegistry,\n  FieldConfigProperty,\n  FieldOverrideContext,\n  GrafanaTheme,\n} from '@grafana/data';\nimport { Counter, Field, HorizontalGroup, IconButton, Label, stylesFactory, useTheme } from '@grafana/ui';\n\nimport { OptionsPaneCategory } from './OptionsPaneCategory';\n\ninterface DynamicConfigValueEditorProps {\n  property: DynamicConfigValue;\n  registry: FieldConfigOptionsRegistry;\n  onChange: (value: DynamicConfigValue) => void;\n  context: FieldOverrideContext;\n  onRemove: () => void;\n  isSystemOverride?: boolean;\n  searchQuery: string;\n}\n\nexport const DynamicConfigValueEditor: React.FC<DynamicConfigValueEditorProps> = ({\n  property,\n  context,\n  registry,\n  onChange,\n  onRemove,\n  isSystemOverride,\n  searchQuery,\n}) => {\n  const theme = useTheme();\n  const styles = getStyles(theme);\n  const item = registry?.getIfExists(property.id);\n\n  if (!item) {\n    return null;\n  }\n\n  const isCollapsible =\n    Array.isArray(property.value) ||\n    property.id === FieldConfigProperty.Thresholds ||\n    property.id === FieldConfigProperty.Links ||\n    property.id === FieldConfigProperty.Mappings;\n\n  const labelCategory = item.category?.filter((c) => c !== item.name);\n  let editor;\n\n  /* eslint-disable react/display-name */\n  const renderLabel =\n    (includeDescription = true, includeCounter = false) =>\n    (isExpanded = false) =>\n      (\n        <HorizontalGroup justify=\"space-between\">\n          <Label category={labelCategory} description={includeDescription ? item.description : undefined}>\n            <Highlighter\n              textToHighlight={item.name}\n              searchWords={[searchQuery]}\n              highlightClassName={'search-fragment-highlight'}\n            />\n            {!isExpanded && includeCounter && item.getItemsCount && (\n              <Counter value={item.getItemsCount(property.value)} />\n            )}\n          </Label>\n          {!isSystemOverride && (\n            <div>\n              <IconButton name=\"times\" onClick={onRemove} />\n            </div>\n          )}\n        </HorizontalGroup>\n      );\n  /* eslint-enable react/display-name */\n\n  if (isCollapsible) {\n    editor = (\n      <OptionsPaneCategory\n        id={item.name}\n        renderTitle={renderLabel(false, true)}\n        className={css`\n          padding-left: 0;\n          padding-right: 0;\n        `}\n        isNested\n        isOpenDefault={property.value !== undefined}\n      >\n        <item.override\n          value={property.value}\n          onChange={(value) => {\n            onChange(value);\n          }}\n          item={item}\n          context={context}\n        />\n      </OptionsPaneCategory>\n    );\n  } else {\n    editor = (\n      <div>\n        <Field label={renderLabel()()} description={item.description}>\n          <item.override\n            value={property.value}\n            onChange={(value) => {\n              onChange(value);\n            }}\n            item={item}\n            context={context}\n          />\n        </Field>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cx(\n        isCollapsible && styles.collapsibleOverrideEditor,\n        !isCollapsible && 'dynamicConfigValueEditor--nonCollapsible'\n      )}\n    >\n      {editor}\n    </div>\n  );\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    collapsibleOverrideEditor: css`\n      label: collapsibleOverrideEditor;\n      & + .dynamicConfigValueEditor--nonCollapsible {\n        margin-top: ${theme.spacing.formSpacingBase}px;\n      }\n    `,\n  };\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}