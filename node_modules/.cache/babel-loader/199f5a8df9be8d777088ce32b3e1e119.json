{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { dateTimeForTimeZone, dateMath } from '@grafana/data';\nimport { TimePickerWithHistory } from 'app/core/components/TimePicker/TimePickerWithHistory';\nimport { getShiftedTimeRange, getZoomedTimeRange } from 'app/core/utils/timePicker';\nimport { TimeSyncButton } from './TimeSyncButton';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport class ExploreTimeControls extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onMoveTimePicker\", direction => {\n      const {\n        range,\n        onChangeTime,\n        timeZone\n      } = this.props;\n      const {\n        from,\n        to\n      } = getShiftedTimeRange(direction, range);\n      const nextTimeRange = {\n        from: dateTimeForTimeZone(timeZone, from),\n        to: dateTimeForTimeZone(timeZone, to)\n      };\n      onChangeTime(nextTimeRange);\n    });\n\n    _defineProperty(this, \"onMoveForward\", () => this.onMoveTimePicker(1));\n\n    _defineProperty(this, \"onMoveBack\", () => this.onMoveTimePicker(-1));\n\n    _defineProperty(this, \"onChangeTimePicker\", timeRange => {\n      const adjustedFrom = dateMath.isMathString(timeRange.raw.from) ? timeRange.raw.from : timeRange.from;\n      const adjustedTo = dateMath.isMathString(timeRange.raw.to) ? timeRange.raw.to : timeRange.to;\n      this.props.onChangeTime({\n        from: adjustedFrom,\n        to: adjustedTo\n      });\n    });\n\n    _defineProperty(this, \"onZoom\", () => {\n      const {\n        range,\n        onChangeTime,\n        timeZone\n      } = this.props;\n      const {\n        from,\n        to\n      } = getZoomedTimeRange(range, 2);\n      const nextTimeRange = {\n        from: dateTimeForTimeZone(timeZone, from),\n        to: dateTimeForTimeZone(timeZone, to)\n      };\n      onChangeTime(nextTimeRange);\n    });\n  }\n\n  render() {\n    const {\n      range,\n      timeZone,\n      fiscalYearStartMonth,\n      splitted,\n      syncedTimes,\n      onChangeTimeSync,\n      hideText,\n      onChangeTimeZone,\n      onChangeFiscalYearStartMonth\n    } = this.props;\n    const timeSyncButton = splitted ? /*#__PURE__*/_jsx(TimeSyncButton, {\n      onClick: onChangeTimeSync,\n      isSynced: syncedTimes\n    }) : undefined;\n    const timePickerCommonProps = {\n      value: range,\n      timeZone,\n      fiscalYearStartMonth,\n      onMoveBackward: this.onMoveBack,\n      onMoveForward: this.onMoveForward,\n      onZoom: this.onZoom,\n      hideText\n    };\n    return /*#__PURE__*/_jsx(TimePickerWithHistory, Object.assign({}, timePickerCommonProps, {\n      timeSyncButton: timeSyncButton,\n      isSynced: syncedTimes,\n      widthOverride: splitted ? window.innerWidth / 2 : undefined,\n      onChange: this.onChangeTimePicker,\n      onChangeTimeZone: onChangeTimeZone,\n      onChangeFiscalYearStartMonth: onChangeFiscalYearStartMonth\n    }));\n  }\n\n}","map":{"version":3,"names":["React","Component","dateTimeForTimeZone","dateMath","TimePickerWithHistory","getShiftedTimeRange","getZoomedTimeRange","TimeSyncButton","ExploreTimeControls","direction","range","onChangeTime","timeZone","props","from","to","nextTimeRange","onMoveTimePicker","timeRange","adjustedFrom","isMathString","raw","adjustedTo","render","fiscalYearStartMonth","splitted","syncedTimes","onChangeTimeSync","hideText","onChangeTimeZone","onChangeFiscalYearStartMonth","timeSyncButton","undefined","timePickerCommonProps","value","onMoveBackward","onMoveBack","onMoveForward","onZoom","window","innerWidth","onChangeTimePicker"],"sources":["/home/soula/grafana/public/app/features/explore/ExploreTimeControls.tsx"],"sourcesContent":["import React, { Component } from 'react';\n\nimport { TimeRange, TimeZone, RawTimeRange, dateTimeForTimeZone, dateMath } from '@grafana/data';\nimport { TimePickerWithHistory } from 'app/core/components/TimePicker/TimePickerWithHistory';\nimport { getShiftedTimeRange, getZoomedTimeRange } from 'app/core/utils/timePicker';\nimport { ExploreId } from 'app/types';\n\nimport { TimeSyncButton } from './TimeSyncButton';\n\nexport interface Props {\n  exploreId: ExploreId;\n  hideText?: boolean;\n  range: TimeRange;\n  timeZone: TimeZone;\n  fiscalYearStartMonth: number;\n  splitted: boolean;\n  syncedTimes: boolean;\n  onChangeTimeSync: () => void;\n  onChangeTime: (range: RawTimeRange) => void;\n  onChangeTimeZone: (timeZone: TimeZone) => void;\n  onChangeFiscalYearStartMonth: (fiscalYearStartMonth: number) => void;\n}\n\nexport class ExploreTimeControls extends Component<Props> {\n  onMoveTimePicker = (direction: number) => {\n    const { range, onChangeTime, timeZone } = this.props;\n    const { from, to } = getShiftedTimeRange(direction, range);\n    const nextTimeRange = {\n      from: dateTimeForTimeZone(timeZone, from),\n      to: dateTimeForTimeZone(timeZone, to),\n    };\n\n    onChangeTime(nextTimeRange);\n  };\n\n  onMoveForward = () => this.onMoveTimePicker(1);\n  onMoveBack = () => this.onMoveTimePicker(-1);\n\n  onChangeTimePicker = (timeRange: TimeRange) => {\n    const adjustedFrom = dateMath.isMathString(timeRange.raw.from) ? timeRange.raw.from : timeRange.from;\n    const adjustedTo = dateMath.isMathString(timeRange.raw.to) ? timeRange.raw.to : timeRange.to;\n\n    this.props.onChangeTime({\n      from: adjustedFrom,\n      to: adjustedTo,\n    });\n  };\n\n  onZoom = () => {\n    const { range, onChangeTime, timeZone } = this.props;\n    const { from, to } = getZoomedTimeRange(range, 2);\n    const nextTimeRange = {\n      from: dateTimeForTimeZone(timeZone, from),\n      to: dateTimeForTimeZone(timeZone, to),\n    };\n\n    onChangeTime(nextTimeRange);\n  };\n\n  render() {\n    const {\n      range,\n      timeZone,\n      fiscalYearStartMonth,\n      splitted,\n      syncedTimes,\n      onChangeTimeSync,\n      hideText,\n      onChangeTimeZone,\n      onChangeFiscalYearStartMonth,\n    } = this.props;\n    const timeSyncButton = splitted ? <TimeSyncButton onClick={onChangeTimeSync} isSynced={syncedTimes} /> : undefined;\n    const timePickerCommonProps = {\n      value: range,\n      timeZone,\n      fiscalYearStartMonth,\n      onMoveBackward: this.onMoveBack,\n      onMoveForward: this.onMoveForward,\n      onZoom: this.onZoom,\n      hideText,\n    };\n\n    return (\n      <TimePickerWithHistory\n        {...timePickerCommonProps}\n        timeSyncButton={timeSyncButton}\n        isSynced={syncedTimes}\n        widthOverride={splitted ? window.innerWidth / 2 : undefined}\n        onChange={this.onChangeTimePicker}\n        onChangeTimeZone={onChangeTimeZone}\n        onChangeFiscalYearStartMonth={onChangeFiscalYearStartMonth}\n      />\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}