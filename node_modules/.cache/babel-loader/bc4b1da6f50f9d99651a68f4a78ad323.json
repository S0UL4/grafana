{"ast":null,"code":"import { css } from '@emotion/css';\nimport { useDialog } from '@react-aria/dialog';\nimport { FocusScope } from '@react-aria/focus';\nimport { OverlayContainer, useOverlay } from '@react-aria/overlays';\nimport React, { memo } from 'react';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { useTheme2 } from '../../../themes';\nimport { Body } from './CalendarBody';\nimport { Footer } from './CalendarFooter';\nimport { Header } from './CalendarHeader';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const getStyles = (theme, isReversed = false) => {\n  return {\n    container: css`\n      top: -1px;\n      position: absolute;\n      ${isReversed ? 'left' : 'right'}: 544px;\n      box-shadow: ${theme.shadows.z3};\n      background-color: ${theme.colors.background.primary};\n      z-index: -1;\n      border: 1px solid ${theme.colors.border.weak};\n      border-radius: 2px 0 0 2px;\n\n      &:after {\n        display: block;\n        background-color: ${theme.colors.background.primary};\n        width: 19px;\n        height: 100%;\n        content: ${!isReversed ? ' ' : ''};\n        position: absolute;\n        top: 0;\n        right: -19px;\n        border-left: 1px solid ${theme.colors.border.weak};\n      }\n    `,\n    modal: css`\n      position: fixed;\n      top: 20%;\n      width: 100%;\n      z-index: ${theme.zIndex.modal};\n    `,\n    content: css`\n      margin: 0 auto;\n      width: 268px;\n    `,\n    backdrop: css`\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      background: #202226;\n      opacity: 0.7;\n      z-index: ${theme.zIndex.modalBackdrop};\n      text-align: center;\n    `\n  };\n};\n\nconst stopPropagation = event => event.stopPropagation();\n\nfunction TimePickerCalendar(props) {\n  const theme = useTheme2();\n  const styles = getStyles(theme, props.isReversed);\n  const {\n    isOpen,\n    isFullscreen,\n    onClose\n  } = props;\n  const ref = /*#__PURE__*/React.createRef();\n  const {\n    dialogProps\n  } = useDialog({\n    'aria-label': selectors.components.TimePicker.calendar.label\n  }, ref);\n  const {\n    overlayProps\n  } = useOverlay({\n    isDismissable: true,\n    isOpen,\n    onClose\n  }, ref);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  if (isFullscreen) {\n    return /*#__PURE__*/_jsx(FocusScope, {\n      contain: true,\n      restoreFocus: true,\n      autoFocus: true,\n      children: /*#__PURE__*/_jsxs(\"section\", Object.assign({\n        className: styles.container,\n        onClick: stopPropagation,\n        ref: ref\n      }, overlayProps, dialogProps, {\n        children: [/*#__PURE__*/_jsx(Header, Object.assign({}, props)), /*#__PURE__*/_jsx(Body, Object.assign({}, props))]\n      }))\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(OverlayContainer, {\n    children: [/*#__PURE__*/_jsx(FocusScope, {\n      contain: true,\n      autoFocus: true,\n      restoreFocus: true,\n      children: /*#__PURE__*/_jsx(\"section\", Object.assign({\n        className: styles.modal,\n        onClick: stopPropagation,\n        ref: ref\n      }, overlayProps, dialogProps, {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.content,\n          \"aria-label\": selectors.components.TimePicker.calendar.label,\n          children: [/*#__PURE__*/_jsx(Header, Object.assign({}, props)), /*#__PURE__*/_jsx(Body, Object.assign({}, props)), /*#__PURE__*/_jsx(Footer, Object.assign({}, props))]\n        })\n      }))\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.backdrop,\n      onClick: stopPropagation\n    })]\n  });\n}\n\nexport default /*#__PURE__*/memo(TimePickerCalendar);\nTimePickerCalendar.displayName = 'TimePickerCalendar';","map":{"version":3,"names":["css","useDialog","FocusScope","OverlayContainer","useOverlay","React","memo","selectors","useTheme2","Body","Footer","Header","getStyles","theme","isReversed","container","shadows","z3","colors","background","primary","border","weak","modal","zIndex","content","backdrop","modalBackdrop","stopPropagation","event","TimePickerCalendar","props","styles","isOpen","isFullscreen","onClose","ref","createRef","dialogProps","components","TimePicker","calendar","label","overlayProps","isDismissable","displayName"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/DateTimePickers/TimeRangePicker/TimePickerCalendar.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { useDialog } from '@react-aria/dialog';\nimport { FocusScope } from '@react-aria/focus';\nimport { OverlayContainer, useOverlay } from '@react-aria/overlays';\nimport React, { FormEvent, memo } from 'react';\n\nimport { DateTime, GrafanaTheme2, TimeZone } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { useTheme2 } from '../../../themes';\n\nimport { Body } from './CalendarBody';\nimport { Footer } from './CalendarFooter';\nimport { Header } from './CalendarHeader';\n\nexport const getStyles = (theme: GrafanaTheme2, isReversed = false) => {\n  return {\n    container: css`\n      top: -1px;\n      position: absolute;\n      ${isReversed ? 'left' : 'right'}: 544px;\n      box-shadow: ${theme.shadows.z3};\n      background-color: ${theme.colors.background.primary};\n      z-index: -1;\n      border: 1px solid ${theme.colors.border.weak};\n      border-radius: 2px 0 0 2px;\n\n      &:after {\n        display: block;\n        background-color: ${theme.colors.background.primary};\n        width: 19px;\n        height: 100%;\n        content: ${!isReversed ? ' ' : ''};\n        position: absolute;\n        top: 0;\n        right: -19px;\n        border-left: 1px solid ${theme.colors.border.weak};\n      }\n    `,\n    modal: css`\n      position: fixed;\n      top: 20%;\n      width: 100%;\n      z-index: ${theme.zIndex.modal};\n    `,\n    content: css`\n      margin: 0 auto;\n      width: 268px;\n    `,\n    backdrop: css`\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      background: #202226;\n      opacity: 0.7;\n      z-index: ${theme.zIndex.modalBackdrop};\n      text-align: center;\n    `,\n  };\n};\n\nexport interface TimePickerCalendarProps {\n  isOpen: boolean;\n  from: DateTime;\n  to: DateTime;\n  onClose: () => void;\n  onApply: (e: FormEvent<HTMLButtonElement>) => void;\n  onChange: (from: DateTime, to: DateTime) => void;\n  isFullscreen: boolean;\n  timeZone?: TimeZone;\n  isReversed?: boolean;\n}\n\nconst stopPropagation = (event: React.MouseEvent<HTMLDivElement>) => event.stopPropagation();\n\nfunction TimePickerCalendar(props: TimePickerCalendarProps) {\n  const theme = useTheme2();\n  const styles = getStyles(theme, props.isReversed);\n  const { isOpen, isFullscreen, onClose } = props;\n  const ref = React.createRef<HTMLElement>();\n  const { dialogProps } = useDialog(\n    {\n      'aria-label': selectors.components.TimePicker.calendar.label,\n    },\n    ref\n  );\n  const { overlayProps } = useOverlay(\n    {\n      isDismissable: true,\n      isOpen,\n      onClose,\n    },\n    ref\n  );\n\n  if (!isOpen) {\n    return null;\n  }\n\n  if (isFullscreen) {\n    return (\n      <FocusScope contain restoreFocus autoFocus>\n        <section className={styles.container} onClick={stopPropagation} ref={ref} {...overlayProps} {...dialogProps}>\n          <Header {...props} />\n          <Body {...props} />\n        </section>\n      </FocusScope>\n    );\n  }\n\n  return (\n    <OverlayContainer>\n      <FocusScope contain autoFocus restoreFocus>\n        <section className={styles.modal} onClick={stopPropagation} ref={ref} {...overlayProps} {...dialogProps}>\n          <div className={styles.content} aria-label={selectors.components.TimePicker.calendar.label}>\n            <Header {...props} />\n            <Body {...props} />\n            <Footer {...props} />\n          </div>\n        </section>\n      </FocusScope>\n      <div className={styles.backdrop} onClick={stopPropagation} />\n    </OverlayContainer>\n  );\n}\nexport default memo(TimePickerCalendar);\nTimePickerCalendar.displayName = 'TimePickerCalendar';\n"],"mappings":"AAAA,SAASA,GAAT,QAAoB,cAApB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,gBAAT,EAA2BC,UAA3B,QAA6C,sBAA7C;AACA,OAAOC,KAAP,IAA2BC,IAA3B,QAAuC,OAAvC;AAGA,SAASC,SAAT,QAA0B,wBAA1B;AAEA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,SAASC,IAAT,QAAqB,gBAArB;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,MAAT,QAAuB,kBAAvB;;;AAEA,OAAO,MAAMC,SAAS,GAAG,CAACC,KAAD,EAAuBC,UAAU,GAAG,KAApC,KAA8C;EACrE,OAAO;IACLC,SAAS,EAAEf,GAAI;AACnB;AACA;AACA,QAAQc,UAAU,GAAG,MAAH,GAAY,OAAQ;AACtC,oBAAoBD,KAAK,CAACG,OAAN,CAAcC,EAAG;AACrC,0BAA0BJ,KAAK,CAACK,MAAN,CAAaC,UAAb,CAAwBC,OAAQ;AAC1D;AACA,0BAA0BP,KAAK,CAACK,MAAN,CAAaG,MAAb,CAAoBC,IAAK;AACnD;AACA;AACA;AACA;AACA,4BAA4BT,KAAK,CAACK,MAAN,CAAaC,UAAb,CAAwBC,OAAQ;AAC5D;AACA;AACA,mBAAmB,CAACN,UAAD,GAAc,GAAd,GAAoB,EAAG;AAC1C;AACA;AACA;AACA,iCAAiCD,KAAK,CAACK,MAAN,CAAaG,MAAb,CAAoBC,IAAK;AAC1D;AACA,KAtBS;IAuBLC,KAAK,EAAEvB,GAAI;AACf;AACA;AACA;AACA,iBAAiBa,KAAK,CAACW,MAAN,CAAaD,KAAM;AACpC,KA5BS;IA6BLE,OAAO,EAAEzB,GAAI;AACjB;AACA;AACA,KAhCS;IAiCL0B,QAAQ,EAAE1B,GAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiBa,KAAK,CAACW,MAAN,CAAaG,aAAc;AAC5C;AACA;EA3CS,CAAP;AA6CD,CA9CM;;AA4DP,MAAMC,eAAe,GAAIC,KAAD,IAA6CA,KAAK,CAACD,eAAN,EAArE;;AAEA,SAASE,kBAAT,CAA4BC,KAA5B,EAA4D;EAC1D,MAAMlB,KAAK,GAAGL,SAAS,EAAvB;EACA,MAAMwB,MAAM,GAAGpB,SAAS,CAACC,KAAD,EAAQkB,KAAK,CAACjB,UAAd,CAAxB;EACA,MAAM;IAAEmB,MAAF;IAAUC,YAAV;IAAwBC;EAAxB,IAAoCJ,KAA1C;EACA,MAAMK,GAAG,gBAAG/B,KAAK,CAACgC,SAAN,EAAZ;EACA,MAAM;IAAEC;EAAF,IAAkBrC,SAAS,CAC/B;IACE,cAAcM,SAAS,CAACgC,UAAV,CAAqBC,UAArB,CAAgCC,QAAhC,CAAyCC;EADzD,CAD+B,EAI/BN,GAJ+B,CAAjC;EAMA,MAAM;IAAEO;EAAF,IAAmBvC,UAAU,CACjC;IACEwC,aAAa,EAAE,IADjB;IAEEX,MAFF;IAGEE;EAHF,CADiC,EAMjCC,GANiC,CAAnC;;EASA,IAAI,CAACH,MAAL,EAAa;IACX,OAAO,IAAP;EACD;;EAED,IAAIC,YAAJ,EAAkB;IAChB,oBACE,KAAC,UAAD;MAAY,OAAO,MAAnB;MAAoB,YAAY,MAAhC;MAAiC,SAAS,MAA1C;MAAA,uBACE;QAAS,SAAS,EAAEF,MAAM,CAACjB,SAA3B;QAAsC,OAAO,EAAEa,eAA/C;QAAgE,GAAG,EAAEQ;MAArE,GAA8EO,YAA9E,EAAgGL,WAAhG;QAAA,wBACE,KAAC,MAAD,oBAAYP,KAAZ,EADF,eAEE,KAAC,IAAD,oBAAUA,KAAV,EAFF;MAAA;IADF,EADF;EAQD;;EAED,oBACE,MAAC,gBAAD;IAAA,wBACE,KAAC,UAAD;MAAY,OAAO,MAAnB;MAAoB,SAAS,MAA7B;MAA8B,YAAY,MAA1C;MAAA,uBACE;QAAS,SAAS,EAAEC,MAAM,CAACT,KAA3B;QAAkC,OAAO,EAAEK,eAA3C;QAA4D,GAAG,EAAEQ;MAAjE,GAA0EO,YAA1E,EAA4FL,WAA5F;QAAA,uBACE;UAAK,SAAS,EAAEN,MAAM,CAACP,OAAvB;UAAgC,cAAYlB,SAAS,CAACgC,UAAV,CAAqBC,UAArB,CAAgCC,QAAhC,CAAyCC,KAArF;UAAA,wBACE,KAAC,MAAD,oBAAYX,KAAZ,EADF,eAEE,KAAC,IAAD,oBAAUA,KAAV,EAFF,eAGE,KAAC,MAAD,oBAAYA,KAAZ,EAHF;QAAA;MADF;IADF,EADF,eAUE;MAAK,SAAS,EAAEC,MAAM,CAACN,QAAvB;MAAiC,OAAO,EAAEE;IAA1C,EAVF;EAAA,EADF;AAcD;;AACD,4BAAetB,IAAI,CAACwB,kBAAD,CAAnB;AACAA,kBAAkB,CAACe,WAAnB,GAAiC,oBAAjC"},"metadata":{},"sourceType":"module"}