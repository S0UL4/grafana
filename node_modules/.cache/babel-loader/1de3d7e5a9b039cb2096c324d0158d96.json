{"ast":null,"code":"const _excluded = [\"children\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useCallback, useState } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const PanelHeaderMenuTrigger = _ref => {\n  let {\n    children\n  } = _ref,\n      divProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const [clickCoordinates, setClickCoordinates] = useState({\n    x: 0,\n    y: 0\n  });\n  const [panelMenuOpen, setPanelMenuOpen] = useState(false);\n  const onMenuToggle = useCallback(event => {\n    if (!isClick(clickCoordinates, eventToClickCoordinates(event))) {\n      return;\n    }\n\n    event.stopPropagation();\n    setPanelMenuOpen(!panelMenuOpen);\n  }, [clickCoordinates, panelMenuOpen, setPanelMenuOpen]);\n  const onMouseDown = useCallback(event => {\n    setClickCoordinates(eventToClickCoordinates(event));\n  }, [setClickCoordinates]);\n  return /*#__PURE__*/_jsx(\"header\", Object.assign({}, divProps, {\n    className: \"panel-title-container\",\n    onClick: onMenuToggle,\n    onMouseDown: onMouseDown,\n    children: children({\n      panelMenuOpen,\n      closeMenu: () => setPanelMenuOpen(false)\n    })\n  }));\n};\n\nfunction isClick(current, clicked) {\n  return clicked.x === current.x && clicked.y === current.y;\n}\n\nfunction eventToClickCoordinates(event) {\n  return {\n    x: Math.floor(event.clientX),\n    y: Math.floor(event.clientY)\n  };\n}","map":{"version":3,"names":["React","useCallback","useState","PanelHeaderMenuTrigger","children","divProps","clickCoordinates","setClickCoordinates","x","y","panelMenuOpen","setPanelMenuOpen","onMenuToggle","event","isClick","eventToClickCoordinates","stopPropagation","onMouseDown","closeMenu","current","clicked","Math","floor","clientX","clientY"],"sources":["/home/soula/grafana/public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuTrigger.tsx"],"sourcesContent":["import React, { FC, HTMLAttributes, MouseEvent, ReactElement, useCallback, useState } from 'react';\n\nimport { CartesianCoords2D } from '@grafana/data';\n\ninterface PanelHeaderMenuTriggerApi {\n  panelMenuOpen: boolean;\n  closeMenu: () => void;\n}\n\ninterface Props extends HTMLAttributes<HTMLDivElement> {\n  children: (props: PanelHeaderMenuTriggerApi) => ReactElement;\n}\n\nexport const PanelHeaderMenuTrigger: FC<Props> = ({ children, ...divProps }) => {\n  const [clickCoordinates, setClickCoordinates] = useState<CartesianCoords2D>({ x: 0, y: 0 });\n  const [panelMenuOpen, setPanelMenuOpen] = useState<boolean>(false);\n  const onMenuToggle = useCallback(\n    (event: MouseEvent<HTMLDivElement>) => {\n      if (!isClick(clickCoordinates, eventToClickCoordinates(event))) {\n        return;\n      }\n\n      event.stopPropagation();\n\n      setPanelMenuOpen(!panelMenuOpen);\n    },\n    [clickCoordinates, panelMenuOpen, setPanelMenuOpen]\n  );\n  const onMouseDown = useCallback(\n    (event: MouseEvent<HTMLDivElement>) => {\n      setClickCoordinates(eventToClickCoordinates(event));\n    },\n    [setClickCoordinates]\n  );\n\n  return (\n    <header {...divProps} className=\"panel-title-container\" onClick={onMenuToggle} onMouseDown={onMouseDown}>\n      {children({ panelMenuOpen, closeMenu: () => setPanelMenuOpen(false) })}\n    </header>\n  );\n};\n\nfunction isClick(current: CartesianCoords2D, clicked: CartesianCoords2D): boolean {\n  return clicked.x === current.x && clicked.y === current.y;\n}\n\nfunction eventToClickCoordinates(event: MouseEvent<HTMLDivElement>): CartesianCoords2D {\n  return {\n    x: Math.floor(event.clientX),\n    y: Math.floor(event.clientY),\n  };\n}\n"],"mappings":";;;;AAAA,OAAOA,KAAP,IAA8DC,WAA9D,EAA2EC,QAA3E,QAA2F,OAA3F;;AAaA,OAAO,MAAMC,sBAAiC,GAAG,QAA+B;EAAA,IAA9B;IAAEC;EAAF,CAA8B;EAAA,IAAfC,QAAe;;EAC9E,MAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CL,QAAQ,CAAoB;IAAEM,CAAC,EAAE,CAAL;IAAQC,CAAC,EAAE;EAAX,CAApB,CAAxD;EACA,MAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCT,QAAQ,CAAU,KAAV,CAAlD;EACA,MAAMU,YAAY,GAAGX,WAAW,CAC7BY,KAAD,IAAuC;IACrC,IAAI,CAACC,OAAO,CAACR,gBAAD,EAAmBS,uBAAuB,CAACF,KAAD,CAA1C,CAAZ,EAAgE;MAC9D;IACD;;IAEDA,KAAK,CAACG,eAAN;IAEAL,gBAAgB,CAAC,CAACD,aAAF,CAAhB;EACD,CAT6B,EAU9B,CAACJ,gBAAD,EAAmBI,aAAnB,EAAkCC,gBAAlC,CAV8B,CAAhC;EAYA,MAAMM,WAAW,GAAGhB,WAAW,CAC5BY,KAAD,IAAuC;IACrCN,mBAAmB,CAACQ,uBAAuB,CAACF,KAAD,CAAxB,CAAnB;EACD,CAH4B,EAI7B,CAACN,mBAAD,CAJ6B,CAA/B;EAOA,oBACE,iCAAYF,QAAZ;IAAsB,SAAS,EAAC,uBAAhC;IAAwD,OAAO,EAAEO,YAAjE;IAA+E,WAAW,EAAEK,WAA5F;IAAA,UACGb,QAAQ,CAAC;MAAEM,aAAF;MAAiBQ,SAAS,EAAE,MAAMP,gBAAgB,CAAC,KAAD;IAAlD,CAAD;EADX,GADF;AAKD,CA3BM;;AA6BP,SAASG,OAAT,CAAiBK,OAAjB,EAA6CC,OAA7C,EAAkF;EAChF,OAAOA,OAAO,CAACZ,CAAR,KAAcW,OAAO,CAACX,CAAtB,IAA2BY,OAAO,CAACX,CAAR,KAAcU,OAAO,CAACV,CAAxD;AACD;;AAED,SAASM,uBAAT,CAAiCF,KAAjC,EAAuF;EACrF,OAAO;IACLL,CAAC,EAAEa,IAAI,CAACC,KAAL,CAAWT,KAAK,CAACU,OAAjB,CADE;IAELd,CAAC,EAAEY,IAAI,CAACC,KAAL,CAAWT,KAAK,CAACW,OAAjB;EAFE,CAAP;AAID"},"metadata":{},"sourceType":"module"}