{"ast":null,"code":"import { css } from '@emotion/css';\nimport React, { useCallback, useState } from 'react';\nimport { ContextMenu, MenuGroup, MenuItem, stylesFactory, useTheme } from '@grafana/ui';\nimport { getEdgeFields, getNodeFields } from './utils';\n/**\n * Hook that contains state of the context menu, both for edges and nodes and provides appropriate component when\n * opened context menu should be opened.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function useContextMenu(getLinks, nodes, edges, config, setConfig, setFocusedNodeId) {\n  const [menu, setMenu] = useState(undefined);\n  const onNodeOpen = useCallback((event, node) => {\n    var _NodeHeader;\n\n    const extraNodeItem = config.gridLayout ? [{\n      label: 'Show in Graph layout',\n      onClick: node => {\n        setFocusedNodeId(node.id);\n        setConfig(Object.assign({}, config, {\n          gridLayout: false\n        }));\n      }\n    }] : undefined;\n    const renderer = getItemsRenderer(getLinks(nodes, node.dataFrameRowIndex), node, extraNodeItem);\n\n    if (renderer) {\n      setMenu( /*#__PURE__*/_jsx(ContextMenu, {\n        renderHeader: () => _NodeHeader || (_NodeHeader = /*#__PURE__*/_jsx(NodeHeader, {\n          node: node,\n          nodes: nodes\n        })),\n        renderMenuItems: renderer,\n        onClose: () => setMenu(undefined),\n        x: event.pageX,\n        y: event.pageY\n      }));\n    }\n  }, [config, nodes, getLinks, setMenu, setConfig, setFocusedNodeId]);\n  const onEdgeOpen = useCallback((event, edge) => {\n    var _EdgeHeader;\n\n    const renderer = getItemsRenderer(getLinks(edges, edge.dataFrameRowIndex), edge);\n\n    if (renderer) {\n      setMenu( /*#__PURE__*/_jsx(ContextMenu, {\n        renderHeader: () => _EdgeHeader || (_EdgeHeader = /*#__PURE__*/_jsx(EdgeHeader, {\n          edge: edge,\n          edges: edges\n        })),\n        renderMenuItems: renderer,\n        onClose: () => setMenu(undefined),\n        x: event.pageX,\n        y: event.pageY\n      }));\n    }\n  }, [edges, getLinks, setMenu]);\n  return {\n    onEdgeOpen,\n    onNodeOpen,\n    MenuComponent: menu\n  };\n}\n\nfunction getItemsRenderer(links, item, extraItems) {\n  if (!(links.length || extraItems !== null && extraItems !== void 0 && extraItems.length)) {\n    return undefined;\n  }\n\n  const items = getItems(links);\n  return () => {\n    let groups = items === null || items === void 0 ? void 0 : items.map((group, index) => /*#__PURE__*/_jsx(MenuGroup, {\n      label: group.label,\n      children: (group.items || []).map(mapMenuItem(item))\n    }, `${group.label}${index}`));\n\n    if (extraItems) {\n      groups = [...extraItems.map(mapMenuItem(item)), ...groups];\n    }\n\n    return groups;\n  };\n}\n\nfunction mapMenuItem(item) {\n  return function NodeGraphMenuItem(link) {\n    return /*#__PURE__*/_jsx(MenuItem, {\n      url: link.url,\n      label: link.label,\n      ariaLabel: link.ariaLabel,\n      onClick: link.onClick ? () => {\n        var _link$onClick;\n\n        return (_link$onClick = link.onClick) === null || _link$onClick === void 0 ? void 0 : _link$onClick.call(link, item);\n      } : undefined,\n      target: '_self'\n    }, link.label);\n  };\n}\n\nfunction getItems(links) {\n  const defaultGroup = 'Open in Explore';\n  const groups = links.reduce((acc, l) => {\n    let group;\n    let title;\n\n    if (l.title.indexOf('/') !== -1) {\n      group = l.title.split('/')[0];\n      title = l.title.split('/')[1];\n      acc[group] = acc[group] || [];\n      acc[group].push({\n        l,\n        newTitle: title\n      });\n    } else {\n      acc[defaultGroup] = acc[defaultGroup] || [];\n      acc[defaultGroup].push({\n        l\n      });\n    }\n\n    return acc;\n  }, {});\n  return Object.keys(groups).map(key => {\n    return {\n      label: key,\n      ariaLabel: key,\n      items: groups[key].map(link => ({\n        label: link.newTitle || link.l.title,\n        ariaLabel: link.newTitle || link.l.title,\n        url: link.l.href,\n        onClick: link.l.onClick\n      }))\n    };\n  });\n}\n\nfunction NodeHeader(props) {\n  const index = props.node.dataFrameRowIndex;\n  const fields = getNodeFields(props.nodes);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [fields.title && /*#__PURE__*/_jsx(Label, {\n      field: fields.title,\n      index: index\n    }), fields.subTitle && /*#__PURE__*/_jsx(Label, {\n      field: fields.subTitle,\n      index: index\n    }), fields.details.map(f => /*#__PURE__*/_jsx(Label, {\n      field: f,\n      index: index\n    }, f.name))]\n  });\n}\n\nfunction EdgeHeader(props) {\n  const index = props.edge.dataFrameRowIndex;\n  const fields = getEdgeFields(props.edges);\n  return /*#__PURE__*/_jsx(\"div\", {\n    children: fields.details.map(f => /*#__PURE__*/_jsx(Label, {\n      field: f,\n      index: index\n    }, f.name))\n  });\n}\n\nexport const getLabelStyles = stylesFactory(theme => {\n  return {\n    label: css`\n      label: Label;\n      line-height: 1.25;\n      margin: ${theme.spacing.formLabelMargin};\n      padding: ${theme.spacing.formLabelPadding};\n      color: ${theme.colors.textFaint};\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.semibold};\n    `,\n    value: css`\n      label: Value;\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.semibold};\n      color: ${theme.colors.formLabel};\n      margin-top: ${theme.spacing.xxs};\n      display: block;\n    `\n  };\n});\n\nfunction Label(props) {\n  const {\n    field,\n    index\n  } = props;\n  const value = field.values.get(index) || '';\n  const styles = getLabelStyles(useTheme());\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.label,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      children: field.config.displayName || field.name\n    }), /*#__PURE__*/_jsx(\"span\", {\n      className: styles.value,\n      children: value\n    })]\n  });\n}","map":{"version":3,"names":["css","React","useCallback","useState","ContextMenu","MenuGroup","MenuItem","stylesFactory","useTheme","getEdgeFields","getNodeFields","useContextMenu","getLinks","nodes","edges","config","setConfig","setFocusedNodeId","menu","setMenu","undefined","onNodeOpen","event","node","extraNodeItem","gridLayout","label","onClick","id","renderer","getItemsRenderer","dataFrameRowIndex","pageX","pageY","onEdgeOpen","edge","MenuComponent","links","item","extraItems","length","items","getItems","groups","map","group","index","mapMenuItem","NodeGraphMenuItem","link","url","ariaLabel","defaultGroup","reduce","acc","l","title","indexOf","split","push","newTitle","Object","keys","key","href","NodeHeader","props","fields","subTitle","details","f","name","EdgeHeader","getLabelStyles","theme","spacing","formLabelMargin","formLabelPadding","colors","textFaint","typography","size","sm","weight","semibold","value","formLabel","xxs","Label","field","values","get","styles","displayName"],"sources":["/home/soula/grafana/public/app/plugins/panel/nodeGraph/useContextMenu.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { MouseEvent, useCallback, useState } from 'react';\n\nimport { DataFrame, Field, GrafanaTheme, LinkModel } from '@grafana/data';\nimport { ContextMenu, MenuGroup, MenuItem, stylesFactory, useTheme } from '@grafana/ui';\n\nimport { Config } from './layout';\nimport { EdgeDatum, NodeDatum } from './types';\nimport { getEdgeFields, getNodeFields } from './utils';\n\n/**\n * Hook that contains state of the context menu, both for edges and nodes and provides appropriate component when\n * opened context menu should be opened.\n */\nexport function useContextMenu(\n  getLinks: (dataFrame: DataFrame, rowIndex: number) => LinkModel[],\n  nodes: DataFrame,\n  edges: DataFrame,\n  config: Config,\n  setConfig: (config: Config) => void,\n  setFocusedNodeId: (id: string) => void\n): {\n  onEdgeOpen: (event: MouseEvent<SVGElement>, edge: EdgeDatum) => void;\n  onNodeOpen: (event: MouseEvent<SVGElement>, node: NodeDatum) => void;\n  MenuComponent: React.ReactNode;\n} {\n  const [menu, setMenu] = useState<JSX.Element | undefined>(undefined);\n\n  const onNodeOpen = useCallback(\n    (event, node) => {\n      const extraNodeItem = config.gridLayout\n        ? [\n            {\n              label: 'Show in Graph layout',\n              onClick: (node: NodeDatum) => {\n                setFocusedNodeId(node.id);\n                setConfig({ ...config, gridLayout: false });\n              },\n            },\n          ]\n        : undefined;\n      const renderer = getItemsRenderer(getLinks(nodes, node.dataFrameRowIndex), node, extraNodeItem);\n\n      if (renderer) {\n        setMenu(\n          <ContextMenu\n            renderHeader={() => <NodeHeader node={node} nodes={nodes} />}\n            renderMenuItems={renderer}\n            onClose={() => setMenu(undefined)}\n            x={event.pageX}\n            y={event.pageY}\n          />\n        );\n      }\n    },\n    [config, nodes, getLinks, setMenu, setConfig, setFocusedNodeId]\n  );\n\n  const onEdgeOpen = useCallback(\n    (event, edge) => {\n      const renderer = getItemsRenderer(getLinks(edges, edge.dataFrameRowIndex), edge);\n\n      if (renderer) {\n        setMenu(\n          <ContextMenu\n            renderHeader={() => <EdgeHeader edge={edge} edges={edges} />}\n            renderMenuItems={renderer}\n            onClose={() => setMenu(undefined)}\n            x={event.pageX}\n            y={event.pageY}\n          />\n        );\n      }\n    },\n    [edges, getLinks, setMenu]\n  );\n\n  return { onEdgeOpen, onNodeOpen, MenuComponent: menu };\n}\n\nfunction getItemsRenderer<T extends NodeDatum | EdgeDatum>(\n  links: LinkModel[],\n  item: T,\n  extraItems?: Array<LinkData<T>> | undefined\n) {\n  if (!(links.length || extraItems?.length)) {\n    return undefined;\n  }\n  const items = getItems(links);\n  return () => {\n    let groups = items?.map((group, index) => (\n      <MenuGroup key={`${group.label}${index}`} label={group.label}>\n        {(group.items || []).map(mapMenuItem(item))}\n      </MenuGroup>\n    ));\n\n    if (extraItems) {\n      groups = [...extraItems.map(mapMenuItem(item)), ...groups];\n    }\n    return groups;\n  };\n}\n\nfunction mapMenuItem<T extends NodeDatum | EdgeDatum>(item: T) {\n  return function NodeGraphMenuItem(link: LinkData<T>) {\n    return (\n      <MenuItem\n        key={link.label}\n        url={link.url}\n        label={link.label}\n        ariaLabel={link.ariaLabel}\n        onClick={link.onClick ? () => link.onClick?.(item) : undefined}\n        target={'_self'}\n      />\n    );\n  };\n}\n\ntype LinkData<T extends NodeDatum | EdgeDatum> = {\n  label: string;\n  ariaLabel?: string;\n  url?: string;\n  onClick?: (item: T) => void;\n};\n\nfunction getItems(links: LinkModel[]) {\n  const defaultGroup = 'Open in Explore';\n  const groups = links.reduce<{ [group: string]: Array<{ l: LinkModel; newTitle?: string }> }>((acc, l) => {\n    let group;\n    let title;\n    if (l.title.indexOf('/') !== -1) {\n      group = l.title.split('/')[0];\n      title = l.title.split('/')[1];\n      acc[group] = acc[group] || [];\n      acc[group].push({ l, newTitle: title });\n    } else {\n      acc[defaultGroup] = acc[defaultGroup] || [];\n      acc[defaultGroup].push({ l });\n    }\n\n    return acc;\n  }, {});\n\n  return Object.keys(groups).map((key) => {\n    return {\n      label: key,\n      ariaLabel: key,\n      items: groups[key].map((link) => ({\n        label: link.newTitle || link.l.title,\n        ariaLabel: link.newTitle || link.l.title,\n        url: link.l.href,\n        onClick: link.l.onClick,\n      })),\n    };\n  });\n}\n\nfunction NodeHeader(props: { node: NodeDatum; nodes: DataFrame }) {\n  const index = props.node.dataFrameRowIndex;\n  const fields = getNodeFields(props.nodes);\n  return (\n    <div>\n      {fields.title && <Label field={fields.title} index={index} />}\n      {fields.subTitle && <Label field={fields.subTitle} index={index} />}\n      {fields.details.map((f) => (\n        <Label key={f.name} field={f} index={index} />\n      ))}\n    </div>\n  );\n}\n\nfunction EdgeHeader(props: { edge: EdgeDatum; edges: DataFrame }) {\n  const index = props.edge.dataFrameRowIndex;\n  const fields = getEdgeFields(props.edges);\n  return (\n    <div>\n      {fields.details.map((f) => (\n        <Label key={f.name} field={f} index={index} />\n      ))}\n    </div>\n  );\n}\n\nexport const getLabelStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    label: css`\n      label: Label;\n      line-height: 1.25;\n      margin: ${theme.spacing.formLabelMargin};\n      padding: ${theme.spacing.formLabelPadding};\n      color: ${theme.colors.textFaint};\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.semibold};\n    `,\n    value: css`\n      label: Value;\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.semibold};\n      color: ${theme.colors.formLabel};\n      margin-top: ${theme.spacing.xxs};\n      display: block;\n    `,\n  };\n});\nfunction Label(props: { field: Field; index: number }) {\n  const { field, index } = props;\n  const value = field.values.get(index) || '';\n  const styles = getLabelStyles(useTheme());\n\n  return (\n    <div className={styles.label}>\n      <div>{field.config.displayName || field.name}</div>\n      <span className={styles.value}>{value}</span>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}