{"ast":null,"code":"import { defaultIntervals } from '@grafana/ui';\n// getRefreshFromUrl function returns the value from the supplied &refresh= param in url.\n// If the supplied interval is not allowed or does not exist in the refresh intervals for the dashboard then we\n// try to find the first refresh interval that matches the minRefreshInterval (min_refresh_interval in ini)\n// or just take the first interval.\nexport function getRefreshFromUrl({\n  urlRefresh,\n  currentRefresh,\n  isAllowedIntervalFn,\n  minRefreshInterval,\n  refreshIntervals = defaultIntervals\n}) {\n  if (!urlRefresh) {\n    return currentRefresh;\n  }\n\n  const isAllowedInterval = isAllowedIntervalFn(urlRefresh);\n  const isExistingInterval = refreshIntervals.find(interval => interval === urlRefresh);\n\n  if (!isAllowedInterval || !isExistingInterval) {\n    var _ref;\n\n    const minRefreshIntervalInIntervals = minRefreshInterval ? refreshIntervals.find(interval => interval === minRefreshInterval) : undefined;\n    const lowestRefreshInterval = refreshIntervals !== null && refreshIntervals !== void 0 && refreshIntervals.length ? refreshIntervals[0] : undefined;\n    return (_ref = minRefreshIntervalInIntervals !== null && minRefreshIntervalInIntervals !== void 0 ? minRefreshIntervalInIntervals : lowestRefreshInterval) !== null && _ref !== void 0 ? _ref : currentRefresh;\n  }\n\n  return urlRefresh || currentRefresh;\n}","map":{"version":3,"names":["defaultIntervals","getRefreshFromUrl","urlRefresh","currentRefresh","isAllowedIntervalFn","minRefreshInterval","refreshIntervals","isAllowedInterval","isExistingInterval","find","interval","minRefreshIntervalInIntervals","undefined","lowestRefreshInterval","length"],"sources":["/home/soula/grafana/public/app/features/dashboard/utils/getRefreshFromUrl.ts"],"sourcesContent":["import { defaultIntervals } from '@grafana/ui';\n\ninterface Args {\n  urlRefresh: string | null;\n  currentRefresh: string | boolean | undefined;\n  isAllowedIntervalFn: (interval: string) => boolean;\n  minRefreshInterval: string;\n  refreshIntervals?: string[];\n}\n\n// getRefreshFromUrl function returns the value from the supplied &refresh= param in url.\n// If the supplied interval is not allowed or does not exist in the refresh intervals for the dashboard then we\n// try to find the first refresh interval that matches the minRefreshInterval (min_refresh_interval in ini)\n// or just take the first interval.\nexport function getRefreshFromUrl({\n  urlRefresh,\n  currentRefresh,\n  isAllowedIntervalFn,\n  minRefreshInterval,\n  refreshIntervals = defaultIntervals,\n}: Args): string | boolean | undefined {\n  if (!urlRefresh) {\n    return currentRefresh;\n  }\n\n  const isAllowedInterval = isAllowedIntervalFn(urlRefresh);\n  const isExistingInterval = refreshIntervals.find((interval) => interval === urlRefresh);\n\n  if (!isAllowedInterval || !isExistingInterval) {\n    const minRefreshIntervalInIntervals = minRefreshInterval\n      ? refreshIntervals.find((interval) => interval === minRefreshInterval)\n      : undefined;\n    const lowestRefreshInterval = refreshIntervals?.length ? refreshIntervals[0] : undefined;\n\n    return minRefreshIntervalInIntervals ?? lowestRefreshInterval ?? currentRefresh;\n  }\n\n  return urlRefresh || currentRefresh;\n}\n"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,aAAjC;AAUA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAT,CAA2B;EAChCC,UADgC;EAEhCC,cAFgC;EAGhCC,mBAHgC;EAIhCC,kBAJgC;EAKhCC,gBAAgB,GAAGN;AALa,CAA3B,EAMgC;EACrC,IAAI,CAACE,UAAL,EAAiB;IACf,OAAOC,cAAP;EACD;;EAED,MAAMI,iBAAiB,GAAGH,mBAAmB,CAACF,UAAD,CAA7C;EACA,MAAMM,kBAAkB,GAAGF,gBAAgB,CAACG,IAAjB,CAAuBC,QAAD,IAAcA,QAAQ,KAAKR,UAAjD,CAA3B;;EAEA,IAAI,CAACK,iBAAD,IAAsB,CAACC,kBAA3B,EAA+C;IAAA;;IAC7C,MAAMG,6BAA6B,GAAGN,kBAAkB,GACpDC,gBAAgB,CAACG,IAAjB,CAAuBC,QAAD,IAAcA,QAAQ,KAAKL,kBAAjD,CADoD,GAEpDO,SAFJ;IAGA,MAAMC,qBAAqB,GAAGP,gBAAgB,SAAhB,IAAAA,gBAAgB,WAAhB,IAAAA,gBAAgB,CAAEQ,MAAlB,GAA2BR,gBAAgB,CAAC,CAAD,CAA3C,GAAiDM,SAA/E;IAEA,eAAOD,6BAAP,aAAOA,6BAAP,cAAOA,6BAAP,GAAwCE,qBAAxC,uCAAiEV,cAAjE;EACD;;EAED,OAAOD,UAAU,IAAIC,cAArB;AACD"},"metadata":{},"sourceType":"module"}