{"ast":null,"code":"/**\n * Called when upgrading from a previously saved versoin\n */\nexport const graphPanelMigrationHandler = panel => {\n  var _panel$fieldConfig;\n\n  const fieldConfig = (_panel$fieldConfig = panel.fieldConfig) !== null && _panel$fieldConfig !== void 0 ? _panel$fieldConfig : {\n    defaults: {},\n    overrides: []\n  };\n  const options = panel.options || {}; // Move <7.1 dataLinks to the field section\n\n  if (options.dataLinks) {\n    fieldConfig.defaults.links = options.dataLinks;\n    delete options.dataLinks;\n  } // Mutate the original panel state (only necessary because it is angular)\n\n\n  panel.options = options;\n  panel.fieldConfig = fieldConfig;\n  return options;\n};","map":{"version":3,"names":["graphPanelMigrationHandler","panel","fieldConfig","defaults","overrides","options","dataLinks","links"],"sources":["/home/soula/grafana/public/app/plugins/panel/graph/GraphMigrations.ts"],"sourcesContent":["import { PanelModel, FieldConfigSource, DataLink } from '@grafana/data';\n\n/**\n * Called when upgrading from a previously saved versoin\n */\nexport const graphPanelMigrationHandler = (panel: PanelModel<any>): Partial<any> => {\n  const fieldConfig: FieldConfigSource = panel.fieldConfig ?? {\n    defaults: {},\n    overrides: [],\n  };\n\n  const options = panel.options || {};\n\n  // Move <7.1 dataLinks to the field section\n  if (options.dataLinks) {\n    fieldConfig.defaults.links = options.dataLinks as DataLink[];\n    delete options.dataLinks;\n  }\n\n  // Mutate the original panel state (only necessary because it is angular)\n  panel.options = options;\n  panel.fieldConfig = fieldConfig;\n  return options;\n};\n"],"mappings":"AAEA;AACA;AACA;AACA,OAAO,MAAMA,0BAA0B,GAAIC,KAAD,IAA0C;EAAA;;EAClF,MAAMC,WAA8B,yBAAGD,KAAK,CAACC,WAAT,mEAAwB;IAC1DC,QAAQ,EAAE,EADgD;IAE1DC,SAAS,EAAE;EAF+C,CAA5D;EAKA,MAAMC,OAAO,GAAGJ,KAAK,CAACI,OAAN,IAAiB,EAAjC,CANkF,CAQlF;;EACA,IAAIA,OAAO,CAACC,SAAZ,EAAuB;IACrBJ,WAAW,CAACC,QAAZ,CAAqBI,KAArB,GAA6BF,OAAO,CAACC,SAArC;IACA,OAAOD,OAAO,CAACC,SAAf;EACD,CAZiF,CAclF;;;EACAL,KAAK,CAACI,OAAN,GAAgBA,OAAhB;EACAJ,KAAK,CAACC,WAAN,GAAoBA,WAApB;EACA,OAAOG,OAAP;AACD,CAlBM"},"metadata":{},"sourceType":"module"}