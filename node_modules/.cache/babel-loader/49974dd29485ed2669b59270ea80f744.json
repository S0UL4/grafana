{"ast":null,"code":"var _LoadingPlaceholder, _h, _thead, _td, _Icon;\n\nimport { i18n } from \"@lingui/core\";\nimport { withI18n, Trans } from '@lingui/react';\nimport React, { PureComponent } from 'react';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Button, Icon, LoadingPlaceholder } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nclass UserSessions extends PureComponent {\n  render() {\n    const {\n      isLoading,\n      sessions,\n      revokeUserSession,\n      i18n\n    } = this.props;\n\n    if (isLoading) {\n      return _LoadingPlaceholder || (_LoadingPlaceholder = /*#__PURE__*/_jsx(LoadingPlaceholder, {\n        text: /*#__PURE__*/_jsx(Trans, {\n          id: \"user-sessions.loading\",\n          message: \"Loading sessions...\"\n        })\n      }));\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", {\n      children: sessions.length > 0 && /*#__PURE__*/_jsxs(_Fragment, {\n        children: [_h || (_h = /*#__PURE__*/_jsx(\"h3\", {\n          className: \"page-sub-heading\",\n          children: \"Sessions\"\n        })), /*#__PURE__*/_jsx(\"div\", {\n          className: \"gf-form-group\",\n          children: /*#__PURE__*/_jsxs(\"table\", {\n            className: \"filter-table form-inline\",\n            \"data-testid\": selectors.components.UserProfile.sessionsTable,\n            children: [_thead || (_thead = /*#__PURE__*/_jsx(\"thead\", {\n              children: /*#__PURE__*/_jsxs(\"tr\", {\n                children: [/*#__PURE__*/_jsx(\"th\", {\n                  children: /*#__PURE__*/_jsx(Trans, {\n                    id: \"user-session.seen-at-column\",\n                    message: \"Last seen\"\n                  })\n                }), /*#__PURE__*/_jsx(\"th\", {\n                  children: /*#__PURE__*/_jsx(Trans, {\n                    id: \"user-session.created-at-column\",\n                    message: \"Logged on\"\n                  })\n                }), /*#__PURE__*/_jsx(\"th\", {\n                  children: /*#__PURE__*/_jsx(Trans, {\n                    id: \"user-session.ip-column\",\n                    message: \"IP address\"\n                  })\n                }), /*#__PURE__*/_jsx(\"th\", {\n                  children: /*#__PURE__*/_jsx(Trans, {\n                    id: \"user-session.browser-column\",\n                    message: \"Browser & OS\"\n                  })\n                }), /*#__PURE__*/_jsx(\"th\", {})]\n              })\n            })), /*#__PURE__*/_jsx(\"tbody\", {\n              children: sessions.map((session, index) => /*#__PURE__*/_jsxs(\"tr\", {\n                children: [session.isActive ? _td || (_td = /*#__PURE__*/_jsx(\"td\", {\n                  children: \"Now\"\n                })) : /*#__PURE__*/_jsx(\"td\", {\n                  children: session.seenAt\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: i18n.date(session.createdAt, {\n                    dateStyle: 'long'\n                  })\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: session.clientIp\n                }), /*#__PURE__*/_jsxs(\"td\", {\n                  children: [session.browser, \" on \", session.os, \" \", session.osVersion]\n                }), /*#__PURE__*/_jsx(\"td\", {\n                  children: /*#__PURE__*/_jsx(Button, {\n                    size: \"sm\",\n                    variant: \"destructive\",\n                    onClick: () => revokeUserSession(session.id),\n                    \"aria-label\": i18n._(\n                    /*i18n*/\n                    {\n                      id: 'user-session.revoke',\n                      message: 'Revoke user session'\n                    }),\n                    children: _Icon || (_Icon = /*#__PURE__*/_jsx(Icon, {\n                      name: \"power\"\n                    }))\n                  })\n                })]\n              }, index))\n            })]\n          })\n        })]\n      })\n    });\n  }\n\n}\n\nexport default withI18n()(UserSessions);","map":{"version":3,"names":["withI18n","React","PureComponent","selectors","Button","Icon","LoadingPlaceholder","UserSessions","render","isLoading","sessions","revokeUserSession","i18n","props","length","components","UserProfile","sessionsTable","map","session","index","isActive","seenAt","date","createdAt","dateStyle","clientIp","browser","os","osVersion","id"],"sources":["/home/soula/grafana/public/app/features/profile/UserSessions.tsx"],"sourcesContent":["import { t, Trans } from '@lingui/macro';\nimport { withI18n, withI18nProps } from '@lingui/react';\nimport React, { PureComponent } from 'react';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Button, Icon, LoadingPlaceholder } from '@grafana/ui';\nimport { UserSession } from 'app/types';\n\ninterface Props extends withI18nProps {\n  sessions: UserSession[];\n  isLoading: boolean;\n  revokeUserSession: (tokenId: number) => void;\n}\n\nclass UserSessions extends PureComponent<Props> {\n  render() {\n    const { isLoading, sessions, revokeUserSession, i18n } = this.props;\n\n    if (isLoading) {\n      return <LoadingPlaceholder text={<Trans id=\"user-sessions.loading\">Loading sessions...</Trans>} />;\n    }\n\n    return (\n      <div>\n        {sessions.length > 0 && (\n          <>\n            <h3 className=\"page-sub-heading\">Sessions</h3>\n            <div className=\"gf-form-group\">\n              <table className=\"filter-table form-inline\" data-testid={selectors.components.UserProfile.sessionsTable}>\n                <thead>\n                  <tr>\n                    <th>\n                      <Trans id=\"user-session.seen-at-column\">Last seen</Trans>\n                    </th>\n                    <th>\n                      <Trans id=\"user-session.created-at-column\">Logged on</Trans>\n                    </th>\n                    <th>\n                      <Trans id=\"user-session.ip-column\">IP address</Trans>\n                    </th>\n                    <th>\n                      <Trans id=\"user-session.browser-column\">Browser &amp; OS</Trans>\n                    </th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {sessions.map((session: UserSession, index) => (\n                    <tr key={index}>\n                      {session.isActive ? <td>Now</td> : <td>{session.seenAt}</td>}\n                      <td>{i18n.date(session.createdAt, { dateStyle: 'long' })}</td>\n                      <td>{session.clientIp}</td>\n                      <td>\n                        {session.browser} on {session.os} {session.osVersion}\n                      </td>\n                      <td>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() => revokeUserSession(session.id)}\n                          aria-label={t({ id: 'user-session.revoke', message: 'Revoke user session' })}\n                        >\n                          <Icon name=\"power\" />\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withI18n()(UserSessions);\n"],"mappings":";;;AACA,SAASA,QAAT,eAAwC,eAAxC;AACA,OAAOC,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AAEA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,kBAAvB,QAAiD,aAAjD;;;;;AASA,MAAMC,YAAN,SAA2BL,aAA3B,CAAgD;EAC9CM,MAAM,GAAG;IACP,MAAM;MAAEC,SAAF;MAAaC,QAAb;MAAuBC,iBAAvB;MAA0CC;IAA1C,IAAmD,KAAKC,KAA9D;;IAEA,IAAIJ,SAAJ,EAAe;MACb,kEAAO,KAAC,kBAAD;QAAoB,IAAI,eAAE;UAAA;UAAA;QAAA;MAA1B,EAAP;IACD;;IAED,oBACE;MAAA,UACGC,QAAQ,CAACI,MAAT,GAAkB,CAAlB,iBACC;QAAA,oCACE;UAAI,SAAS,EAAC,kBAAd;UAAA;QAAA,EADF,gBAEE;UAAK,SAAS,EAAC,eAAf;UAAA,uBACE;YAAO,SAAS,EAAC,0BAAjB;YAA4C,eAAaX,SAAS,CAACY,UAAV,CAAqBC,WAArB,CAAiCC,aAA1F;YAAA,4CACE;cAAA,uBACE;gBAAA,wBACE;kBAAA,uBACE;oBAAA;oBAAA;kBAAA;gBADF,EADF,eAIE;kBAAA,uBACE;oBAAA;oBAAA;kBAAA;gBADF,EAJF,eAOE;kBAAA,uBACE;oBAAA;oBAAA;kBAAA;gBADF,EAPF,eAUE;kBAAA,uBACE;oBAAA;oBAAA;kBAAA;gBADF,EAVF,eAaE,cAbF;cAAA;YADF,EADF,gBAkBE;cAAA,UACGP,QAAQ,CAACQ,GAAT,CAAa,CAACC,OAAD,EAAuBC,KAAvB,kBACZ;gBAAA,WACGD,OAAO,CAACE,QAAR,8BAAmB;kBAAA;gBAAA,EAAnB,iBAAkC;kBAAA,UAAKF,OAAO,CAACG;gBAAb,EADrC,eAEE;kBAAA,UAAKV,IAAI,CAACW,IAAL,CAAUJ,OAAO,CAACK,SAAlB,EAA6B;oBAAEC,SAAS,EAAE;kBAAb,CAA7B;gBAAL,EAFF,eAGE;kBAAA,UAAKN,OAAO,CAACO;gBAAb,EAHF,eAIE;kBAAA,WACGP,OAAO,CAACQ,OADX,UACwBR,OAAO,CAACS,EADhC,OACqCT,OAAO,CAACU,SAD7C;gBAAA,EAJF,eAOE;kBAAA,uBACE,KAAC,MAAD;oBACE,IAAI,EAAC,IADP;oBAEE,OAAO,EAAC,aAFV;oBAGE,OAAO,EAAE,MAAMlB,iBAAiB,CAACQ,OAAO,CAACW,EAAT,CAHlC;oBAIE;oBAAA;oBAAc;sBAAEA,EAAE,EAAE,qBAAN;sBAAA,SAAsC;oBAAtC,CAAd,CAJF;oBAAA,yCAME,KAAC,IAAD;sBAAM,IAAI,EAAC;oBAAX,EANF;kBAAA;gBADF,EAPF;cAAA,GAASV,KAAT,CADD;YADH,EAlBF;UAAA;QADF,EAFF;MAAA;IAFJ,EADF;EAoDD;;AA5D6C;;AA+DhD,eAAepB,QAAQ,GAAGO,YAAH,CAAvB"},"metadata":{},"sourceType":"module"}