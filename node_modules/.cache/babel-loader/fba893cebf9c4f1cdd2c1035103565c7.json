{"ast":null,"code":"var _thead;\n\nimport { css } from '@emotion/css';\nimport React from 'react';\nimport { dateTimeFormat } from '@grafana/data';\nimport { DeleteButton, Icon, Tooltip, useStyles2, useTheme2 } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const ServiceAccountTokensTable = ({\n  tokens,\n  timeZone,\n  tokenActionsDisabled,\n  onDelete\n}) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  return /*#__PURE__*/_jsxs(\"table\", {\n    className: \"filter-table\",\n    children: [_thead || (_thead = /*#__PURE__*/_jsx(\"thead\", {\n      children: /*#__PURE__*/_jsxs(\"tr\", {\n        children: [/*#__PURE__*/_jsx(\"th\", {\n          children: \"Name\"\n        }), /*#__PURE__*/_jsx(\"th\", {\n          children: \"Expires\"\n        }), /*#__PURE__*/_jsx(\"th\", {\n          children: \"Created\"\n        }), /*#__PURE__*/_jsx(\"th\", {})]\n      })\n    })), /*#__PURE__*/_jsx(\"tbody\", {\n      children: tokens.map(key => {\n        return /*#__PURE__*/_jsxs(\"tr\", {\n          className: styles.tableRow(key.hasExpired),\n          children: [/*#__PURE__*/_jsx(\"td\", {\n            children: key.name\n          }), /*#__PURE__*/_jsx(\"td\", {\n            children: /*#__PURE__*/_jsx(TokenExpiration, {\n              timeZone: timeZone,\n              token: key\n            })\n          }), /*#__PURE__*/_jsx(\"td\", {\n            children: formatDate(timeZone, key.created)\n          }), /*#__PURE__*/_jsx(\"td\", {\n            children: /*#__PURE__*/_jsx(DeleteButton, {\n              \"aria-label\": `Delete service account token ${key.name}`,\n              size: \"sm\",\n              onConfirm: () => onDelete(key),\n              disabled: tokenActionsDisabled\n            })\n          })]\n        }, key.id);\n      })\n    })]\n  });\n};\n\nfunction formatDate(timeZone, expiration) {\n  if (!expiration) {\n    return 'No expiration date';\n  }\n\n  return dateTimeFormat(expiration, {\n    timeZone\n  });\n}\n\nfunction formatSecondsLeftUntilExpiration(secondsUntilExpiration) {\n  const days = Math.ceil(secondsUntilExpiration / (3600 * 24));\n  const daysFormat = days > 1 ? `${days} days` : `${days} day`;\n  return `Expires in ${daysFormat}`;\n}\n\nconst TokenExpiration = ({\n  timeZone,\n  token\n}) => {\n  const styles = useStyles2(getStyles);\n\n  if (!token.expiration) {\n    return /*#__PURE__*/_jsx(\"span\", {\n      className: styles.neverExpire,\n      children: \"Never\"\n    });\n  }\n\n  if (token.secondsUntilExpiration) {\n    return /*#__PURE__*/_jsx(\"span\", {\n      className: styles.secondsUntilExpiration,\n      children: formatSecondsLeftUntilExpiration(token.secondsUntilExpiration)\n    });\n  }\n\n  if (token.hasExpired) {\n    return /*#__PURE__*/_jsxs(\"span\", {\n      className: styles.hasExpired,\n      children: [\"Expired\", /*#__PURE__*/_jsx(\"span\", {\n        className: styles.tooltipContainer,\n        children: /*#__PURE__*/_jsx(Tooltip, {\n          content: \"This token has expired\",\n          children: /*#__PURE__*/_jsx(Icon, {\n            name: \"exclamation-triangle\",\n            className: styles.toolTipIcon\n          })\n        })\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsx(\"span\", {\n    children: formatDate(timeZone, token.expiration)\n  });\n};\n\nconst getStyles = theme => ({\n  tableRow: hasExpired => css`\n    color: ${hasExpired ? theme.colors.text.secondary : theme.colors.text.primary};\n  `,\n  tooltipContainer: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n  toolTipIcon: css`\n    color: ${theme.colors.error.text};\n  `,\n  secondsUntilExpiration: css`\n    color: ${theme.colors.warning.text};\n  `,\n  hasExpired: css`\n    color: ${theme.colors.error.text};\n  `,\n  neverExpire: css`\n    color: ${theme.colors.text.secondary};\n  `\n});","map":{"version":3,"names":["css","React","dateTimeFormat","DeleteButton","Icon","Tooltip","useStyles2","useTheme2","ServiceAccountTokensTable","tokens","timeZone","tokenActionsDisabled","onDelete","theme","styles","getStyles","map","key","tableRow","hasExpired","name","formatDate","created","id","expiration","formatSecondsLeftUntilExpiration","secondsUntilExpiration","days","Math","ceil","daysFormat","TokenExpiration","token","neverExpire","tooltipContainer","toolTipIcon","colors","text","secondary","primary","spacing","error","warning"],"sources":["/home/soula/grafana/public/app/features/serviceaccounts/components/ServiceAccountTokensTable.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { dateTimeFormat, GrafanaTheme2, TimeZone } from '@grafana/data';\nimport { DeleteButton, Icon, Tooltip, useStyles2, useTheme2 } from '@grafana/ui';\nimport { ApiKey } from 'app/types';\n\ninterface Props {\n  tokens: ApiKey[];\n  timeZone: TimeZone;\n  tokenActionsDisabled?: boolean;\n  onDelete: (token: ApiKey) => void;\n}\n\nexport const ServiceAccountTokensTable = ({ tokens, timeZone, tokenActionsDisabled, onDelete }: Props): JSX.Element => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  return (\n    <table className=\"filter-table\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Expires</th>\n          <th>Created</th>\n          <th />\n        </tr>\n      </thead>\n      <tbody>\n        {tokens.map((key) => {\n          return (\n            <tr key={key.id} className={styles.tableRow(key.hasExpired)}>\n              <td>{key.name}</td>\n              <td>\n                <TokenExpiration timeZone={timeZone} token={key} />\n              </td>\n              <td>{formatDate(timeZone, key.created)}</td>\n              <td>\n                <DeleteButton\n                  aria-label={`Delete service account token ${key.name}`}\n                  size=\"sm\"\n                  onConfirm={() => onDelete(key)}\n                  disabled={tokenActionsDisabled}\n                />\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nfunction formatDate(timeZone: TimeZone, expiration?: string): string {\n  if (!expiration) {\n    return 'No expiration date';\n  }\n  return dateTimeFormat(expiration, { timeZone });\n}\n\nfunction formatSecondsLeftUntilExpiration(secondsUntilExpiration: number): string {\n  const days = Math.ceil(secondsUntilExpiration / (3600 * 24));\n  const daysFormat = days > 1 ? `${days} days` : `${days} day`;\n  return `Expires in ${daysFormat}`;\n}\n\ninterface TokenExpirationProps {\n  timeZone: TimeZone;\n  token: ApiKey;\n}\n\nconst TokenExpiration = ({ timeZone, token }: TokenExpirationProps) => {\n  const styles = useStyles2(getStyles);\n  if (!token.expiration) {\n    return <span className={styles.neverExpire}>Never</span>;\n  }\n  if (token.secondsUntilExpiration) {\n    return (\n      <span className={styles.secondsUntilExpiration}>\n        {formatSecondsLeftUntilExpiration(token.secondsUntilExpiration)}\n      </span>\n    );\n  }\n  if (token.hasExpired) {\n    return (\n      <span className={styles.hasExpired}>\n        Expired\n        <span className={styles.tooltipContainer}>\n          <Tooltip content=\"This token has expired\">\n            <Icon name=\"exclamation-triangle\" className={styles.toolTipIcon} />\n          </Tooltip>\n        </span>\n      </span>\n    );\n  }\n  return <span>{formatDate(timeZone, token.expiration)}</span>;\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tableRow: (hasExpired: boolean | undefined) => css`\n    color: ${hasExpired ? theme.colors.text.secondary : theme.colors.text.primary};\n  `,\n  tooltipContainer: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n  toolTipIcon: css`\n    color: ${theme.colors.error.text};\n  `,\n  secondsUntilExpiration: css`\n    color: ${theme.colors.warning.text};\n  `,\n  hasExpired: css`\n    color: ${theme.colors.error.text};\n  `,\n  neverExpire: css`\n    color: ${theme.colors.text.secondary};\n  `,\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}