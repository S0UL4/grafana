{"ast":null,"code":"import React, { useEffect, useMemo, useState } from 'react';\nimport { Select } from '@grafana/ui';\nimport { SELECT_WIDTH } from '../constants';\nimport { QueryEditorRow } from '.';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function Project({\n  refId,\n  projectName,\n  datasource,\n  onChange,\n  templateVariableOptions\n}) {\n  const [projects, setProjects] = useState([]);\n  useEffect(() => {\n    datasource.getProjects().then(projects => setProjects(projects));\n  }, [datasource]);\n  const projectsWithTemplateVariables = useMemo(() => [projects, {\n    label: 'Template Variables',\n    options: templateVariableOptions\n  }, ...projects], [projects, templateVariableOptions]);\n  return /*#__PURE__*/_jsx(QueryEditorRow, {\n    label: \"Project\",\n    htmlFor: `${refId}-project`,\n    children: /*#__PURE__*/_jsx(Select, {\n      width: SELECT_WIDTH,\n      allowCustomValue: true,\n      formatCreateLabel: v => `Use project: ${v}`,\n      onChange: ({\n        value\n      }) => onChange(value),\n      options: projectsWithTemplateVariables,\n      value: {\n        value: projectName,\n        label: projectName\n      },\n      placeholder: \"Select Project\",\n      inputId: `${refId}-project`\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useMemo","useState","Select","SELECT_WIDTH","QueryEditorRow","Project","refId","projectName","datasource","onChange","templateVariableOptions","projects","setProjects","getProjects","then","projectsWithTemplateVariables","label","options","v","value"],"sources":["/home/soula/grafana/public/app/plugins/datasource/cloud-monitoring/components/Project.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { SELECT_WIDTH } from '../constants';\nimport CloudMonitoringDatasource from '../datasource';\n\nimport { QueryEditorRow } from '.';\n\nexport interface Props {\n  refId: string;\n  datasource: CloudMonitoringDatasource;\n  onChange: (projectName: string) => void;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  projectName: string;\n}\n\nexport function Project({ refId, projectName, datasource, onChange, templateVariableOptions }: Props) {\n  const [projects, setProjects] = useState<Array<SelectableValue<string>>>([]);\n  useEffect(() => {\n    datasource.getProjects().then((projects) => setProjects(projects));\n  }, [datasource]);\n\n  const projectsWithTemplateVariables = useMemo(\n    () => [\n      projects,\n      {\n        label: 'Template Variables',\n        options: templateVariableOptions,\n      },\n      ...projects,\n    ],\n    [projects, templateVariableOptions]\n  );\n\n  return (\n    <QueryEditorRow label=\"Project\" htmlFor={`${refId}-project`}>\n      <Select\n        width={SELECT_WIDTH}\n        allowCustomValue\n        formatCreateLabel={(v) => `Use project: ${v}`}\n        onChange={({ value }) => onChange(value!)}\n        options={projectsWithTemplateVariables}\n        value={{ value: projectName, label: projectName }}\n        placeholder=\"Select Project\"\n        inputId={`${refId}-project`}\n      />\n    </QueryEditorRow>\n  );\n}\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,OAA3B,EAAoCC,QAApC,QAAoD,OAApD;AAGA,SAASC,MAAT,QAAuB,aAAvB;AAEA,SAASC,YAAT,QAA6B,cAA7B;AAGA,SAASC,cAAT,QAA+B,GAA/B;;AAUA,OAAO,SAASC,OAAT,CAAiB;EAAEC,KAAF;EAASC,WAAT;EAAsBC,UAAtB;EAAkCC,QAAlC;EAA4CC;AAA5C,CAAjB,EAA+F;EACpG,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAiC,EAAjC,CAAxC;EACAF,SAAS,CAAC,MAAM;IACdS,UAAU,CAACK,WAAX,GAAyBC,IAAzB,CAA+BH,QAAD,IAAcC,WAAW,CAACD,QAAD,CAAvD;EACD,CAFQ,EAEN,CAACH,UAAD,CAFM,CAAT;EAIA,MAAMO,6BAA6B,GAAGf,OAAO,CAC3C,MAAM,CACJW,QADI,EAEJ;IACEK,KAAK,EAAE,oBADT;IAEEC,OAAO,EAAEP;EAFX,CAFI,EAMJ,GAAGC,QANC,CADqC,EAS3C,CAACA,QAAD,EAAWD,uBAAX,CAT2C,CAA7C;EAYA,oBACE,KAAC,cAAD;IAAgB,KAAK,EAAC,SAAtB;IAAgC,OAAO,EAAG,GAAEJ,KAAM,UAAlD;IAAA,uBACE,KAAC,MAAD;MACE,KAAK,EAAEH,YADT;MAEE,gBAAgB,MAFlB;MAGE,iBAAiB,EAAGe,CAAD,IAAQ,gBAAeA,CAAE,EAH9C;MAIE,QAAQ,EAAE,CAAC;QAAEC;MAAF,CAAD,KAAeV,QAAQ,CAACU,KAAD,CAJnC;MAKE,OAAO,EAAEJ,6BALX;MAME,KAAK,EAAE;QAAEI,KAAK,EAAEZ,WAAT;QAAsBS,KAAK,EAAET;MAA7B,CANT;MAOE,WAAW,EAAC,gBAPd;MAQE,OAAO,EAAG,GAAED,KAAM;IARpB;EADF,EADF;AAcD"},"metadata":{},"sourceType":"module"}