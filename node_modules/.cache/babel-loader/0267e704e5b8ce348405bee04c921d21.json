{"ast":null,"code":"import React from 'react';\nimport { toOption } from '@grafana/data';\nimport { AccessoryButton, EditorField, EditorFieldGroup, InputGroup } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\nimport { ASC, DESC, STATISTICS } from '../../cloudwatch-sql/language';\nimport { appendTemplateVariables } from '../../utils/utils';\nimport { setOrderBy, setSql } from './utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst orderByDirections = [{\n  label: ASC,\n  value: ASC\n}, {\n  label: DESC,\n  value: DESC\n}];\n\nconst SQLOrderByGroup = ({\n  query,\n  onQueryChange,\n  datasource\n}) => {\n  var _query$sql, _sql$orderBy;\n\n  const sql = (_query$sql = query.sql) !== null && _query$sql !== void 0 ? _query$sql : {};\n  const orderBy = (_sql$orderBy = sql.orderBy) === null || _sql$orderBy === void 0 ? void 0 : _sql$orderBy.name;\n  const orderByDirection = sql.orderByDirection;\n  return /*#__PURE__*/_jsxs(EditorFieldGroup, {\n    children: [/*#__PURE__*/_jsx(EditorField, {\n      label: \"Order by\",\n      optional: true,\n      width: 16,\n      children: /*#__PURE__*/_jsxs(InputGroup, {\n        children: [/*#__PURE__*/_jsx(Select, {\n          \"aria-label\": \"Order by\",\n          onChange: ({\n            value\n          }) => value && onQueryChange(setOrderBy(query, value)),\n          options: appendTemplateVariables(datasource, STATISTICS.map(toOption)),\n          value: orderBy ? toOption(orderBy) : null\n        }), orderBy && /*#__PURE__*/_jsx(AccessoryButton, {\n          \"aria-label\": \"remove\",\n          icon: \"times\",\n          variant: \"secondary\",\n          onClick: () => onQueryChange(setSql(query, {\n            orderBy: undefined\n          }))\n        })]\n      })\n    }), /*#__PURE__*/_jsx(EditorField, {\n      label: \"Direction\",\n      disabled: !orderBy,\n      width: 16,\n      children: /*#__PURE__*/_jsx(Select, {\n        \"aria-label\": \"Direction\",\n        inputId: \"cloudwatch-sql-order-by-direction\",\n        value: orderByDirection ? toOption(orderByDirection) : orderByDirections[0],\n        options: appendTemplateVariables(datasource, orderByDirections),\n        onChange: item => item && onQueryChange(setSql(query, {\n          orderByDirection: item.value\n        }))\n      })\n    })]\n  });\n};\n\nexport default SQLOrderByGroup;","map":{"version":3,"names":["React","toOption","AccessoryButton","EditorField","EditorFieldGroup","InputGroup","Select","ASC","DESC","STATISTICS","appendTemplateVariables","setOrderBy","setSql","orderByDirections","label","value","SQLOrderByGroup","query","onQueryChange","datasource","sql","orderBy","name","orderByDirection","map","undefined","item"],"sources":["/home/soula/grafana/public/app/plugins/datasource/cloudwatch/components/SQLBuilderEditor/SQLOrderByGroup.tsx"],"sourcesContent":["import React from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { AccessoryButton, EditorField, EditorFieldGroup, InputGroup } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { ASC, DESC, STATISTICS } from '../../cloudwatch-sql/language';\nimport { CloudWatchDatasource } from '../../datasource';\nimport { CloudWatchMetricsQuery } from '../../types';\nimport { appendTemplateVariables } from '../../utils/utils';\n\nimport { setOrderBy, setSql } from './utils';\n\ninterface SQLBuilderSelectRowProps {\n  query: CloudWatchMetricsQuery;\n  datasource: CloudWatchDatasource;\n  onQueryChange: (query: CloudWatchMetricsQuery) => void;\n}\n\nconst orderByDirections: Array<SelectableValue<string>> = [\n  { label: ASC, value: ASC },\n  { label: DESC, value: DESC },\n];\n\nconst SQLOrderByGroup: React.FC<SQLBuilderSelectRowProps> = ({ query, onQueryChange, datasource }) => {\n  const sql = query.sql ?? {};\n  const orderBy = sql.orderBy?.name;\n  const orderByDirection = sql.orderByDirection;\n\n  return (\n    <EditorFieldGroup>\n      <EditorField label=\"Order by\" optional width={16}>\n        <InputGroup>\n          <Select\n            aria-label=\"Order by\"\n            onChange={({ value }) => value && onQueryChange(setOrderBy(query, value))}\n            options={appendTemplateVariables(datasource, STATISTICS.map(toOption))}\n            value={orderBy ? toOption(orderBy) : null}\n          />\n          {orderBy && (\n            <AccessoryButton\n              aria-label=\"remove\"\n              icon=\"times\"\n              variant=\"secondary\"\n              onClick={() => onQueryChange(setSql(query, { orderBy: undefined }))}\n            />\n          )}\n        </InputGroup>\n      </EditorField>\n\n      <EditorField label=\"Direction\" disabled={!orderBy} width={16}>\n        <Select\n          aria-label=\"Direction\"\n          inputId=\"cloudwatch-sql-order-by-direction\"\n          value={orderByDirection ? toOption(orderByDirection) : orderByDirections[0]}\n          options={appendTemplateVariables(datasource, orderByDirections)}\n          onChange={(item) => item && onQueryChange(setSql(query, { orderByDirection: item.value }))}\n        />\n      </EditorField>\n    </EditorFieldGroup>\n  );\n};\n\nexport default SQLOrderByGroup;\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAA0BC,QAA1B,QAA0C,eAA1C;AACA,SAASC,eAAT,EAA0BC,WAA1B,EAAuCC,gBAAvC,EAAyDC,UAAzD,QAA2E,uBAA3E;AACA,SAASC,MAAT,QAAuB,aAAvB;AAEA,SAASC,GAAT,EAAcC,IAAd,EAAoBC,UAApB,QAAsC,+BAAtC;AAGA,SAASC,uBAAT,QAAwC,mBAAxC;AAEA,SAASC,UAAT,EAAqBC,MAArB,QAAmC,SAAnC;;;AAQA,MAAMC,iBAAiD,GAAG,CACxD;EAAEC,KAAK,EAAEP,GAAT;EAAcQ,KAAK,EAAER;AAArB,CADwD,EAExD;EAAEO,KAAK,EAAEN,IAAT;EAAeO,KAAK,EAAEP;AAAtB,CAFwD,CAA1D;;AAKA,MAAMQ,eAAmD,GAAG,CAAC;EAAEC,KAAF;EAASC,aAAT;EAAwBC;AAAxB,CAAD,KAA0C;EAAA;;EACpG,MAAMC,GAAG,iBAAGH,KAAK,CAACG,GAAT,mDAAgB,EAAzB;EACA,MAAMC,OAAO,mBAAGD,GAAG,CAACC,OAAP,iDAAG,aAAaC,IAA7B;EACA,MAAMC,gBAAgB,GAAGH,GAAG,CAACG,gBAA7B;EAEA,oBACE,MAAC,gBAAD;IAAA,wBACE,KAAC,WAAD;MAAa,KAAK,EAAC,UAAnB;MAA8B,QAAQ,MAAtC;MAAuC,KAAK,EAAE,EAA9C;MAAA,uBACE,MAAC,UAAD;QAAA,wBACE,KAAC,MAAD;UACE,cAAW,UADb;UAEE,QAAQ,EAAE,CAAC;YAAER;UAAF,CAAD,KAAeA,KAAK,IAAIG,aAAa,CAACP,UAAU,CAACM,KAAD,EAAQF,KAAR,CAAX,CAFjD;UAGE,OAAO,EAAEL,uBAAuB,CAACS,UAAD,EAAaV,UAAU,CAACe,GAAX,CAAevB,QAAf,CAAb,CAHlC;UAIE,KAAK,EAAEoB,OAAO,GAAGpB,QAAQ,CAACoB,OAAD,CAAX,GAAuB;QAJvC,EADF,EAOGA,OAAO,iBACN,KAAC,eAAD;UACE,cAAW,QADb;UAEE,IAAI,EAAC,OAFP;UAGE,OAAO,EAAC,WAHV;UAIE,OAAO,EAAE,MAAMH,aAAa,CAACN,MAAM,CAACK,KAAD,EAAQ;YAAEI,OAAO,EAAEI;UAAX,CAAR,CAAP;QAJ9B,EARJ;MAAA;IADF,EADF,eAoBE,KAAC,WAAD;MAAa,KAAK,EAAC,WAAnB;MAA+B,QAAQ,EAAE,CAACJ,OAA1C;MAAmD,KAAK,EAAE,EAA1D;MAAA,uBACE,KAAC,MAAD;QACE,cAAW,WADb;QAEE,OAAO,EAAC,mCAFV;QAGE,KAAK,EAAEE,gBAAgB,GAAGtB,QAAQ,CAACsB,gBAAD,CAAX,GAAgCV,iBAAiB,CAAC,CAAD,CAH1E;QAIE,OAAO,EAAEH,uBAAuB,CAACS,UAAD,EAAaN,iBAAb,CAJlC;QAKE,QAAQ,EAAGa,IAAD,IAAUA,IAAI,IAAIR,aAAa,CAACN,MAAM,CAACK,KAAD,EAAQ;UAAEM,gBAAgB,EAAEG,IAAI,CAACX;QAAzB,CAAR,CAAP;MAL3C;IADF,EApBF;EAAA,EADF;AAgCD,CArCD;;AAuCA,eAAeC,eAAf"},"metadata":{},"sourceType":"module"}