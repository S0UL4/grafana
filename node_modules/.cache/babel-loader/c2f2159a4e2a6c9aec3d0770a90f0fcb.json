{"ast":null,"code":"import React, { useCallback, useState } from 'react';\nimport { Input } from '@grafana/ui';\nimport { Field } from '../Field';\nimport { setLegendAlias } from './setQueryValue';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst LegendFormatField = ({\n  onQueryChange,\n  query\n}) => {\n  var _query$azureMonitor$a, _query$azureMonitor;\n\n  const [value, setValue] = useState((_query$azureMonitor$a = (_query$azureMonitor = query.azureMonitor) === null || _query$azureMonitor === void 0 ? void 0 : _query$azureMonitor.alias) !== null && _query$azureMonitor$a !== void 0 ? _query$azureMonitor$a : ''); // As calling onQueryChange initiates a the datasource refresh, we only want to call it once\n  // the field loses focus\n\n  const handleChange = useCallback(ev => {\n    if (ev.target instanceof HTMLInputElement) {\n      setValue(ev.target.value);\n    }\n  }, []);\n  const handleBlur = useCallback(() => {\n    const newQuery = setLegendAlias(query, value);\n    onQueryChange(newQuery);\n  }, [onQueryChange, query, value]);\n  return /*#__PURE__*/_jsx(Field, {\n    label: \"Legend format\",\n    children: /*#__PURE__*/_jsx(Input, {\n      id: \"azure-monitor-metrics-legend-field\",\n      placeholder: \"Alias patterns\",\n      value: value,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      width: 38\n    })\n  });\n};\n\nexport default LegendFormatField;","map":{"version":3,"names":["React","useCallback","useState","Input","Field","setLegendAlias","LegendFormatField","onQueryChange","query","value","setValue","azureMonitor","alias","handleChange","ev","target","HTMLInputElement","handleBlur","newQuery"],"sources":["/home/soula/grafana/public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MetricsQueryEditor/LegendFormatField.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\n\nimport { Input } from '@grafana/ui';\n\nimport { AzureQueryEditorFieldProps } from '../../types';\nimport { Field } from '../Field';\n\nimport { setLegendAlias } from './setQueryValue';\n\nconst LegendFormatField: React.FC<AzureQueryEditorFieldProps> = ({ onQueryChange, query }) => {\n  const [value, setValue] = useState<string>(query.azureMonitor?.alias ?? '');\n\n  // As calling onQueryChange initiates a the datasource refresh, we only want to call it once\n  // the field loses focus\n  const handleChange = useCallback((ev: React.FormEvent) => {\n    if (ev.target instanceof HTMLInputElement) {\n      setValue(ev.target.value);\n    }\n  }, []);\n\n  const handleBlur = useCallback(() => {\n    const newQuery = setLegendAlias(query, value);\n    onQueryChange(newQuery);\n  }, [onQueryChange, query, value]);\n\n  return (\n    <Field label=\"Legend format\">\n      <Input\n        id=\"azure-monitor-metrics-legend-field\"\n        placeholder=\"Alias patterns\"\n        value={value}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        width={38}\n      />\n    </Field>\n  );\n};\n\nexport default LegendFormatField;\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,QAA6C,OAA7C;AAEA,SAASC,KAAT,QAAsB,aAAtB;AAGA,SAASC,KAAT,QAAsB,UAAtB;AAEA,SAASC,cAAT,QAA+B,iBAA/B;;;AAEA,MAAMC,iBAAuD,GAAG,CAAC;EAAEC,aAAF;EAAiBC;AAAjB,CAAD,KAA8B;EAAA;;EAC5F,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,iDAASM,KAAK,CAACG,YAAf,wDAAS,oBAAoBC,KAA7B,yEAAsC,EAAtC,CAAlC,CAD4F,CAG5F;EACA;;EACA,MAAMC,YAAY,GAAGZ,WAAW,CAAEa,EAAD,IAAyB;IACxD,IAAIA,EAAE,CAACC,MAAH,YAAqBC,gBAAzB,EAA2C;MACzCN,QAAQ,CAACI,EAAE,CAACC,MAAH,CAAUN,KAAX,CAAR;IACD;EACF,CAJ+B,EAI7B,EAJ6B,CAAhC;EAMA,MAAMQ,UAAU,GAAGhB,WAAW,CAAC,MAAM;IACnC,MAAMiB,QAAQ,GAAGb,cAAc,CAACG,KAAD,EAAQC,KAAR,CAA/B;IACAF,aAAa,CAACW,QAAD,CAAb;EACD,CAH6B,EAG3B,CAACX,aAAD,EAAgBC,KAAhB,EAAuBC,KAAvB,CAH2B,CAA9B;EAKA,oBACE,KAAC,KAAD;IAAO,KAAK,EAAC,eAAb;IAAA,uBACE,KAAC,KAAD;MACE,EAAE,EAAC,oCADL;MAEE,WAAW,EAAC,gBAFd;MAGE,KAAK,EAAEA,KAHT;MAIE,QAAQ,EAAEI,YAJZ;MAKE,MAAM,EAAEI,UALV;MAME,KAAK,EAAE;IANT;EADF,EADF;AAYD,CA5BD;;AA8BA,eAAeX,iBAAf"},"metadata":{},"sourceType":"module"}