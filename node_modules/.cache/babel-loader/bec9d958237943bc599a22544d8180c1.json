{"ast":null,"code":"import angular from 'angular';\nimport $ from 'jquery';\nimport { extend } from 'lodash';\nconst $win = $(window);\n\n$.fn.place_tt = (() => {\n  const defaults = {\n    offset: 5\n  };\n  return function (x, y, opts) {\n    opts = $.extend(true, {}, defaults, opts);\n    return this.each(() => {\n      const $tooltip = $(this);\n      let width, height;\n      $tooltip.addClass('grafana-tooltip');\n      $('#tooltip').remove();\n      $tooltip.appendTo(document.body);\n\n      if (opts.compile) {\n        angular.element(document).injector().invoke(['$compile', '$rootScope', ($compile, $rootScope) => {\n          const tmpScope = $rootScope.$new(true);\n          extend(tmpScope, opts.scopeData);\n          $compile($tooltip)(tmpScope);\n          tmpScope.$digest();\n          tmpScope.$destroy();\n        }]);\n      }\n\n      width = $tooltip.outerWidth(true);\n      height = $tooltip.outerHeight(true);\n      const left = x + opts.offset + width > $win.width() ? x - opts.offset - width : x + opts.offset;\n      const top = y + opts.offset + height > $win.height() ? y - opts.offset - height : y + opts.offset;\n      $tooltip.css('left', left > 0 ? left : 0);\n      $tooltip.css('top', top > 0 ? top : 0);\n    });\n  };\n})();","map":{"version":3,"names":["angular","$","extend","$win","window","fn","place_tt","defaults","offset","x","y","opts","each","$tooltip","width","height","addClass","remove","appendTo","document","body","compile","element","injector","invoke","$compile","$rootScope","tmpScope","$new","scopeData","$digest","$destroy","outerWidth","outerHeight","left","top","css"],"sources":["/home/soula/grafana/public/app/angular/jquery_extended.ts"],"sourcesContent":["import angular from 'angular';\nimport $ from 'jquery';\nimport { extend } from 'lodash';\n\nconst $win = $(window);\n\n$.fn.place_tt = (() => {\n  const defaults = {\n    offset: 5,\n  };\n\n  return function (this: any, x: number, y: number, opts: any) {\n    opts = $.extend(true, {}, defaults, opts);\n\n    return this.each(() => {\n      const $tooltip = $(this);\n      let width, height;\n\n      $tooltip.addClass('grafana-tooltip');\n\n      $('#tooltip').remove();\n      $tooltip.appendTo(document.body);\n\n      if (opts.compile) {\n        angular\n          .element(document)\n          .injector()\n          .invoke([\n            '$compile',\n            '$rootScope',\n            ($compile, $rootScope) => {\n              const tmpScope = $rootScope.$new(true);\n              extend(tmpScope, opts.scopeData);\n\n              $compile($tooltip)(tmpScope);\n              tmpScope.$digest();\n              tmpScope.$destroy();\n            },\n          ]);\n      }\n\n      width = $tooltip.outerWidth(true)!;\n      height = $tooltip.outerHeight(true)!;\n\n      const left = x + opts.offset + width > $win.width()! ? x - opts.offset - width : x + opts.offset;\n      const top = y + opts.offset + height > $win.height()! ? y - opts.offset - height : y + opts.offset;\n\n      $tooltip.css('left', left > 0 ? left : 0);\n      $tooltip.css('top', top > 0 ? top : 0);\n    });\n  };\n})();\n"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,MAAT,QAAuB,QAAvB;AAEA,MAAMC,IAAI,GAAGF,CAAC,CAACG,MAAD,CAAd;;AAEAH,CAAC,CAACI,EAAF,CAAKC,QAAL,GAAgB,CAAC,MAAM;EACrB,MAAMC,QAAQ,GAAG;IACfC,MAAM,EAAE;EADO,CAAjB;EAIA,OAAO,UAAqBC,CAArB,EAAgCC,CAAhC,EAA2CC,IAA3C,EAAsD;IAC3DA,IAAI,GAAGV,CAAC,CAACC,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBK,QAAnB,EAA6BI,IAA7B,CAAP;IAEA,OAAO,KAAKC,IAAL,CAAU,MAAM;MACrB,MAAMC,QAAQ,GAAGZ,CAAC,CAAC,IAAD,CAAlB;MACA,IAAIa,KAAJ,EAAWC,MAAX;MAEAF,QAAQ,CAACG,QAAT,CAAkB,iBAAlB;MAEAf,CAAC,CAAC,UAAD,CAAD,CAAcgB,MAAd;MACAJ,QAAQ,CAACK,QAAT,CAAkBC,QAAQ,CAACC,IAA3B;;MAEA,IAAIT,IAAI,CAACU,OAAT,EAAkB;QAChBrB,OAAO,CACJsB,OADH,CACWH,QADX,EAEGI,QAFH,GAGGC,MAHH,CAGU,CACN,UADM,EAEN,YAFM,EAGN,CAACC,QAAD,EAAWC,UAAX,KAA0B;UACxB,MAAMC,QAAQ,GAAGD,UAAU,CAACE,IAAX,CAAgB,IAAhB,CAAjB;UACA1B,MAAM,CAACyB,QAAD,EAAWhB,IAAI,CAACkB,SAAhB,CAAN;UAEAJ,QAAQ,CAACZ,QAAD,CAAR,CAAmBc,QAAnB;UACAA,QAAQ,CAACG,OAAT;UACAH,QAAQ,CAACI,QAAT;QACD,CAVK,CAHV;MAeD;;MAEDjB,KAAK,GAAGD,QAAQ,CAACmB,UAAT,CAAoB,IAApB,CAAR;MACAjB,MAAM,GAAGF,QAAQ,CAACoB,WAAT,CAAqB,IAArB,CAAT;MAEA,MAAMC,IAAI,GAAGzB,CAAC,GAAGE,IAAI,CAACH,MAAT,GAAkBM,KAAlB,GAA0BX,IAAI,CAACW,KAAL,EAA1B,GAA0CL,CAAC,GAAGE,IAAI,CAACH,MAAT,GAAkBM,KAA5D,GAAoEL,CAAC,GAAGE,IAAI,CAACH,MAA1F;MACA,MAAM2B,GAAG,GAAGzB,CAAC,GAAGC,IAAI,CAACH,MAAT,GAAkBO,MAAlB,GAA2BZ,IAAI,CAACY,MAAL,EAA3B,GAA4CL,CAAC,GAAGC,IAAI,CAACH,MAAT,GAAkBO,MAA9D,GAAuEL,CAAC,GAAGC,IAAI,CAACH,MAA5F;MAEAK,QAAQ,CAACuB,GAAT,CAAa,MAAb,EAAqBF,IAAI,GAAG,CAAP,GAAWA,IAAX,GAAkB,CAAvC;MACArB,QAAQ,CAACuB,GAAT,CAAa,KAAb,EAAoBD,GAAG,GAAG,CAAN,GAAUA,GAAV,GAAgB,CAApC;IACD,CAnCM,CAAP;EAoCD,CAvCD;AAwCD,CA7Ce,GAAhB"},"metadata":{},"sourceType":"module"}