{"ast":null,"code":"const byRE = /\\s+by\\s+/im;\n/**\n * groups look like this: (@a.foo)( as )(bar),\n * group 1 is the field, group 2 is \" as \" and group 3 is the alias\n * this regex will not advance past any non-identifier or whitespace characters, e.g. |\n */\n\nconst groupsRE = /([\\w$@().]+)(?:(\\s+as\\s+)([\\w$]+))?\\s*,?\\s*/iy;\nexport function getStatsGroups(query) {\n  let groups = []; // find \" by \"\n\n  let b;\n\n  if (b = query.match(byRE)) {\n    // continue incremental scanning from there for groups & aliases\n    groupsRE.lastIndex = b.index + b[0].length;\n    let g;\n\n    while (g = groupsRE.exec(query)) {\n      groups.push(g[2] ? g[3] : g[1]);\n      groupsRE.lastIndex = g.index + g[0].length;\n    }\n  }\n\n  return groups;\n}","map":{"version":3,"names":["byRE","groupsRE","getStatsGroups","query","groups","b","match","lastIndex","index","length","g","exec","push"],"sources":["/home/soula/grafana/public/app/plugins/datasource/cloudwatch/utils/query/getStatsGroups.ts"],"sourcesContent":["const byRE = /\\s+by\\s+/im;\n\n/**\n * groups look like this: (@a.foo)( as )(bar),\n * group 1 is the field, group 2 is \" as \" and group 3 is the alias\n * this regex will not advance past any non-identifier or whitespace characters, e.g. |\n */\nconst groupsRE = /([\\w$@().]+)(?:(\\s+as\\s+)([\\w$]+))?\\s*,?\\s*/iy;\n\nexport function getStatsGroups(query: string): string[] {\n  let groups = [];\n\n  // find \" by \"\n  let b;\n  if ((b = query.match(byRE))) {\n    // continue incremental scanning from there for groups & aliases\n    groupsRE.lastIndex = b.index! + b[0].length;\n\n    let g;\n    while ((g = groupsRE.exec(query))) {\n      groups.push(g[2] ? g[3] : g[1]);\n      groupsRE.lastIndex = g.index + g[0].length;\n    }\n  }\n\n  return groups;\n}\n"],"mappings":"AAAA,MAAMA,IAAI,GAAG,YAAb;AAEA;AACA;AACA;AACA;AACA;;AACA,MAAMC,QAAQ,GAAG,+CAAjB;AAEA,OAAO,SAASC,cAAT,CAAwBC,KAAxB,EAAiD;EACtD,IAAIC,MAAM,GAAG,EAAb,CADsD,CAGtD;;EACA,IAAIC,CAAJ;;EACA,IAAKA,CAAC,GAAGF,KAAK,CAACG,KAAN,CAAYN,IAAZ,CAAT,EAA6B;IAC3B;IACAC,QAAQ,CAACM,SAAT,GAAqBF,CAAC,CAACG,KAAF,GAAWH,CAAC,CAAC,CAAD,CAAD,CAAKI,MAArC;IAEA,IAAIC,CAAJ;;IACA,OAAQA,CAAC,GAAGT,QAAQ,CAACU,IAAT,CAAcR,KAAd,CAAZ,EAAmC;MACjCC,MAAM,CAACQ,IAAP,CAAYF,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR,GAAcA,CAAC,CAAC,CAAD,CAA3B;MACAT,QAAQ,CAACM,SAAT,GAAqBG,CAAC,CAACF,KAAF,GAAUE,CAAC,CAAC,CAAD,CAAD,CAAKD,MAApC;IACD;EACF;;EAED,OAAOL,MAAP;AACD"},"metadata":{},"sourceType":"module"}