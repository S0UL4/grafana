{"ast":null,"code":"var _span, _div, _span2;\n\nimport { css } from '@emotion/css';\nimport React, { useEffect } from 'react';\nimport { config } from '@grafana/runtime';\nimport { Button, FilterInput, MultiSelect, RangeSlider, Select, stylesFactory, useTheme } from '@grafana/ui';\nimport { createDatasourcesList, mapNumbertoTimeInSlider, mapQueriesToHeadings, SortOrder } from 'app/core/utils/richHistory';\nimport { getSortOrderOptions } from './RichHistory';\nimport RichHistoryCard from './RichHistoryCard';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst getStyles = stylesFactory((theme, height) => {\n  const bgColor = theme.isLight ? theme.palette.gray5 : theme.palette.dark4;\n  /* 134px is based on the width of the Query history tabs bar, so the content is aligned to right side of the tab */\n\n  const cardWidth = '100% - 134px';\n  const sliderHeight = `${height - 180}px`;\n  return {\n    container: css`\n      display: flex;\n      .label-slider {\n        font-size: ${theme.typography.size.sm};\n        &:last-of-type {\n          margin-top: ${theme.spacing.lg};\n        }\n        &:first-of-type {\n          font-weight: ${theme.typography.weight.semibold};\n          margin-bottom: ${theme.spacing.md};\n        }\n      }\n    `,\n    containerContent: css`\n      width: calc(${cardWidth});\n    `,\n    containerSlider: css`\n      width: 129px;\n      margin-right: ${theme.spacing.sm};\n      .slider {\n        bottom: 10px;\n        height: ${sliderHeight};\n        width: 129px;\n        padding: ${theme.spacing.sm} 0;\n      }\n    `,\n    slider: css`\n      position: fixed;\n    `,\n    selectors: css`\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `,\n    filterInput: css`\n      margin-bottom: ${theme.spacing.sm};\n    `,\n    multiselect: css`\n      width: 100%;\n      margin-bottom: ${theme.spacing.sm};\n      .gf-form-select-box__multi-value {\n        background-color: ${bgColor};\n        padding: ${theme.spacing.xxs} ${theme.spacing.xs} ${theme.spacing.xxs} ${theme.spacing.sm};\n        border-radius: ${theme.border.radius.sm};\n      }\n    `,\n    sort: css`\n      width: 170px;\n    `,\n    sessionName: css`\n      display: flex;\n      align-items: flex-start;\n      justify-content: flex-start;\n      margin-top: ${theme.spacing.lg};\n      h4 {\n        margin: 0 10px 0 0;\n      }\n    `,\n    heading: css`\n      font-size: ${theme.typography.heading.h4};\n      margin: ${theme.spacing.md} ${theme.spacing.xxs} ${theme.spacing.sm} ${theme.spacing.xxs};\n    `,\n    footer: css`\n      height: 60px;\n      margin: ${theme.spacing.lg} auto;\n      display: flex;\n      justify-content: center;\n      font-weight: ${theme.typography.weight.light};\n      font-size: ${theme.typography.size.sm};\n      a {\n        font-weight: ${theme.typography.weight.semibold};\n        margin-left: ${theme.spacing.xxs};\n      }\n    `,\n    queries: css`\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.regular};\n      margin-left: ${theme.spacing.xs};\n    `\n  };\n});\nexport function RichHistoryQueriesTab(props) {\n  const {\n    queries,\n    totalQueries,\n    loading,\n    richHistorySearchFilters,\n    updateFilters,\n    clearRichHistoryResults,\n    loadMoreRichHistory,\n    richHistorySettings,\n    exploreId,\n    height,\n    activeDatasourceInstance\n  } = props;\n  const theme = useTheme();\n  const styles = getStyles(theme, height);\n  const listOfDatasources = createDatasourcesList();\n  useEffect(() => {\n    const datasourceFilters = !richHistorySettings.activeDatasourceOnly && richHistorySettings.lastUsedDatasourceFilters ? richHistorySettings.lastUsedDatasourceFilters : [activeDatasourceInstance];\n    const filters = {\n      search: '',\n      sortOrder: SortOrder.Descending,\n      datasourceFilters,\n      from: 0,\n      to: richHistorySettings.retentionPeriod,\n      starred: false\n    };\n    updateFilters(filters);\n    return () => {\n      clearRichHistoryResults();\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (!richHistorySearchFilters) {\n    return _span || (_span = /*#__PURE__*/_jsx(\"span\", {\n      children: \"Loading...\"\n    }));\n  }\n  /* mappedQueriesToHeadings is an object where query headings (stringified dates/data sources)\n   * are keys and arrays with queries that belong to that headings are values.\n   */\n\n\n  const mappedQueriesToHeadings = mapQueriesToHeadings(queries, richHistorySearchFilters.sortOrder);\n  const sortOrderOptions = getSortOrderOptions();\n  const partialResults = queries.length && queries.length !== totalQueries;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.containerSlider,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.slider,\n        children: [_div || (_div = /*#__PURE__*/_jsx(\"div\", {\n          className: \"label-slider\",\n          children: \"Filter history\"\n        })), /*#__PURE__*/_jsx(\"div\", {\n          className: \"label-slider\",\n          children: mapNumbertoTimeInSlider(richHistorySearchFilters.from)\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"slider\",\n          children: /*#__PURE__*/_jsx(RangeSlider, {\n            tooltipAlwaysVisible: false,\n            min: 0,\n            max: richHistorySettings.retentionPeriod,\n            value: [richHistorySearchFilters.from, richHistorySearchFilters.to],\n            orientation: \"vertical\",\n            formatTooltipResult: mapNumbertoTimeInSlider,\n            reverse: true,\n            onAfterChange: value => {\n              updateFilters({\n                from: value[0],\n                to: value[1]\n              });\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"label-slider\",\n          children: mapNumbertoTimeInSlider(richHistorySearchFilters.to)\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.containerContent,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.selectors,\n        children: [!richHistorySettings.activeDatasourceOnly && /*#__PURE__*/_jsx(MultiSelect, {\n          className: styles.multiselect,\n          options: listOfDatasources.map(ds => {\n            return {\n              value: ds.name,\n              label: ds.name\n            };\n          }),\n          value: richHistorySearchFilters.datasourceFilters,\n          placeholder: \"Filter queries for data sources(s)\",\n          \"aria-label\": \"Filter queries for data sources(s)\",\n          onChange: options => {\n            updateFilters({\n              datasourceFilters: options.map(option => option.value)\n            });\n          }\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.filterInput,\n          children: /*#__PURE__*/_jsx(FilterInput, {\n            placeholder: \"Search queries\",\n            value: richHistorySearchFilters.search,\n            onChange: search => updateFilters({\n              search\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          \"aria-label\": \"Sort queries\",\n          className: styles.sort,\n          children: /*#__PURE__*/_jsx(Select, {\n            value: sortOrderOptions.filter(order => order.value === richHistorySearchFilters.sortOrder),\n            options: sortOrderOptions,\n            placeholder: \"Sort queries by\",\n            onChange: e => updateFilters({\n              sortOrder: e.value\n            })\n          })\n        })]\n      }), loading && (_span2 || (_span2 = /*#__PURE__*/_jsx(\"span\", {\n        children: \"Loading results...\"\n      }))), !loading && Object.keys(mappedQueriesToHeadings).map(heading => {\n        return /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.heading,\n            children: [heading, ' ', /*#__PURE__*/_jsxs(\"span\", {\n              className: styles.queries,\n              children: [partialResults ? 'Displaying ' : '', mappedQueriesToHeadings[heading].length, \" queries\"]\n            })]\n          }), mappedQueriesToHeadings[heading].map(q => {\n            const idx = listOfDatasources.findIndex(d => d.name === q.datasourceName);\n            return /*#__PURE__*/_jsx(RichHistoryCard, {\n              query: q,\n              exploreId: exploreId,\n              dsImg: idx === -1 ? 'public/img/icn-datasource.svg' : listOfDatasources[idx].imgUrl,\n              isRemoved: idx === -1\n            }, q.id);\n          })]\n        }, heading);\n      }), partialResults ? /*#__PURE__*/_jsxs(\"div\", {\n        children: [\"Showing \", queries.length, \" of \", totalQueries, \" \", /*#__PURE__*/_jsx(Button, {\n          onClick: loadMoreRichHistory,\n          children: \"Load more\"\n        })]\n      }) : null, /*#__PURE__*/_jsx(\"div\", {\n        className: styles.footer,\n        children: !config.queryHistoryEnabled ? 'The history is local to your browser and is not shared with others.' : ''\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["css","React","useEffect","config","Button","FilterInput","MultiSelect","RangeSlider","Select","stylesFactory","useTheme","createDatasourcesList","mapNumbertoTimeInSlider","mapQueriesToHeadings","SortOrder","getSortOrderOptions","RichHistoryCard","getStyles","theme","height","bgColor","isLight","palette","gray5","dark4","cardWidth","sliderHeight","container","typography","size","sm","spacing","lg","weight","semibold","md","containerContent","containerSlider","slider","selectors","filterInput","multiselect","xxs","xs","border","radius","sort","sessionName","heading","h4","footer","light","queries","regular","RichHistoryQueriesTab","props","totalQueries","loading","richHistorySearchFilters","updateFilters","clearRichHistoryResults","loadMoreRichHistory","richHistorySettings","exploreId","activeDatasourceInstance","styles","listOfDatasources","datasourceFilters","activeDatasourceOnly","lastUsedDatasourceFilters","filters","search","sortOrder","Descending","from","to","retentionPeriod","starred","mappedQueriesToHeadings","sortOrderOptions","partialResults","length","value","map","ds","name","label","options","option","filter","order","e","Object","keys","q","idx","findIndex","d","datasourceName","imgUrl","id","queryHistoryEnabled"],"sources":["/home/soula/grafana/public/app/features/explore/RichHistory/RichHistoryQueriesTab.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useEffect } from 'react';\n\nimport { GrafanaTheme, SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { Button, FilterInput, MultiSelect, RangeSlider, Select, stylesFactory, useTheme } from '@grafana/ui';\nimport {\n  createDatasourcesList,\n  mapNumbertoTimeInSlider,\n  mapQueriesToHeadings,\n  SortOrder,\n  RichHistorySearchFilters,\n  RichHistorySettings,\n} from 'app/core/utils/richHistory';\nimport { ExploreId, RichHistoryQuery } from 'app/types/explore';\n\nimport { getSortOrderOptions } from './RichHistory';\nimport RichHistoryCard from './RichHistoryCard';\n\nexport interface Props {\n  queries: RichHistoryQuery[];\n  totalQueries: number;\n  loading: boolean;\n  activeDatasourceInstance: string;\n  updateFilters: (filtersToUpdate?: Partial<RichHistorySearchFilters>) => void;\n  clearRichHistoryResults: () => void;\n  loadMoreRichHistory: () => void;\n  richHistorySettings: RichHistorySettings;\n  richHistorySearchFilters?: RichHistorySearchFilters;\n  exploreId: ExploreId;\n  height: number;\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme, height: number) => {\n  const bgColor = theme.isLight ? theme.palette.gray5 : theme.palette.dark4;\n\n  /* 134px is based on the width of the Query history tabs bar, so the content is aligned to right side of the tab */\n  const cardWidth = '100% - 134px';\n  const sliderHeight = `${height - 180}px`;\n  return {\n    container: css`\n      display: flex;\n      .label-slider {\n        font-size: ${theme.typography.size.sm};\n        &:last-of-type {\n          margin-top: ${theme.spacing.lg};\n        }\n        &:first-of-type {\n          font-weight: ${theme.typography.weight.semibold};\n          margin-bottom: ${theme.spacing.md};\n        }\n      }\n    `,\n    containerContent: css`\n      width: calc(${cardWidth});\n    `,\n    containerSlider: css`\n      width: 129px;\n      margin-right: ${theme.spacing.sm};\n      .slider {\n        bottom: 10px;\n        height: ${sliderHeight};\n        width: 129px;\n        padding: ${theme.spacing.sm} 0;\n      }\n    `,\n    slider: css`\n      position: fixed;\n    `,\n    selectors: css`\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `,\n    filterInput: css`\n      margin-bottom: ${theme.spacing.sm};\n    `,\n    multiselect: css`\n      width: 100%;\n      margin-bottom: ${theme.spacing.sm};\n      .gf-form-select-box__multi-value {\n        background-color: ${bgColor};\n        padding: ${theme.spacing.xxs} ${theme.spacing.xs} ${theme.spacing.xxs} ${theme.spacing.sm};\n        border-radius: ${theme.border.radius.sm};\n      }\n    `,\n    sort: css`\n      width: 170px;\n    `,\n    sessionName: css`\n      display: flex;\n      align-items: flex-start;\n      justify-content: flex-start;\n      margin-top: ${theme.spacing.lg};\n      h4 {\n        margin: 0 10px 0 0;\n      }\n    `,\n    heading: css`\n      font-size: ${theme.typography.heading.h4};\n      margin: ${theme.spacing.md} ${theme.spacing.xxs} ${theme.spacing.sm} ${theme.spacing.xxs};\n    `,\n    footer: css`\n      height: 60px;\n      margin: ${theme.spacing.lg} auto;\n      display: flex;\n      justify-content: center;\n      font-weight: ${theme.typography.weight.light};\n      font-size: ${theme.typography.size.sm};\n      a {\n        font-weight: ${theme.typography.weight.semibold};\n        margin-left: ${theme.spacing.xxs};\n      }\n    `,\n    queries: css`\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.regular};\n      margin-left: ${theme.spacing.xs};\n    `,\n  };\n});\n\nexport function RichHistoryQueriesTab(props: Props) {\n  const {\n    queries,\n    totalQueries,\n    loading,\n    richHistorySearchFilters,\n    updateFilters,\n    clearRichHistoryResults,\n    loadMoreRichHistory,\n    richHistorySettings,\n    exploreId,\n    height,\n    activeDatasourceInstance,\n  } = props;\n\n  const theme = useTheme();\n  const styles = getStyles(theme, height);\n\n  const listOfDatasources = createDatasourcesList();\n\n  useEffect(() => {\n    const datasourceFilters =\n      !richHistorySettings.activeDatasourceOnly && richHistorySettings.lastUsedDatasourceFilters\n        ? richHistorySettings.lastUsedDatasourceFilters\n        : [activeDatasourceInstance];\n    const filters: RichHistorySearchFilters = {\n      search: '',\n      sortOrder: SortOrder.Descending,\n      datasourceFilters,\n      from: 0,\n      to: richHistorySettings.retentionPeriod,\n      starred: false,\n    };\n    updateFilters(filters);\n\n    return () => {\n      clearRichHistoryResults();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (!richHistorySearchFilters) {\n    return <span>Loading...</span>;\n  }\n\n  /* mappedQueriesToHeadings is an object where query headings (stringified dates/data sources)\n   * are keys and arrays with queries that belong to that headings are values.\n   */\n  const mappedQueriesToHeadings = mapQueriesToHeadings(queries, richHistorySearchFilters.sortOrder);\n  const sortOrderOptions = getSortOrderOptions();\n  const partialResults = queries.length && queries.length !== totalQueries;\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.containerSlider}>\n        <div className={styles.slider}>\n          <div className=\"label-slider\">Filter history</div>\n          <div className=\"label-slider\">{mapNumbertoTimeInSlider(richHistorySearchFilters.from)}</div>\n          <div className=\"slider\">\n            <RangeSlider\n              tooltipAlwaysVisible={false}\n              min={0}\n              max={richHistorySettings.retentionPeriod}\n              value={[richHistorySearchFilters.from, richHistorySearchFilters.to]}\n              orientation=\"vertical\"\n              formatTooltipResult={mapNumbertoTimeInSlider}\n              reverse={true}\n              onAfterChange={(value) => {\n                updateFilters({ from: value![0], to: value![1] });\n              }}\n            />\n          </div>\n          <div className=\"label-slider\">{mapNumbertoTimeInSlider(richHistorySearchFilters.to)}</div>\n        </div>\n      </div>\n\n      <div className={styles.containerContent}>\n        <div className={styles.selectors}>\n          {!richHistorySettings.activeDatasourceOnly && (\n            <MultiSelect\n              className={styles.multiselect}\n              options={listOfDatasources.map((ds) => {\n                return { value: ds.name, label: ds.name };\n              })}\n              value={richHistorySearchFilters.datasourceFilters}\n              placeholder=\"Filter queries for data sources(s)\"\n              aria-label=\"Filter queries for data sources(s)\"\n              onChange={(options: SelectableValue[]) => {\n                updateFilters({ datasourceFilters: options.map((option) => option.value) });\n              }}\n            />\n          )}\n          <div className={styles.filterInput}>\n            <FilterInput\n              placeholder=\"Search queries\"\n              value={richHistorySearchFilters.search}\n              onChange={(search: string) => updateFilters({ search })}\n            />\n          </div>\n          <div aria-label=\"Sort queries\" className={styles.sort}>\n            <Select\n              value={sortOrderOptions.filter((order) => order.value === richHistorySearchFilters.sortOrder)}\n              options={sortOrderOptions}\n              placeholder=\"Sort queries by\"\n              onChange={(e: SelectableValue<SortOrder>) => updateFilters({ sortOrder: e.value })}\n            />\n          </div>\n        </div>\n\n        {loading && <span>Loading results...</span>}\n\n        {!loading &&\n          Object.keys(mappedQueriesToHeadings).map((heading) => {\n            return (\n              <div key={heading}>\n                <div className={styles.heading}>\n                  {heading}{' '}\n                  <span className={styles.queries}>\n                    {partialResults ? 'Displaying ' : ''}\n                    {mappedQueriesToHeadings[heading].length} queries\n                  </span>\n                </div>\n                {mappedQueriesToHeadings[heading].map((q: RichHistoryQuery) => {\n                  const idx = listOfDatasources.findIndex((d) => d.name === q.datasourceName);\n                  return (\n                    <RichHistoryCard\n                      query={q}\n                      key={q.id}\n                      exploreId={exploreId}\n                      dsImg={idx === -1 ? 'public/img/icn-datasource.svg' : listOfDatasources[idx].imgUrl}\n                      isRemoved={idx === -1}\n                    />\n                  );\n                })}\n              </div>\n            );\n          })}\n        {partialResults ? (\n          <div>\n            Showing {queries.length} of {totalQueries} <Button onClick={loadMoreRichHistory}>Load more</Button>\n          </div>\n        ) : null}\n        <div className={styles.footer}>\n          {!config.queryHistoryEnabled ? 'The history is local to your browser and is not shared with others.' : ''}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}