{"ast":null,"code":"import React from 'react';\nimport { GrafanaEdition } from '@grafana/data/src/types/config';\nimport { Alert } from '@grafana/ui';\nimport { LocalStorageValueProvider } from 'app/core/components/LocalStorageValueProvider';\nimport { config } from 'app/core/config';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst LOCAL_STORAGE_KEY = 'datasources.settings.cloudInfoBox.isDismissed';\nexport const CloudInfoBox = ({\n  dataSource\n}) => {\n  var _dataSource$version;\n\n  let mainDS = '';\n  let extraDS = ''; // don't show for already configured data sources or provisioned data sources\n\n  if (dataSource.readOnly || ((_dataSource$version = dataSource.version) !== null && _dataSource$version !== void 0 ? _dataSource$version : 0) > 2) {\n    return null;\n  } // Skip showing this info box in some editions\n\n\n  if (config.buildInfo.edition !== GrafanaEdition.OpenSource) {\n    return null;\n  }\n\n  switch (dataSource.type) {\n    case 'prometheus':\n      mainDS = 'Prometheus';\n      extraDS = 'Loki';\n      break;\n\n    case 'loki':\n      mainDS = 'Loki';\n      extraDS = 'Prometheus';\n      break;\n\n    default:\n      return null;\n  }\n\n  return /*#__PURE__*/_jsx(LocalStorageValueProvider, {\n    storageKey: LOCAL_STORAGE_KEY,\n    defaultValue: false,\n    children: (isDismissed, onDismiss) => {\n      if (isDismissed) {\n        return null;\n      }\n\n      return /*#__PURE__*/_jsxs(Alert, {\n        title: `Configure your ${mainDS} data source below`,\n        severity: \"info\",\n        bottomSpacing: 4,\n        onRemove: () => {\n          onDismiss(true);\n        },\n        children: [\"Or skip the effort and get \", mainDS, \" (and \", extraDS, \") as fully-managed, scalable, and hosted data sources from Grafana Labs with the\", ' ', /*#__PURE__*/_jsx(\"a\", {\n          className: \"external-link\",\n          href: `https://grafana.com/signup/cloud/connect-account?src=grafana-oss&cnt=${dataSource.type}-settings`,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          title: \"The free plan includes 10k active metrics and 50gb storage.\",\n          children: \"free-forever Grafana Cloud plan\"\n        }), \".\"]\n      });\n    }\n  });\n};","map":{"version":3,"names":["React","GrafanaEdition","Alert","LocalStorageValueProvider","config","LOCAL_STORAGE_KEY","CloudInfoBox","dataSource","mainDS","extraDS","readOnly","version","buildInfo","edition","OpenSource","type","isDismissed","onDismiss"],"sources":["/home/soula/grafana/public/app/features/datasources/settings/CloudInfoBox.tsx"],"sourcesContent":["import React, { FC } from 'react';\n\nimport { DataSourceSettings } from '@grafana/data';\nimport { GrafanaEdition } from '@grafana/data/src/types/config';\nimport { Alert } from '@grafana/ui';\nimport { LocalStorageValueProvider } from 'app/core/components/LocalStorageValueProvider';\nimport { config } from 'app/core/config';\n\nconst LOCAL_STORAGE_KEY = 'datasources.settings.cloudInfoBox.isDismissed';\n\nexport interface Props {\n  dataSource: DataSourceSettings;\n}\n\nexport const CloudInfoBox: FC<Props> = ({ dataSource }) => {\n  let mainDS = '';\n  let extraDS = '';\n\n  // don't show for already configured data sources or provisioned data sources\n  if (dataSource.readOnly || (dataSource.version ?? 0) > 2) {\n    return null;\n  }\n\n  // Skip showing this info box in some editions\n  if (config.buildInfo.edition !== GrafanaEdition.OpenSource) {\n    return null;\n  }\n\n  switch (dataSource.type) {\n    case 'prometheus':\n      mainDS = 'Prometheus';\n      extraDS = 'Loki';\n      break;\n    case 'loki':\n      mainDS = 'Loki';\n      extraDS = 'Prometheus';\n      break;\n    default:\n      return null;\n  }\n\n  return (\n    <LocalStorageValueProvider<boolean> storageKey={LOCAL_STORAGE_KEY} defaultValue={false}>\n      {(isDismissed, onDismiss) => {\n        if (isDismissed) {\n          return null;\n        }\n        return (\n          <Alert\n            title={`Configure your ${mainDS} data source below`}\n            severity=\"info\"\n            bottomSpacing={4}\n            onRemove={() => {\n              onDismiss(true);\n            }}\n          >\n            Or skip the effort and get {mainDS} (and {extraDS}) as fully-managed, scalable, and hosted data sources from\n            Grafana Labs with the{' '}\n            <a\n              className=\"external-link\"\n              href={`https://grafana.com/signup/cloud/connect-account?src=grafana-oss&cnt=${dataSource.type}-settings`}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              title=\"The free plan includes 10k active metrics and 50gb storage.\"\n            >\n              free-forever Grafana Cloud plan\n            </a>\n            .\n          </Alert>\n        );\n      }}\n    </LocalStorageValueProvider>\n  );\n};\n"],"mappings":"AAAA,OAAOA,KAAP,MAA0B,OAA1B;AAGA,SAASC,cAAT,QAA+B,gCAA/B;AACA,SAASC,KAAT,QAAsB,aAAtB;AACA,SAASC,yBAAT,QAA0C,+CAA1C;AACA,SAASC,MAAT,QAAuB,iBAAvB;;;AAEA,MAAMC,iBAAiB,GAAG,+CAA1B;AAMA,OAAO,MAAMC,YAAuB,GAAG,CAAC;EAAEC;AAAF,CAAD,KAAoB;EAAA;;EACzD,IAAIC,MAAM,GAAG,EAAb;EACA,IAAIC,OAAO,GAAG,EAAd,CAFyD,CAIzD;;EACA,IAAIF,UAAU,CAACG,QAAX,IAAuB,wBAACH,UAAU,CAACI,OAAZ,qEAAuB,CAAvB,IAA4B,CAAvD,EAA0D;IACxD,OAAO,IAAP;EACD,CAPwD,CASzD;;;EACA,IAAIP,MAAM,CAACQ,SAAP,CAAiBC,OAAjB,KAA6BZ,cAAc,CAACa,UAAhD,EAA4D;IAC1D,OAAO,IAAP;EACD;;EAED,QAAQP,UAAU,CAACQ,IAAnB;IACE,KAAK,YAAL;MACEP,MAAM,GAAG,YAAT;MACAC,OAAO,GAAG,MAAV;MACA;;IACF,KAAK,MAAL;MACED,MAAM,GAAG,MAAT;MACAC,OAAO,GAAG,YAAV;MACA;;IACF;MACE,OAAO,IAAP;EAVJ;;EAaA,oBACE,KAAC,yBAAD;IAAoC,UAAU,EAAEJ,iBAAhD;IAAmE,YAAY,EAAE,KAAjF;IAAA,UACG,CAACW,WAAD,EAAcC,SAAd,KAA4B;MAC3B,IAAID,WAAJ,EAAiB;QACf,OAAO,IAAP;MACD;;MACD,oBACE,MAAC,KAAD;QACE,KAAK,EAAG,kBAAiBR,MAAO,oBADlC;QAEE,QAAQ,EAAC,MAFX;QAGE,aAAa,EAAE,CAHjB;QAIE,QAAQ,EAAE,MAAM;UACdS,SAAS,CAAC,IAAD,CAAT;QACD,CANH;QAAA,0CAQ8BT,MAR9B,YAQ4CC,OAR5C,sFASwB,GATxB,eAUE;UACE,SAAS,EAAC,eADZ;UAEE,IAAI,EAAG,wEAAuEF,UAAU,CAACQ,IAAK,WAFhG;UAGE,MAAM,EAAC,QAHT;UAIE,GAAG,EAAC,YAJN;UAKE,KAAK,EAAC,6DALR;UAAA;QAAA,EAVF;MAAA,EADF;IAuBD;EA5BH,EADF;AAgCD,CA3DM"},"metadata":{},"sourceType":"module"}