{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { without, each } from 'lodash';\nimport coreModule from 'app/angular/core_module'; // This service really just tracks a list of $timeout promises to give us a\n// method for canceling them all when we need to\n\nexport class Timer {\n  /** @ngInject */\n  constructor($timeout) {\n    _defineProperty(this, \"timers\", []);\n\n    this.$timeout = $timeout;\n  }\n\n  register(promise) {\n    this.timers.push(promise);\n    return promise;\n  }\n\n  cancel(promise) {\n    this.timers = without(this.timers, promise);\n    this.$timeout.cancel(promise);\n  }\n\n  cancelAll() {\n    each(this.timers, t => {\n      this.$timeout.cancel(t);\n    });\n    this.timers = [];\n  }\n\n}\nTimer.$inject = [\"$timeout\"];\ncoreModule.service('timer', Timer);","map":{"version":3,"names":["without","each","coreModule","Timer","constructor","$timeout","register","promise","timers","push","cancel","cancelAll","t","service"],"sources":["/home/soula/grafana/public/app/angular/services/timer.ts"],"sourcesContent":["import { ITimeoutService } from 'angular';\nimport { without, each } from 'lodash';\n\nimport coreModule from 'app/angular/core_module';\n\n// This service really just tracks a list of $timeout promises to give us a\n// method for canceling them all when we need to\nexport class Timer {\n  timers: Array<angular.IPromise<any>> = [];\n\n  /** @ngInject */\n  constructor(private $timeout: ITimeoutService) {}\n\n  register(promise: angular.IPromise<any>) {\n    this.timers.push(promise);\n    return promise;\n  }\n\n  cancel(promise: angular.IPromise<any>) {\n    this.timers = without(this.timers, promise);\n    this.$timeout.cancel(promise);\n  }\n\n  cancelAll() {\n    each(this.timers, (t) => {\n      this.$timeout.cancel(t);\n    });\n    this.timers = [];\n  }\n}\n\ncoreModule.service('timer', Timer);\n"],"mappings":";;AACA,SAASA,OAAT,EAAkBC,IAAlB,QAA8B,QAA9B;AAEA,OAAOC,UAAP,MAAuB,yBAAvB,C,CAEA;AACA;;AACA,OAAO,MAAMC,KAAN,CAAY;EAGjB;EACAC,WAAW,CAASC,QAAT,EAAoC;IAAA,gCAHR,EAGQ;;IAAA,KAA3BA,QAA2B,GAA3BA,QAA2B;EAAE;;EAEjDC,QAAQ,CAACC,OAAD,EAAiC;IACvC,KAAKC,MAAL,CAAYC,IAAZ,CAAiBF,OAAjB;IACA,OAAOA,OAAP;EACD;;EAEDG,MAAM,CAACH,OAAD,EAAiC;IACrC,KAAKC,MAAL,GAAcR,OAAO,CAAC,KAAKQ,MAAN,EAAcD,OAAd,CAArB;IACA,KAAKF,QAAL,CAAcK,MAAd,CAAqBH,OAArB;EACD;;EAEDI,SAAS,GAAG;IACVV,IAAI,CAAC,KAAKO,MAAN,EAAeI,CAAD,IAAO;MACvB,KAAKP,QAAL,CAAcK,MAAd,CAAqBE,CAArB;IACD,CAFG,CAAJ;IAGA,KAAKJ,MAAL,GAAc,EAAd;EACD;;AArBgB;;AAwBnBN,UAAU,CAACW,OAAX,CAAmB,OAAnB,EAA4BV,KAA5B"},"metadata":{},"sourceType":"module"}