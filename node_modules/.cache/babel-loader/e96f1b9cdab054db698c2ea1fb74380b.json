{"ast":null,"code":"import useAsync from 'react-use/lib/useAsync';\nimport { PluginType } from '@grafana/data';\nimport { getPluginSettings } from '../pluginSettings';\nimport { importAppPlugin } from '../plugin_loader';\nexport const useImportAppPlugin = id => {\n  return useAsync(async () => {\n    const pluginMeta = await getPluginSettings(id);\n\n    if (!pluginMeta) {\n      throw new Error(`Unknown plugin: \"${id}\"`);\n    }\n\n    if (pluginMeta.type !== PluginType.app) {\n      throw new Error(`Plugin must be an app (currently \"${pluginMeta.type}\")`);\n    }\n\n    if (!pluginMeta.enabled) {\n      throw new Error(`Application \"${id}\" is not enabled`);\n    }\n\n    return await importAppPlugin(pluginMeta);\n  });\n};","map":{"version":3,"names":["useAsync","PluginType","getPluginSettings","importAppPlugin","useImportAppPlugin","id","pluginMeta","Error","type","app","enabled"],"sources":["/home/soula/grafana/public/app/features/plugins/hooks/useImportAppPlugin.ts"],"sourcesContent":["import useAsync from 'react-use/lib/useAsync';\n\nimport { PluginType } from '@grafana/data';\n\nimport { getPluginSettings } from '../pluginSettings';\nimport { importAppPlugin } from '../plugin_loader';\n\nexport const useImportAppPlugin = (id: string) => {\n  return useAsync(async () => {\n    const pluginMeta = await getPluginSettings(id);\n\n    if (!pluginMeta) {\n      throw new Error(`Unknown plugin: \"${id}\"`);\n    }\n\n    if (pluginMeta.type !== PluginType.app) {\n      throw new Error(`Plugin must be an app (currently \"${pluginMeta.type}\")`);\n    }\n\n    if (!pluginMeta.enabled) {\n      throw new Error(`Application \"${id}\" is not enabled`);\n    }\n\n    return await importAppPlugin(pluginMeta);\n  });\n};\n"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,wBAArB;AAEA,SAASC,UAAT,QAA2B,eAA3B;AAEA,SAASC,iBAAT,QAAkC,mBAAlC;AACA,SAASC,eAAT,QAAgC,kBAAhC;AAEA,OAAO,MAAMC,kBAAkB,GAAIC,EAAD,IAAgB;EAChD,OAAOL,QAAQ,CAAC,YAAY;IAC1B,MAAMM,UAAU,GAAG,MAAMJ,iBAAiB,CAACG,EAAD,CAA1C;;IAEA,IAAI,CAACC,UAAL,EAAiB;MACf,MAAM,IAAIC,KAAJ,CAAW,oBAAmBF,EAAG,GAAjC,CAAN;IACD;;IAED,IAAIC,UAAU,CAACE,IAAX,KAAoBP,UAAU,CAACQ,GAAnC,EAAwC;MACtC,MAAM,IAAIF,KAAJ,CAAW,qCAAoCD,UAAU,CAACE,IAAK,IAA/D,CAAN;IACD;;IAED,IAAI,CAACF,UAAU,CAACI,OAAhB,EAAyB;MACvB,MAAM,IAAIH,KAAJ,CAAW,gBAAeF,EAAG,kBAA7B,CAAN;IACD;;IAED,OAAO,MAAMF,eAAe,CAACG,UAAD,CAA5B;EACD,CAhBc,CAAf;AAiBD,CAlBM"},"metadata":{},"sourceType":"module"}