{"ast":null,"code":"// Clears the rest of the line after the caret\nexport function ClearPlugin() {\n  return {\n    onKeyDown(event, editor, next) {\n      const keyEvent = event;\n      const value = editor.value;\n\n      if (value.selection.isExpanded) {\n        return next();\n      }\n\n      if (keyEvent.key === 'k' && keyEvent.ctrlKey) {\n        keyEvent.preventDefault();\n        const text = value.anchorText.text;\n        const offset = value.selection.anchor.offset;\n        const length = text.length;\n        const forward = length - offset;\n        editor.deleteForward(forward);\n        return true;\n      }\n\n      return next();\n    }\n\n  };\n}","map":{"version":3,"names":["ClearPlugin","onKeyDown","event","editor","next","keyEvent","value","selection","isExpanded","key","ctrlKey","preventDefault","text","anchorText","offset","anchor","length","forward","deleteForward"],"sources":["/home/soula/grafana/packages/grafana-ui/src/slate-plugins/clear.ts"],"sourcesContent":["import { Editor as CoreEditor } from 'slate';\n\nimport { Plugin } from '@grafana/slate-react';\n\n// Clears the rest of the line after the caret\nexport function ClearPlugin(): Plugin {\n  return {\n    onKeyDown(event: Event, editor: CoreEditor, next: Function) {\n      const keyEvent = event as KeyboardEvent;\n      const value = editor.value;\n\n      if (value.selection.isExpanded) {\n        return next();\n      }\n\n      if (keyEvent.key === 'k' && keyEvent.ctrlKey) {\n        keyEvent.preventDefault();\n        const text = value.anchorText.text;\n        const offset = value.selection.anchor.offset;\n        const length = text.length;\n        const forward = length - offset;\n        editor.deleteForward(forward);\n        return true;\n      }\n\n      return next();\n    },\n  };\n}\n"],"mappings":"AAIA;AACA,OAAO,SAASA,WAAT,GAA+B;EACpC,OAAO;IACLC,SAAS,CAACC,KAAD,EAAeC,MAAf,EAAmCC,IAAnC,EAAmD;MAC1D,MAAMC,QAAQ,GAAGH,KAAjB;MACA,MAAMI,KAAK,GAAGH,MAAM,CAACG,KAArB;;MAEA,IAAIA,KAAK,CAACC,SAAN,CAAgBC,UAApB,EAAgC;QAC9B,OAAOJ,IAAI,EAAX;MACD;;MAED,IAAIC,QAAQ,CAACI,GAAT,KAAiB,GAAjB,IAAwBJ,QAAQ,CAACK,OAArC,EAA8C;QAC5CL,QAAQ,CAACM,cAAT;QACA,MAAMC,IAAI,GAAGN,KAAK,CAACO,UAAN,CAAiBD,IAA9B;QACA,MAAME,MAAM,GAAGR,KAAK,CAACC,SAAN,CAAgBQ,MAAhB,CAAuBD,MAAtC;QACA,MAAME,MAAM,GAAGJ,IAAI,CAACI,MAApB;QACA,MAAMC,OAAO,GAAGD,MAAM,GAAGF,MAAzB;QACAX,MAAM,CAACe,aAAP,CAAqBD,OAArB;QACA,OAAO,IAAP;MACD;;MAED,OAAOb,IAAI,EAAX;IACD;;EApBI,CAAP;AAsBD"},"metadata":{},"sourceType":"module"}