{"ast":null,"code":"import { getBackendSrv } from '@grafana/runtime';\nconst pluginInfoCache = {};\nexport function getPluginSettings(pluginId) {\n  const v = pluginInfoCache[pluginId];\n\n  if (v) {\n    return Promise.resolve(v);\n  }\n\n  return getBackendSrv().get(`/api/plugins/${pluginId}/settings`).then(settings => {\n    pluginInfoCache[pluginId] = settings;\n    return settings;\n  }).catch(err => {\n    return Promise.reject(new Error('Unknown Plugin'));\n  });\n}\nexport const clearPluginSettingsCache = pluginId => {\n  if (pluginId) {\n    return delete pluginInfoCache[pluginId];\n  } // clear all\n\n\n  return Object.keys(pluginInfoCache).forEach(key => delete pluginInfoCache[key]);\n};","map":{"version":3,"names":["getBackendSrv","pluginInfoCache","getPluginSettings","pluginId","v","Promise","resolve","get","then","settings","catch","err","reject","Error","clearPluginSettingsCache","Object","keys","forEach","key"],"sources":["/home/soula/grafana/public/app/features/plugins/pluginSettings.ts"],"sourcesContent":["import { PluginMeta } from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\n\ntype PluginCache = {\n  [key: string]: PluginMeta;\n};\n\nconst pluginInfoCache: PluginCache = {};\n\nexport function getPluginSettings(pluginId: string): Promise<PluginMeta> {\n  const v = pluginInfoCache[pluginId];\n  if (v) {\n    return Promise.resolve(v);\n  }\n  return getBackendSrv()\n    .get(`/api/plugins/${pluginId}/settings`)\n    .then((settings: any) => {\n      pluginInfoCache[pluginId] = settings;\n      return settings;\n    })\n    .catch((err: any) => {\n      return Promise.reject(new Error('Unknown Plugin'));\n    });\n}\n\nexport const clearPluginSettingsCache = (pluginId?: string) => {\n  if (pluginId) {\n    return delete pluginInfoCache[pluginId];\n  }\n  // clear all\n  return Object.keys(pluginInfoCache).forEach((key) => delete pluginInfoCache[key]);\n};\n"],"mappings":"AACA,SAASA,aAAT,QAA8B,kBAA9B;AAMA,MAAMC,eAA4B,GAAG,EAArC;AAEA,OAAO,SAASC,iBAAT,CAA2BC,QAA3B,EAAkE;EACvE,MAAMC,CAAC,GAAGH,eAAe,CAACE,QAAD,CAAzB;;EACA,IAAIC,CAAJ,EAAO;IACL,OAAOC,OAAO,CAACC,OAAR,CAAgBF,CAAhB,CAAP;EACD;;EACD,OAAOJ,aAAa,GACjBO,GADI,CACC,gBAAeJ,QAAS,WADzB,EAEJK,IAFI,CAEEC,QAAD,IAAmB;IACvBR,eAAe,CAACE,QAAD,CAAf,GAA4BM,QAA5B;IACA,OAAOA,QAAP;EACD,CALI,EAMJC,KANI,CAMGC,GAAD,IAAc;IACnB,OAAON,OAAO,CAACO,MAAR,CAAe,IAAIC,KAAJ,CAAU,gBAAV,CAAf,CAAP;EACD,CARI,CAAP;AASD;AAED,OAAO,MAAMC,wBAAwB,GAAIX,QAAD,IAAuB;EAC7D,IAAIA,QAAJ,EAAc;IACZ,OAAO,OAAOF,eAAe,CAACE,QAAD,CAA7B;EACD,CAH4D,CAI7D;;;EACA,OAAOY,MAAM,CAACC,IAAP,CAAYf,eAAZ,EAA6BgB,OAA7B,CAAsCC,GAAD,IAAS,OAAOjB,eAAe,CAACiB,GAAD,CAApE,CAAP;AACD,CANM"},"metadata":{},"sourceType":"module"}