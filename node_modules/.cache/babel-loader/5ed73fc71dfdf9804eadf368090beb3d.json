{"ast":null,"code":"import React, { useCallback } from 'react';\nimport { DataHoverClearEvent, DataHoverEvent } from '@grafana/data';\nimport { LegendDisplayMode } from '@grafana/schema';\nimport { SeriesVisibilityChangeMode, usePanelContext } from '../PanelChrome';\nimport { VizLegendList } from './VizLegendList';\nimport { VizLegendTable } from './VizLegendTable';\nimport { SeriesVisibilityChangeBehavior } from './types';\nimport { mapMouseEventToMode } from './utils';\n/**\n * @public\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function VizLegend({\n  items,\n  displayMode,\n  sortBy: sortKey,\n  seriesVisibilityChangeBehavior = SeriesVisibilityChangeBehavior.Isolate,\n  sortDesc,\n  onLabelClick,\n  onToggleSort,\n  placement,\n  className,\n  itemRenderer,\n  readonly\n}) {\n  const {\n    eventBus,\n    onToggleSeriesVisibility,\n    onToggleLegendSort\n  } = usePanelContext();\n  const onMouseEnter = useCallback((item, event) => {\n    eventBus === null || eventBus === void 0 ? void 0 : eventBus.publish({\n      type: DataHoverEvent.type,\n      payload: {\n        raw: event,\n        x: 0,\n        y: 0,\n        dataId: item.label\n      }\n    });\n  }, [eventBus]);\n  const onMouseOut = useCallback((item, event) => {\n    eventBus === null || eventBus === void 0 ? void 0 : eventBus.publish({\n      type: DataHoverClearEvent.type,\n      payload: {\n        raw: event,\n        x: 0,\n        y: 0,\n        dataId: item.label\n      }\n    });\n  }, [eventBus]);\n  const onLegendLabelClick = useCallback((item, event) => {\n    if (onLabelClick) {\n      onLabelClick(item, event);\n    }\n\n    if (onToggleSeriesVisibility) {\n      onToggleSeriesVisibility(item.label, seriesVisibilityChangeBehavior === SeriesVisibilityChangeBehavior.Hide ? SeriesVisibilityChangeMode.AppendToSelection : mapMouseEventToMode(event));\n    }\n  }, [onToggleSeriesVisibility, onLabelClick, seriesVisibilityChangeBehavior]);\n\n  switch (displayMode) {\n    case LegendDisplayMode.Table:\n      return /*#__PURE__*/_jsx(VizLegendTable, {\n        className: className,\n        items: items,\n        placement: placement,\n        sortBy: sortKey,\n        sortDesc: sortDesc,\n        onLabelClick: onLegendLabelClick,\n        onToggleSort: onToggleSort || onToggleLegendSort,\n        onLabelMouseEnter: onMouseEnter,\n        onLabelMouseOut: onMouseOut,\n        itemRenderer: itemRenderer,\n        readonly: readonly\n      });\n\n    case LegendDisplayMode.List:\n      return /*#__PURE__*/_jsx(VizLegendList, {\n        className: className,\n        items: items,\n        placement: placement,\n        onLabelMouseEnter: onMouseEnter,\n        onLabelMouseOut: onMouseOut,\n        onLabelClick: onLegendLabelClick,\n        itemRenderer: itemRenderer,\n        readonly: readonly\n      });\n\n    default:\n      return null;\n  }\n}\nVizLegend.displayName = 'Legend';","map":{"version":3,"names":["React","useCallback","DataHoverClearEvent","DataHoverEvent","LegendDisplayMode","SeriesVisibilityChangeMode","usePanelContext","VizLegendList","VizLegendTable","SeriesVisibilityChangeBehavior","mapMouseEventToMode","VizLegend","items","displayMode","sortBy","sortKey","seriesVisibilityChangeBehavior","Isolate","sortDesc","onLabelClick","onToggleSort","placement","className","itemRenderer","readonly","eventBus","onToggleSeriesVisibility","onToggleLegendSort","onMouseEnter","item","event","publish","type","payload","raw","x","y","dataId","label","onMouseOut","onLegendLabelClick","Hide","AppendToSelection","Table","List","displayName"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/VizLegend/VizLegend.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\n\nimport { DataHoverClearEvent, DataHoverEvent } from '@grafana/data';\nimport { LegendDisplayMode } from '@grafana/schema';\n\nimport { SeriesVisibilityChangeMode, usePanelContext } from '../PanelChrome';\n\nimport { VizLegendList } from './VizLegendList';\nimport { VizLegendTable } from './VizLegendTable';\nimport { LegendProps, SeriesVisibilityChangeBehavior, VizLegendItem } from './types';\nimport { mapMouseEventToMode } from './utils';\n\n/**\n * @public\n */\nexport function VizLegend<T>({\n  items,\n  displayMode,\n  sortBy: sortKey,\n  seriesVisibilityChangeBehavior = SeriesVisibilityChangeBehavior.Isolate,\n  sortDesc,\n  onLabelClick,\n  onToggleSort,\n  placement,\n  className,\n  itemRenderer,\n  readonly,\n}: LegendProps<T>) {\n  const { eventBus, onToggleSeriesVisibility, onToggleLegendSort } = usePanelContext();\n\n  const onMouseEnter = useCallback(\n    (item: VizLegendItem, event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      eventBus?.publish({\n        type: DataHoverEvent.type,\n        payload: {\n          raw: event,\n          x: 0,\n          y: 0,\n          dataId: item.label,\n        },\n      });\n    },\n    [eventBus]\n  );\n\n  const onMouseOut = useCallback(\n    (item: VizLegendItem, event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      eventBus?.publish({\n        type: DataHoverClearEvent.type,\n        payload: {\n          raw: event,\n          x: 0,\n          y: 0,\n          dataId: item.label,\n        },\n      });\n    },\n    [eventBus]\n  );\n\n  const onLegendLabelClick = useCallback(\n    (item: VizLegendItem, event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      if (onLabelClick) {\n        onLabelClick(item, event);\n      }\n      if (onToggleSeriesVisibility) {\n        onToggleSeriesVisibility(\n          item.label,\n          seriesVisibilityChangeBehavior === SeriesVisibilityChangeBehavior.Hide\n            ? SeriesVisibilityChangeMode.AppendToSelection\n            : mapMouseEventToMode(event)\n        );\n      }\n    },\n    [onToggleSeriesVisibility, onLabelClick, seriesVisibilityChangeBehavior]\n  );\n\n  switch (displayMode) {\n    case LegendDisplayMode.Table:\n      return (\n        <VizLegendTable<T>\n          className={className}\n          items={items}\n          placement={placement}\n          sortBy={sortKey}\n          sortDesc={sortDesc}\n          onLabelClick={onLegendLabelClick}\n          onToggleSort={onToggleSort || onToggleLegendSort}\n          onLabelMouseEnter={onMouseEnter}\n          onLabelMouseOut={onMouseOut}\n          itemRenderer={itemRenderer}\n          readonly={readonly}\n        />\n      );\n    case LegendDisplayMode.List:\n      return (\n        <VizLegendList<T>\n          className={className}\n          items={items}\n          placement={placement}\n          onLabelMouseEnter={onMouseEnter}\n          onLabelMouseOut={onMouseOut}\n          onLabelClick={onLegendLabelClick}\n          itemRenderer={itemRenderer}\n          readonly={readonly}\n        />\n      );\n    default:\n      return null;\n  }\n}\n\nVizLegend.displayName = 'Legend';\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}