{"ast":null,"code":"import { getDataSourceByName } from '../utils/datasource';\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\nexport function useRulesSourcesWithRuler() {\n  const dataSources = useUnifiedAlertingSelector(state => state.dataSources);\n  const dataSourcesWithRuler = Object.values(dataSources).map(ds => ds.result).filter(ds => Boolean(ds === null || ds === void 0 ? void 0 : ds.rulerConfig)); // try fetching rules for each prometheus to see if it has ruler\n\n  return dataSourcesWithRuler.map(ds => getDataSourceByName(ds.name)).filter(dsConfig => Boolean(dsConfig));\n}","map":{"version":3,"names":["getDataSourceByName","useUnifiedAlertingSelector","useRulesSourcesWithRuler","dataSources","state","dataSourcesWithRuler","Object","values","map","ds","result","filter","Boolean","rulerConfig","name","dsConfig"],"sources":["/home/soula/grafana/public/app/features/alerting/unified/hooks/useRuleSourcesWithRuler.ts"],"sourcesContent":["import { DataSourceInstanceSettings } from '@grafana/data';\nimport { PromBasedDataSource } from 'app/types/unified-alerting';\n\nimport { getDataSourceByName } from '../utils/datasource';\n\nimport { useUnifiedAlertingSelector } from './useUnifiedAlertingSelector';\n\nexport function useRulesSourcesWithRuler(): DataSourceInstanceSettings[] {\n  const dataSources = useUnifiedAlertingSelector((state) => state.dataSources);\n\n  const dataSourcesWithRuler = Object.values(dataSources)\n    .map((ds) => ds.result)\n    .filter((ds): ds is PromBasedDataSource => Boolean(ds?.rulerConfig));\n  // try fetching rules for each prometheus to see if it has ruler\n\n  return dataSourcesWithRuler\n    .map((ds) => getDataSourceByName(ds.name))\n    .filter((dsConfig): dsConfig is DataSourceInstanceSettings => Boolean(dsConfig));\n}\n"],"mappings":"AAGA,SAASA,mBAAT,QAAoC,qBAApC;AAEA,SAASC,0BAAT,QAA2C,8BAA3C;AAEA,OAAO,SAASC,wBAAT,GAAkE;EACvE,MAAMC,WAAW,GAAGF,0BAA0B,CAAEG,KAAD,IAAWA,KAAK,CAACD,WAAlB,CAA9C;EAEA,MAAME,oBAAoB,GAAGC,MAAM,CAACC,MAAP,CAAcJ,WAAd,EAC1BK,GAD0B,CACrBC,EAAD,IAAQA,EAAE,CAACC,MADW,EAE1BC,MAF0B,CAElBF,EAAD,IAAmCG,OAAO,CAACH,EAAD,aAACA,EAAD,uBAACA,EAAE,CAAEI,WAAL,CAFvB,CAA7B,CAHuE,CAMvE;;EAEA,OAAOR,oBAAoB,CACxBG,GADI,CACCC,EAAD,IAAQT,mBAAmB,CAACS,EAAE,CAACK,IAAJ,CAD3B,EAEJH,MAFI,CAEII,QAAD,IAAsDH,OAAO,CAACG,QAAD,CAFhE,CAAP;AAGD"},"metadata":{},"sourceType":"module"}