{"ast":null,"code":"import { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { Button, CodeEditor, Modal, useTheme2 } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport const ExportStartButton = () => {\n  var _JSON$stringify;\n\n  const styles = getStyles(useTheme2());\n  const [open, setOpen] = useState(false);\n  const [body, setBody] = useState({\n    format: 'git',\n    git: {}\n  });\n\n  const onDismiss = () => setOpen(false);\n\n  const doStart = () => {\n    getBackendSrv().post('/api/admin/export', body).then(v => {\n      console.log('GOT', v);\n      onDismiss();\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Modal, {\n      title: 'Export grafana instance',\n      isOpen: open,\n      onDismiss: onDismiss,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.wrap,\n        children: /*#__PURE__*/_jsx(CodeEditor, {\n          height: 200,\n          value: (_JSON$stringify = JSON.stringify(body, null, 2)) !== null && _JSON$stringify !== void 0 ? _JSON$stringify : '',\n          showLineNumbers: false,\n          readOnly: false,\n          language: \"json\",\n          showMiniMap: false,\n          onBlur: text => {\n            setBody(JSON.parse(text)); // force JSON?\n          }\n        })\n      }), /*#__PURE__*/_jsxs(Modal.ButtonRow, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          onClick: doStart,\n          children: \"Start\"\n        }), /*#__PURE__*/_jsx(Button, {\n          variant: \"secondary\",\n          onClick: onDismiss,\n          children: \"Cancel\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(Button, {\n      onClick: () => setOpen(true),\n      variant: \"primary\",\n      children: \"Export\"\n    })]\n  });\n};\n\nconst getStyles = theme => {\n  return {\n    wrap: css`\n      border: 2px solid #111;\n    `\n  };\n};","map":{"version":3,"names":["css","React","useState","getBackendSrv","Button","CodeEditor","Modal","useTheme2","ExportStartButton","styles","getStyles","open","setOpen","body","setBody","format","git","onDismiss","doStart","post","then","v","console","log","wrap","JSON","stringify","text","parse","theme"],"sources":["/home/soula/grafana/public/app/features/admin/ExportStartButton.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { Button, CodeEditor, Modal, useTheme2 } from '@grafana/ui';\n\nexport const ExportStartButton = () => {\n  const styles = getStyles(useTheme2());\n  const [open, setOpen] = useState(false);\n  const [body, setBody] = useState({\n    format: 'git',\n    git: {},\n  });\n  const onDismiss = () => setOpen(false);\n  const doStart = () => {\n    getBackendSrv()\n      .post('/api/admin/export', body)\n      .then((v) => {\n        console.log('GOT', v);\n        onDismiss();\n      });\n  };\n\n  return (\n    <>\n      <Modal title={'Export grafana instance'} isOpen={open} onDismiss={onDismiss}>\n        <div className={styles.wrap}>\n          <CodeEditor\n            height={200}\n            value={JSON.stringify(body, null, 2) ?? ''}\n            showLineNumbers={false}\n            readOnly={false}\n            language=\"json\"\n            showMiniMap={false}\n            onBlur={(text: string) => {\n              setBody(JSON.parse(text)); // force JSON?\n            }}\n          />\n        </div>\n        <Modal.ButtonRow>\n          <Button onClick={doStart}>Start</Button>\n          <Button variant=\"secondary\" onClick={onDismiss}>\n            Cancel\n          </Button>\n        </Modal.ButtonRow>\n      </Modal>\n\n      <Button onClick={() => setOpen(true)} variant=\"primary\">\n        Export\n      </Button>\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrap: css`\n      border: 2px solid #111;\n    `,\n  };\n};\n"],"mappings":"AAAA,SAASA,GAAT,QAAoB,cAApB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAGA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,MAAT,EAAiBC,UAAjB,EAA6BC,KAA7B,EAAoCC,SAApC,QAAqD,aAArD;;;;AAEA,OAAO,MAAMC,iBAAiB,GAAG,MAAM;EAAA;;EACrC,MAAMC,MAAM,GAAGC,SAAS,CAACH,SAAS,EAAV,CAAxB;EACA,MAAM,CAACI,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,KAAD,CAAhC;EACA,MAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC;IAC/Ba,MAAM,EAAE,KADuB;IAE/BC,GAAG,EAAE;EAF0B,CAAD,CAAhC;;EAIA,MAAMC,SAAS,GAAG,MAAML,OAAO,CAAC,KAAD,CAA/B;;EACA,MAAMM,OAAO,GAAG,MAAM;IACpBf,aAAa,GACVgB,IADH,CACQ,mBADR,EAC6BN,IAD7B,EAEGO,IAFH,CAESC,CAAD,IAAO;MACXC,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBF,CAAnB;MACAJ,SAAS;IACV,CALH;EAMD,CAPD;;EASA,oBACE;IAAA,wBACE,MAAC,KAAD;MAAO,KAAK,EAAE,yBAAd;MAAyC,MAAM,EAAEN,IAAjD;MAAuD,SAAS,EAAEM,SAAlE;MAAA,wBACE;QAAK,SAAS,EAAER,MAAM,CAACe,IAAvB;QAAA,uBACE,KAAC,UAAD;UACE,MAAM,EAAE,GADV;UAEE,KAAK,qBAAEC,IAAI,CAACC,SAAL,CAAeb,IAAf,EAAqB,IAArB,EAA2B,CAA3B,CAAF,6DAAmC,EAF1C;UAGE,eAAe,EAAE,KAHnB;UAIE,QAAQ,EAAE,KAJZ;UAKE,QAAQ,EAAC,MALX;UAME,WAAW,EAAE,KANf;UAOE,MAAM,EAAGc,IAAD,IAAkB;YACxBb,OAAO,CAACW,IAAI,CAACG,KAAL,CAAWD,IAAX,CAAD,CAAP,CADwB,CACG;UAC5B;QATH;MADF,EADF,eAcE,MAAC,KAAD,CAAO,SAAP;QAAA,wBACE,KAAC,MAAD;UAAQ,OAAO,EAAET,OAAjB;UAAA;QAAA,EADF,eAEE,KAAC,MAAD;UAAQ,OAAO,EAAC,WAAhB;UAA4B,OAAO,EAAED,SAArC;UAAA;QAAA,EAFF;MAAA,EAdF;IAAA,EADF,eAuBE,KAAC,MAAD;MAAQ,OAAO,EAAE,MAAML,OAAO,CAAC,IAAD,CAA9B;MAAsC,OAAO,EAAC,SAA9C;MAAA;IAAA,EAvBF;EAAA,EADF;AA6BD,CA9CM;;AAgDP,MAAMF,SAAS,GAAImB,KAAD,IAA0B;EAC1C,OAAO;IACLL,IAAI,EAAExB,GAAI;AACd;AACA;EAHS,CAAP;AAKD,CAND"},"metadata":{},"sourceType":"module"}