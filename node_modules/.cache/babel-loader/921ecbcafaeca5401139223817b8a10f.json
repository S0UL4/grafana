{"ast":null,"code":"// Node.closest() polyfill\nif (typeof window !== 'undefined' && 'Element' in window && !Element.prototype.closest) {\n  Element.prototype.closest = function (s) {\n    const matches = (this.document || this.ownerDocument).querySelectorAll(s);\n    let el = this;\n    let i; // eslint-disable-next-line\n\n    do {\n      i = matches.length; // eslint-disable-next-line\n\n      while (--i >= 0 && matches.item(i) !== el) {}\n\n      el = el.parentElement;\n    } while (i < 0 && el);\n\n    return el;\n  };\n}\n\nexport function getPreviousCousin(node, selector) {\n  let sibling = node.parentElement.previousSibling;\n  let el;\n\n  while (sibling) {\n    el = sibling.querySelector(selector);\n\n    if (el) {\n      return el;\n    }\n\n    sibling = sibling.previousSibling;\n  }\n\n  return undefined;\n}\nexport function getNextCharacter(global) {\n  const selection = (global || window).getSelection();\n\n  if (!selection || !selection.anchorNode) {\n    return null;\n  }\n\n  const range = selection.getRangeAt(0);\n  const text = selection.anchorNode.textContent;\n  const offset = range.startOffset;\n  return text.slice(offset, offset + 1);\n}","map":{"version":3,"names":["window","Element","prototype","closest","s","matches","document","ownerDocument","querySelectorAll","el","i","length","item","parentElement","getPreviousCousin","node","selector","sibling","previousSibling","querySelector","undefined","getNextCharacter","global","selection","getSelection","anchorNode","range","getRangeAt","text","textContent","offset","startOffset","slice"],"sources":["/home/soula/grafana/packages/grafana-ui/src/utils/dom.ts"],"sourcesContent":["// Node.closest() polyfill\nif (typeof window !== 'undefined' && 'Element' in window && !Element.prototype.closest) {\n  Element.prototype.closest = function (this: any, s: string) {\n    const matches = (this.document || this.ownerDocument).querySelectorAll(s);\n    let el = this;\n    let i;\n    // eslint-disable-next-line\n    do {\n      i = matches.length;\n      // eslint-disable-next-line\n      while (--i >= 0 && matches.item(i) !== el) {}\n      el = el.parentElement;\n    } while (i < 0 && el);\n    return el;\n  };\n}\n\nexport function getPreviousCousin(node: any, selector: string) {\n  let sibling = node.parentElement.previousSibling;\n  let el;\n  while (sibling) {\n    el = sibling.querySelector(selector);\n    if (el) {\n      return el;\n    }\n    sibling = sibling.previousSibling;\n  }\n  return undefined;\n}\n\nexport function getNextCharacter(global?: any) {\n  const selection = (global || window).getSelection();\n  if (!selection || !selection.anchorNode) {\n    return null;\n  }\n\n  const range = selection.getRangeAt(0);\n  const text = selection.anchorNode.textContent;\n  const offset = range.startOffset;\n  return text!.slice(offset, offset + 1);\n}\n"],"mappings":"AAAA;AACA,IAAI,OAAOA,MAAP,KAAkB,WAAlB,IAAiC,aAAaA,MAA9C,IAAwD,CAACC,OAAO,CAACC,SAAR,CAAkBC,OAA/E,EAAwF;EACtFF,OAAO,CAACC,SAAR,CAAkBC,OAAlB,GAA4B,UAAqBC,CAArB,EAAgC;IAC1D,MAAMC,OAAO,GAAG,CAAC,KAAKC,QAAL,IAAiB,KAAKC,aAAvB,EAAsCC,gBAAtC,CAAuDJ,CAAvD,CAAhB;IACA,IAAIK,EAAE,GAAG,IAAT;IACA,IAAIC,CAAJ,CAH0D,CAI1D;;IACA,GAAG;MACDA,CAAC,GAAGL,OAAO,CAACM,MAAZ,CADC,CAED;;MACA,OAAO,EAAED,CAAF,IAAO,CAAP,IAAYL,OAAO,CAACO,IAAR,CAAaF,CAAb,MAAoBD,EAAvC,EAA2C,CAAE;;MAC7CA,EAAE,GAAGA,EAAE,CAACI,aAAR;IACD,CALD,QAKSH,CAAC,GAAG,CAAJ,IAASD,EALlB;;IAMA,OAAOA,EAAP;EACD,CAZD;AAaD;;AAED,OAAO,SAASK,iBAAT,CAA2BC,IAA3B,EAAsCC,QAAtC,EAAwD;EAC7D,IAAIC,OAAO,GAAGF,IAAI,CAACF,aAAL,CAAmBK,eAAjC;EACA,IAAIT,EAAJ;;EACA,OAAOQ,OAAP,EAAgB;IACdR,EAAE,GAAGQ,OAAO,CAACE,aAAR,CAAsBH,QAAtB,CAAL;;IACA,IAAIP,EAAJ,EAAQ;MACN,OAAOA,EAAP;IACD;;IACDQ,OAAO,GAAGA,OAAO,CAACC,eAAlB;EACD;;EACD,OAAOE,SAAP;AACD;AAED,OAAO,SAASC,gBAAT,CAA0BC,MAA1B,EAAwC;EAC7C,MAAMC,SAAS,GAAG,CAACD,MAAM,IAAItB,MAAX,EAAmBwB,YAAnB,EAAlB;;EACA,IAAI,CAACD,SAAD,IAAc,CAACA,SAAS,CAACE,UAA7B,EAAyC;IACvC,OAAO,IAAP;EACD;;EAED,MAAMC,KAAK,GAAGH,SAAS,CAACI,UAAV,CAAqB,CAArB,CAAd;EACA,MAAMC,IAAI,GAAGL,SAAS,CAACE,UAAV,CAAqBI,WAAlC;EACA,MAAMC,MAAM,GAAGJ,KAAK,CAACK,WAArB;EACA,OAAOH,IAAI,CAAEI,KAAN,CAAYF,MAAZ,EAAoBA,MAAM,GAAG,CAA7B,CAAP;AACD"},"metadata":{},"sourceType":"module"}