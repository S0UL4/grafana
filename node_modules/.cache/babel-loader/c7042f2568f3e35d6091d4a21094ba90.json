{"ast":null,"code":"import { useCallback, useState } from 'react';\nexport function usePlaylistItems(playlistItems) {\n  const [items, setItems] = useState(playlistItems !== null && playlistItems !== void 0 ? playlistItems : []);\n  const addById = useCallback(dashboard => {\n    if (!dashboard || items.find(item => item.id === dashboard.id)) {\n      return;\n    }\n\n    const newItem = {\n      id: dashboard.id,\n      title: dashboard.label,\n      type: 'dashboard_by_id',\n      value: dashboard.id.toString(10),\n      order: items.length + 1\n    };\n    setItems([...items, newItem]);\n  }, [items]);\n  const addByTag = useCallback(tags => {\n    const tag = tags[0];\n\n    if (!tag || items.find(item => item.value === tag)) {\n      return;\n    }\n\n    const newItem = {\n      title: tag,\n      type: 'dashboard_by_tag',\n      value: tag,\n      order: items.length + 1\n    };\n    setItems([...items, newItem]);\n  }, [items]);\n  const movePlaylistItem = useCallback((item, offset) => {\n    const newItems = [...items];\n    const currentPosition = newItems.indexOf(item);\n    const newPosition = currentPosition + offset;\n\n    if (newPosition >= 0 && newPosition < newItems.length) {\n      newItems.splice(currentPosition, 1);\n      newItems.splice(newPosition, 0, item);\n    }\n\n    setItems(newItems);\n  }, [items]);\n  const moveUp = useCallback(item => {\n    movePlaylistItem(item, -1);\n  }, [movePlaylistItem]);\n  const moveDown = useCallback(item => {\n    movePlaylistItem(item, 1);\n  }, [movePlaylistItem]);\n  const deleteItem = useCallback(item => {\n    setItems(items.filter(i => i !== item));\n  }, [items]);\n  return {\n    items,\n    addById,\n    addByTag,\n    deleteItem,\n    moveDown,\n    moveUp\n  };\n}","map":{"version":3,"names":["useCallback","useState","usePlaylistItems","playlistItems","items","setItems","addById","dashboard","find","item","id","newItem","title","label","type","value","toString","order","length","addByTag","tags","tag","movePlaylistItem","offset","newItems","currentPosition","indexOf","newPosition","splice","moveUp","moveDown","deleteItem","filter","i"],"sources":["/home/soula/grafana/public/app/features/playlist/usePlaylistItems.tsx"],"sourcesContent":["import { useCallback, useState } from 'react';\n\nimport { DashboardPickerItem } from 'app/core/components/OptionsUI/DashboardPickerByID';\n\nimport { PlaylistItem } from './types';\n\nexport function usePlaylistItems(playlistItems?: PlaylistItem[]) {\n  const [items, setItems] = useState<PlaylistItem[]>(playlistItems ?? []);\n\n  const addById = useCallback(\n    (dashboard?: DashboardPickerItem) => {\n      if (!dashboard || items.find((item) => item.id === dashboard.id)) {\n        return;\n      }\n\n      const newItem: PlaylistItem = {\n        id: dashboard.id,\n        title: dashboard.label as string,\n        type: 'dashboard_by_id',\n        value: dashboard.id.toString(10),\n        order: items.length + 1,\n      };\n      setItems([...items, newItem]);\n    },\n    [items]\n  );\n\n  const addByTag = useCallback(\n    (tags: string[]) => {\n      const tag = tags[0];\n      if (!tag || items.find((item) => item.value === tag)) {\n        return;\n      }\n\n      const newItem: PlaylistItem = {\n        title: tag,\n        type: 'dashboard_by_tag',\n        value: tag,\n        order: items.length + 1,\n      };\n      setItems([...items, newItem]);\n    },\n    [items]\n  );\n\n  const movePlaylistItem = useCallback(\n    (item: PlaylistItem, offset: number) => {\n      const newItems = [...items];\n      const currentPosition = newItems.indexOf(item);\n      const newPosition = currentPosition + offset;\n\n      if (newPosition >= 0 && newPosition < newItems.length) {\n        newItems.splice(currentPosition, 1);\n        newItems.splice(newPosition, 0, item);\n      }\n      setItems(newItems);\n    },\n    [items]\n  );\n\n  const moveUp = useCallback(\n    (item: PlaylistItem) => {\n      movePlaylistItem(item, -1);\n    },\n    [movePlaylistItem]\n  );\n\n  const moveDown = useCallback(\n    (item: PlaylistItem) => {\n      movePlaylistItem(item, 1);\n    },\n    [movePlaylistItem]\n  );\n\n  const deleteItem = useCallback(\n    (item: PlaylistItem) => {\n      setItems(items.filter((i) => i !== item));\n    },\n    [items]\n  );\n\n  return { items, addById, addByTag, deleteItem, moveDown, moveUp };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}