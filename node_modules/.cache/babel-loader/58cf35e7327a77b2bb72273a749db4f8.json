{"ast":null,"code":"var _th;\n\nimport { css, cx } from '@emotion/css';\nimport { orderBy } from 'lodash';\nimport React from 'react';\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { Icon } from '../Icon/Icon';\nimport { LegendTableItem } from './VizLegendTableItem';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\n/**\n * @internal\n */\nexport const VizLegendTable = ({\n  items,\n  sortBy: sortKey,\n  sortDesc,\n  itemRenderer,\n  className,\n  onToggleSort,\n  onLabelClick,\n  onLabelMouseEnter,\n  onLabelMouseOut,\n  readonly\n}) => {\n  const styles = useStyles2(getStyles);\n  const stats = {};\n\n  for (const item of items) {\n    if (item.getDisplayValues) {\n      for (const displayValue of item.getDisplayValues()) {\n        var _displayValue$title;\n\n        stats[(_displayValue$title = displayValue.title) !== null && _displayValue$title !== void 0 ? _displayValue$title : '?'] = displayValue;\n      }\n    }\n  }\n\n  const sortedItems = sortKey ? orderBy(items, item => {\n    if (item.getDisplayValues) {\n      const stat = item.getDisplayValues().filter(stat => stat.title === sortKey)[0];\n      return stat && stat.numeric;\n    }\n\n    return undefined;\n  }, sortDesc ? 'desc' : 'asc') : items;\n\n  if (!itemRenderer) {\n    /* eslint-disable-next-line react/display-name */\n    itemRenderer = (item, index) => /*#__PURE__*/_jsx(LegendTableItem, {\n      item: item,\n      onLabelClick: onLabelClick,\n      onLabelMouseEnter: onLabelMouseEnter,\n      onLabelMouseOut: onLabelMouseOut,\n      readonly: readonly\n    }, `${item.label}-${index}`);\n  }\n\n  return /*#__PURE__*/_jsxs(\"table\", {\n    className: cx(styles.table, className),\n    children: [/*#__PURE__*/_jsx(\"thead\", {\n      children: /*#__PURE__*/_jsxs(\"tr\", {\n        children: [_th || (_th = /*#__PURE__*/_jsx(\"th\", {})), Object.keys(stats).map(columnTitle => {\n          const displayValue = stats[columnTitle];\n          return /*#__PURE__*/_jsxs(\"th\", {\n            title: displayValue.description,\n            className: cx(styles.header, onToggleSort && styles.headerSortable, {\n              [styles.withIcon]: sortKey === columnTitle\n            }),\n            onClick: () => {\n              if (onToggleSort) {\n                onToggleSort(columnTitle);\n              }\n            },\n            children: [columnTitle, sortKey === columnTitle && /*#__PURE__*/_jsx(Icon, {\n              size: \"xs\",\n              name: sortDesc ? 'angle-down' : 'angle-up'\n            })]\n          }, columnTitle);\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"tbody\", {\n      children: sortedItems.map(itemRenderer)\n    })]\n  });\n};\n\nconst getStyles = theme => ({\n  table: css`\n    width: 100%;\n    th:first-child {\n      width: 100%;\n      border-bottom: 1px solid ${theme.colors.border.weak};\n    }\n  `,\n  header: css`\n    color: ${theme.colors.primary.text};\n    font-weight: ${theme.typography.fontWeightMedium};\n    border-bottom: 1px solid ${theme.colors.border.weak};\n    padding: ${theme.spacing(0.25, 2, 0.25, 1)};\n    font-size: ${theme.typography.bodySmall.fontSize};\n    text-align: left;\n    white-space: nowrap;\n  `,\n  // This needs to be padding-right - icon size(xs==12) to avoid jumping\n  withIcon: css`\n    padding-right: 4px;\n  `,\n  headerSortable: css`\n    cursor: pointer;\n  `\n});","map":{"version":3,"names":["css","cx","orderBy","React","useStyles2","Icon","LegendTableItem","VizLegendTable","items","sortBy","sortKey","sortDesc","itemRenderer","className","onToggleSort","onLabelClick","onLabelMouseEnter","onLabelMouseOut","readonly","styles","getStyles","stats","item","getDisplayValues","displayValue","title","sortedItems","stat","filter","numeric","undefined","index","label","table","Object","keys","map","columnTitle","description","header","headerSortable","withIcon","theme","colors","border","weak","primary","text","typography","fontWeightMedium","spacing","bodySmall","fontSize"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/VizLegend/VizLegendTable.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { orderBy } from 'lodash';\nimport React from 'react';\n\nimport { DisplayValue, GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { Icon } from '../Icon/Icon';\n\nimport { LegendTableItem } from './VizLegendTableItem';\nimport { VizLegendTableProps } from './types';\n\n/**\n * @internal\n */\nexport const VizLegendTable = <T extends unknown>({\n  items,\n  sortBy: sortKey,\n  sortDesc,\n  itemRenderer,\n  className,\n  onToggleSort,\n  onLabelClick,\n  onLabelMouseEnter,\n  onLabelMouseOut,\n  readonly,\n}: VizLegendTableProps<T>): JSX.Element => {\n  const styles = useStyles2(getStyles);\n  const stats: Record<string, DisplayValue> = {};\n\n  for (const item of items) {\n    if (item.getDisplayValues) {\n      for (const displayValue of item.getDisplayValues()) {\n        stats[displayValue.title ?? '?'] = displayValue;\n      }\n    }\n  }\n\n  const sortedItems = sortKey\n    ? orderBy(\n        items,\n        (item) => {\n          if (item.getDisplayValues) {\n            const stat = item.getDisplayValues().filter((stat) => stat.title === sortKey)[0];\n            return stat && stat.numeric;\n          }\n          return undefined;\n        },\n        sortDesc ? 'desc' : 'asc'\n      )\n    : items;\n\n  if (!itemRenderer) {\n    /* eslint-disable-next-line react/display-name */\n    itemRenderer = (item, index) => (\n      <LegendTableItem\n        key={`${item.label}-${index}`}\n        item={item}\n        onLabelClick={onLabelClick}\n        onLabelMouseEnter={onLabelMouseEnter}\n        onLabelMouseOut={onLabelMouseOut}\n        readonly={readonly}\n      />\n    );\n  }\n\n  return (\n    <table className={cx(styles.table, className)}>\n      <thead>\n        <tr>\n          <th></th>\n          {Object.keys(stats).map((columnTitle) => {\n            const displayValue = stats[columnTitle];\n            return (\n              <th\n                title={displayValue.description}\n                key={columnTitle}\n                className={cx(styles.header, onToggleSort && styles.headerSortable, {\n                  [styles.withIcon]: sortKey === columnTitle,\n                })}\n                onClick={() => {\n                  if (onToggleSort) {\n                    onToggleSort(columnTitle);\n                  }\n                }}\n              >\n                {columnTitle}\n                {sortKey === columnTitle && <Icon size=\"xs\" name={sortDesc ? 'angle-down' : 'angle-up'} />}\n              </th>\n            );\n          })}\n        </tr>\n      </thead>\n      <tbody>{sortedItems.map(itemRenderer!)}</tbody>\n    </table>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  table: css`\n    width: 100%;\n    th:first-child {\n      width: 100%;\n      border-bottom: 1px solid ${theme.colors.border.weak};\n    }\n  `,\n  header: css`\n    color: ${theme.colors.primary.text};\n    font-weight: ${theme.typography.fontWeightMedium};\n    border-bottom: 1px solid ${theme.colors.border.weak};\n    padding: ${theme.spacing(0.25, 2, 0.25, 1)};\n    font-size: ${theme.typography.bodySmall.fontSize};\n    text-align: left;\n    white-space: nowrap;\n  `,\n  // This needs to be padding-right - icon size(xs==12) to avoid jumping\n  withIcon: css`\n    padding-right: 4px;\n  `,\n  headerSortable: css`\n    cursor: pointer;\n  `,\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}