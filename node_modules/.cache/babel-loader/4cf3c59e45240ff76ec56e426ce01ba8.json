{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isEmpty } from 'lodash';\nimport React, { PureComponent } from 'react';\nimport { rangeUtil } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { CollapsableSection, Field, Input, Switch, TimeZonePicker, WeekStartPicker } from '@grafana/ui';\nimport { AutoRefreshIntervals } from './AutoRefreshIntervals';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport class TimePickerSettings extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      isNowDelayValid: true\n    });\n\n    _defineProperty(this, \"onNowDelayChange\", event => {\n      const value = event.currentTarget.value;\n\n      if (isEmpty(value)) {\n        this.setState({\n          isNowDelayValid: true\n        });\n        return this.props.onNowDelayChange(value);\n      }\n\n      if (rangeUtil.isValidTimeSpan(value)) {\n        this.setState({\n          isNowDelayValid: true\n        });\n        return this.props.onNowDelayChange(value);\n      }\n\n      this.setState({\n        isNowDelayValid: false\n      });\n    });\n\n    _defineProperty(this, \"onHideTimePickerChange\", () => {\n      this.props.onHideTimePickerChange(!this.props.timePickerHidden);\n    });\n\n    _defineProperty(this, \"onLiveNowChange\", () => {\n      this.props.onLiveNowChange(!this.props.liveNow);\n    });\n\n    _defineProperty(this, \"onTimeZoneChange\", timeZone => {\n      if (typeof timeZone !== 'string') {\n        return;\n      }\n\n      this.props.onTimeZoneChange(timeZone);\n    });\n\n    _defineProperty(this, \"onWeekStartChange\", weekStart => {\n      this.props.onWeekStartChange(weekStart);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(CollapsableSection, {\n      label: \"Time options\",\n      isOpen: true,\n      children: [/*#__PURE__*/_jsx(Field, {\n        label: \"Timezone\",\n        \"data-testid\": selectors.components.TimeZonePicker.containerV2,\n        children: /*#__PURE__*/_jsx(TimeZonePicker, {\n          inputId: \"time-options-input\",\n          includeInternal: true,\n          value: this.props.timezone,\n          onChange: this.onTimeZoneChange,\n          width: 40\n        })\n      }), /*#__PURE__*/_jsx(Field, {\n        label: \"Week start\",\n        \"data-testid\": selectors.components.WeekStartPicker.containerV2,\n        children: /*#__PURE__*/_jsx(WeekStartPicker, {\n          inputId: \"week-start-input\",\n          width: 40,\n          value: this.props.weekStart,\n          onChange: this.onWeekStartChange\n        })\n      }), /*#__PURE__*/_jsx(AutoRefreshIntervals, {\n        refreshIntervals: this.props.refreshIntervals,\n        onRefreshIntervalChange: this.props.onRefreshIntervalChange\n      }), /*#__PURE__*/_jsx(Field, {\n        label: \"Now delay\",\n        description: \"Exclude recent data that may be incomplete.\",\n        children: /*#__PURE__*/_jsx(Input, {\n          id: \"now-delay-input\",\n          invalid: !this.state.isNowDelayValid,\n          placeholder: \"0m\",\n          onChange: this.onNowDelayChange,\n          defaultValue: this.props.nowDelay\n        })\n      }), /*#__PURE__*/_jsx(Field, {\n        label: \"Hide time picker\",\n        children: /*#__PURE__*/_jsx(Switch, {\n          id: \"hide-time-picker-toggle\",\n          value: !!this.props.timePickerHidden,\n          onChange: this.onHideTimePickerChange\n        })\n      }), /*#__PURE__*/_jsx(Field, {\n        label: \"Refresh live dashboards\",\n        description: \"Continuously re-draw panels where the time range references 'now'\",\n        children: /*#__PURE__*/_jsx(Switch, {\n          id: \"refresh-live-dashboards-toggle\",\n          value: !!this.props.liveNow,\n          onChange: this.onLiveNowChange\n        })\n      })]\n    });\n  }\n\n}","map":{"version":3,"names":["isEmpty","React","PureComponent","rangeUtil","selectors","CollapsableSection","Field","Input","Switch","TimeZonePicker","WeekStartPicker","AutoRefreshIntervals","TimePickerSettings","isNowDelayValid","event","value","currentTarget","setState","props","onNowDelayChange","isValidTimeSpan","onHideTimePickerChange","timePickerHidden","onLiveNowChange","liveNow","timeZone","onTimeZoneChange","weekStart","onWeekStartChange","render","components","containerV2","timezone","refreshIntervals","onRefreshIntervalChange","state","nowDelay"],"sources":["/home/soula/grafana/public/app/features/dashboard/components/DashboardSettings/TimePickerSettings.tsx"],"sourcesContent":["import { isEmpty } from 'lodash';\nimport React, { PureComponent } from 'react';\n\nimport { rangeUtil, TimeZone } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { CollapsableSection, Field, Input, Switch, TimeZonePicker, WeekStartPicker } from '@grafana/ui';\n\nimport { AutoRefreshIntervals } from './AutoRefreshIntervals';\n\ninterface Props {\n  onWeekStartChange: (weekStart: string) => void;\n  onTimeZoneChange: (timeZone: TimeZone) => void;\n  onRefreshIntervalChange: (interval: string[]) => void;\n  onNowDelayChange: (nowDelay: string) => void;\n  onHideTimePickerChange: (hide: boolean) => void;\n  onLiveNowChange: (liveNow: boolean) => void;\n  refreshIntervals: string[];\n  timePickerHidden: boolean;\n  nowDelay: string;\n  timezone: TimeZone;\n  weekStart: string;\n  liveNow: boolean;\n}\n\ninterface State {\n  isNowDelayValid: boolean;\n}\n\nexport class TimePickerSettings extends PureComponent<Props, State> {\n  state: State = { isNowDelayValid: true };\n\n  onNowDelayChange = (event: React.FormEvent<HTMLInputElement>) => {\n    const value = event.currentTarget.value;\n\n    if (isEmpty(value)) {\n      this.setState({ isNowDelayValid: true });\n      return this.props.onNowDelayChange(value);\n    }\n\n    if (rangeUtil.isValidTimeSpan(value)) {\n      this.setState({ isNowDelayValid: true });\n      return this.props.onNowDelayChange(value);\n    }\n\n    this.setState({ isNowDelayValid: false });\n  };\n\n  onHideTimePickerChange = () => {\n    this.props.onHideTimePickerChange(!this.props.timePickerHidden);\n  };\n\n  onLiveNowChange = () => {\n    this.props.onLiveNowChange(!this.props.liveNow);\n  };\n\n  onTimeZoneChange = (timeZone?: string) => {\n    if (typeof timeZone !== 'string') {\n      return;\n    }\n    this.props.onTimeZoneChange(timeZone);\n  };\n\n  onWeekStartChange = (weekStart: string) => {\n    this.props.onWeekStartChange(weekStart);\n  };\n\n  render() {\n    return (\n      <CollapsableSection label=\"Time options\" isOpen={true}>\n        <Field label=\"Timezone\" data-testid={selectors.components.TimeZonePicker.containerV2}>\n          <TimeZonePicker\n            inputId=\"time-options-input\"\n            includeInternal={true}\n            value={this.props.timezone}\n            onChange={this.onTimeZoneChange}\n            width={40}\n          />\n        </Field>\n        <Field label=\"Week start\" data-testid={selectors.components.WeekStartPicker.containerV2}>\n          <WeekStartPicker\n            inputId=\"week-start-input\"\n            width={40}\n            value={this.props.weekStart}\n            onChange={this.onWeekStartChange}\n          />\n        </Field>\n        <AutoRefreshIntervals\n          refreshIntervals={this.props.refreshIntervals}\n          onRefreshIntervalChange={this.props.onRefreshIntervalChange}\n        />\n        <Field label=\"Now delay\" description=\"Exclude recent data that may be incomplete.\">\n          <Input\n            id=\"now-delay-input\"\n            invalid={!this.state.isNowDelayValid}\n            placeholder=\"0m\"\n            onChange={this.onNowDelayChange}\n            defaultValue={this.props.nowDelay}\n          />\n        </Field>\n        <Field label=\"Hide time picker\">\n          <Switch\n            id=\"hide-time-picker-toggle\"\n            value={!!this.props.timePickerHidden}\n            onChange={this.onHideTimePickerChange}\n          />\n        </Field>\n        <Field\n          label=\"Refresh live dashboards\"\n          description=\"Continuously re-draw panels where the time range references 'now'\"\n        >\n          <Switch id=\"refresh-live-dashboards-toggle\" value={!!this.props.liveNow} onChange={this.onLiveNowChange} />\n        </Field>\n      </CollapsableSection>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}