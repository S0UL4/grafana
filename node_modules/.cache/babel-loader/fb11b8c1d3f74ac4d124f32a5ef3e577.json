{"ast":null,"code":"var _td;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Select, DeleteButton } from '@grafana/ui';\nimport { TagBadge } from 'app/core/components/TagFilter/TagBadge';\nimport { WithFeatureToggle } from 'app/core/components/WithFeatureToggle';\nimport { teamsPermissionLevels } from 'app/types';\nimport { updateTeamMember, removeTeamMember } from './state/actions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst mapDispatchToProps = {\n  removeTeamMember,\n  updateTeamMember\n};\nconst connector = connect(null, mapDispatchToProps);\nexport class TeamMemberRow extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onPermissionChange\", (item, member) => {\n      const permission = item.value;\n      const updatedTeamMember = Object.assign({}, member, {\n        permission: permission\n      });\n      this.props.updateTeamMember(updatedTeamMember);\n    });\n\n    this.renderLabels = this.renderLabels.bind(this);\n    this.renderPermissions = this.renderPermissions.bind(this);\n  }\n\n  onRemoveMember(member) {\n    this.props.removeTeamMember(member.userId);\n  }\n\n  renderPermissions(member) {\n    const {\n      editorsCanAdmin,\n      signedInUserIsTeamAdmin\n    } = this.props;\n    const value = teamsPermissionLevels.find(dp => dp.value === member.permission);\n    return /*#__PURE__*/_jsx(WithFeatureToggle, {\n      featureToggle: editorsCanAdmin,\n      children: /*#__PURE__*/_jsx(\"td\", {\n        className: \"width-5 team-permissions\",\n        children: signedInUserIsTeamAdmin ? /*#__PURE__*/_jsx(Select, {\n          isSearchable: false,\n          options: teamsPermissionLevels,\n          onChange: item => this.onPermissionChange(item, member),\n          value: value,\n          width: 32,\n          \"aria-label\": `Select member's ${member.name} permission level`\n        }) : /*#__PURE__*/_jsx(\"span\", {\n          children: value.label\n        })\n      })\n    });\n  }\n\n  renderLabels(labels) {\n    if (!labels) {\n      return _td || (_td = /*#__PURE__*/_jsx(\"td\", {}));\n    }\n\n    return /*#__PURE__*/_jsx(\"td\", {\n      children: labels.map(label => /*#__PURE__*/_jsx(TagBadge, {\n        label: label,\n        removeIcon: false,\n        count: 0,\n        onClick: () => {}\n      }, label))\n    });\n  }\n\n  render() {\n    const {\n      member,\n      syncEnabled,\n      signedInUserIsTeamAdmin\n    } = this.props;\n    return /*#__PURE__*/_jsxs(\"tr\", {\n      children: [/*#__PURE__*/_jsx(\"td\", {\n        className: \"width-4 text-center\",\n        children: /*#__PURE__*/_jsx(\"img\", {\n          alt: `Avatar for team member \"${member.name}\"`,\n          className: \"filter-table__avatar\",\n          src: member.avatarUrl\n        })\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: member.login\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: member.email\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: member.name\n      }), this.renderPermissions(member), syncEnabled && this.renderLabels(member.labels), /*#__PURE__*/_jsx(\"td\", {\n        className: \"text-right\",\n        children: /*#__PURE__*/_jsx(DeleteButton, {\n          \"aria-label\": `Remove team member ${member.name}`,\n          size: \"sm\",\n          disabled: !signedInUserIsTeamAdmin,\n          onConfirm: () => this.onRemoveMember(member)\n        })\n      })]\n    }, member.userId);\n  }\n\n}\nexport default connector(TeamMemberRow);","map":{"version":3,"names":["React","PureComponent","connect","Select","DeleteButton","TagBadge","WithFeatureToggle","teamsPermissionLevels","updateTeamMember","removeTeamMember","mapDispatchToProps","connector","TeamMemberRow","constructor","props","item","member","permission","value","updatedTeamMember","renderLabels","bind","renderPermissions","onRemoveMember","userId","editorsCanAdmin","signedInUserIsTeamAdmin","find","dp","onPermissionChange","name","label","labels","map","render","syncEnabled","avatarUrl","login","email"],"sources":["/home/soula/grafana/public/app/features/teams/TeamMemberRow.tsx"],"sourcesContent":["import React, { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select, DeleteButton } from '@grafana/ui';\nimport { TagBadge } from 'app/core/components/TagFilter/TagBadge';\nimport { WithFeatureToggle } from 'app/core/components/WithFeatureToggle';\nimport { TeamMember, teamsPermissionLevels, TeamPermissionLevel } from 'app/types';\n\nimport { updateTeamMember, removeTeamMember } from './state/actions';\n\nconst mapDispatchToProps = {\n  removeTeamMember,\n  updateTeamMember,\n};\n\nconst connector = connect(null, mapDispatchToProps);\n\ninterface OwnProps {\n  member: TeamMember;\n  syncEnabled: boolean;\n  editorsCanAdmin: boolean;\n  signedInUserIsTeamAdmin: boolean;\n}\nexport type Props = ConnectedProps<typeof connector> & OwnProps;\n\nexport class TeamMemberRow extends PureComponent<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.renderLabels = this.renderLabels.bind(this);\n    this.renderPermissions = this.renderPermissions.bind(this);\n  }\n\n  onRemoveMember(member: TeamMember) {\n    this.props.removeTeamMember(member.userId);\n  }\n\n  onPermissionChange = (item: SelectableValue<TeamPermissionLevel>, member: TeamMember) => {\n    const permission = item.value;\n    const updatedTeamMember: TeamMember = {\n      ...member,\n      permission: permission as number,\n    };\n\n    this.props.updateTeamMember(updatedTeamMember);\n  };\n\n  renderPermissions(member: TeamMember) {\n    const { editorsCanAdmin, signedInUserIsTeamAdmin } = this.props;\n    const value = teamsPermissionLevels.find((dp) => dp.value === member.permission)!;\n\n    return (\n      <WithFeatureToggle featureToggle={editorsCanAdmin}>\n        <td className=\"width-5 team-permissions\">\n          {signedInUserIsTeamAdmin ? (\n            <Select\n              isSearchable={false}\n              options={teamsPermissionLevels}\n              onChange={(item) => this.onPermissionChange(item, member)}\n              value={value}\n              width={32}\n              aria-label={`Select member's ${member.name} permission level`}\n            />\n          ) : (\n            <span>{value.label}</span>\n          )}\n        </td>\n      </WithFeatureToggle>\n    );\n  }\n\n  renderLabels(labels: string[]) {\n    if (!labels) {\n      return <td />;\n    }\n\n    return (\n      <td>\n        {labels.map((label) => (\n          <TagBadge key={label} label={label} removeIcon={false} count={0} onClick={() => {}} />\n        ))}\n      </td>\n    );\n  }\n\n  render() {\n    const { member, syncEnabled, signedInUserIsTeamAdmin } = this.props;\n    return (\n      <tr key={member.userId}>\n        <td className=\"width-4 text-center\">\n          <img\n            alt={`Avatar for team member \"${member.name}\"`}\n            className=\"filter-table__avatar\"\n            src={member.avatarUrl}\n          />\n        </td>\n        <td>{member.login}</td>\n        <td>{member.email}</td>\n        <td>{member.name}</td>\n        {this.renderPermissions(member)}\n        {syncEnabled && this.renderLabels(member.labels)}\n        <td className=\"text-right\">\n          <DeleteButton\n            aria-label={`Remove team member ${member.name}`}\n            size=\"sm\"\n            disabled={!signedInUserIsTeamAdmin}\n            onConfirm={() => this.onRemoveMember(member)}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default connector(TeamMemberRow);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}