{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { css } from '@emotion/css';\nimport * as React from 'react';\nimport { withTheme2, stylesFactory } from '@grafana/ui';\nimport { autoColor } from '../../Theme';\nimport { getRgbColorByKey } from '../../utils/color-generator';\nimport renderIntoCanvas from './render-into-canvas';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst getStyles = stylesFactory(theme => {\n  return {\n    CanvasSpanGraph: css`\n      label: CanvasSpanGraph;\n      background: ${autoColor(theme, '#fafafa')};\n      height: 60px;\n      position: absolute;\n      width: 100%;\n    `\n  };\n});\nexport class UnthemedCanvasSpanGraph extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"_canvasElm\", void 0);\n\n    _defineProperty(this, \"getColor\", key => getRgbColorByKey(key, this.props.theme));\n\n    _defineProperty(this, \"_setCanvasRef\", elm => {\n      this._canvasElm = elm;\n    });\n\n    this._canvasElm = undefined;\n  }\n\n  componentDidMount() {\n    this._draw();\n  }\n\n  componentDidUpdate() {\n    this._draw();\n  }\n\n  _draw() {\n    if (this._canvasElm) {\n      const {\n        valueWidth: totalValueWidth,\n        items\n      } = this.props;\n      renderIntoCanvas(this._canvasElm, items, totalValueWidth, this.getColor, autoColor(this.props.theme, '#fff'));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(\"canvas\", {\n      className: getStyles(this.props.theme).CanvasSpanGraph,\n      ref: this._setCanvasRef\n    });\n  }\n\n}\nexport default withTheme2(UnthemedCanvasSpanGraph);","map":{"version":3,"names":["css","React","withTheme2","stylesFactory","autoColor","getRgbColorByKey","renderIntoCanvas","getStyles","theme","CanvasSpanGraph","UnthemedCanvasSpanGraph","PureComponent","constructor","props","key","elm","_canvasElm","undefined","componentDidMount","_draw","componentDidUpdate","valueWidth","totalValueWidth","items","getColor","render","_setCanvasRef"],"sources":["/home/soula/grafana/packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/CanvasSpanGraph.tsx"],"sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { css } from '@emotion/css';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { withTheme2, stylesFactory } from '@grafana/ui';\n\nimport { autoColor } from '../../Theme';\nimport { TNil } from '../../types';\nimport { getRgbColorByKey } from '../../utils/color-generator';\n\nimport renderIntoCanvas from './render-into-canvas';\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => {\n  return {\n    CanvasSpanGraph: css`\n      label: CanvasSpanGraph;\n      background: ${autoColor(theme, '#fafafa')};\n      height: 60px;\n      position: absolute;\n      width: 100%;\n    `,\n  };\n});\n\ntype CanvasSpanGraphProps = {\n  items: Array<{ valueWidth: number; valueOffset: number; serviceName: string }>;\n  valueWidth: number;\n  theme: GrafanaTheme2;\n};\n\nexport class UnthemedCanvasSpanGraph extends React.PureComponent<CanvasSpanGraphProps> {\n  _canvasElm: HTMLCanvasElement | TNil;\n\n  constructor(props: CanvasSpanGraphProps) {\n    super(props);\n    this._canvasElm = undefined;\n  }\n\n  getColor = (key: string) => getRgbColorByKey(key, this.props.theme);\n\n  componentDidMount() {\n    this._draw();\n  }\n\n  componentDidUpdate() {\n    this._draw();\n  }\n\n  _setCanvasRef = (elm: HTMLCanvasElement | TNil) => {\n    this._canvasElm = elm;\n  };\n\n  _draw() {\n    if (this._canvasElm) {\n      const { valueWidth: totalValueWidth, items } = this.props;\n      renderIntoCanvas(this._canvasElm, items, totalValueWidth, this.getColor, autoColor(this.props.theme, '#fff'));\n    }\n  }\n\n  render() {\n    return <canvas className={getStyles(this.props.theme).CanvasSpanGraph} ref={this._setCanvasRef} />;\n  }\n}\n\nexport default withTheme2(UnthemedCanvasSpanGraph);\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,GAAT,QAAoB,cAApB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAGA,SAASC,UAAT,EAAqBC,aAArB,QAA0C,aAA1C;AAEA,SAASC,SAAT,QAA0B,aAA1B;AAEA,SAASC,gBAAT,QAAiC,6BAAjC;AAEA,OAAOC,gBAAP,MAA6B,sBAA7B;;AAEA,MAAMC,SAAS,GAAGJ,aAAa,CAAEK,KAAD,IAA0B;EACxD,OAAO;IACLC,eAAe,EAAET,GAAI;AACzB;AACA,oBAAoBI,SAAS,CAACI,KAAD,EAAQ,SAAR,CAAmB;AAChD;AACA;AACA;AACA;EAPS,CAAP;AASD,CAV8B,CAA/B;AAkBA,OAAO,MAAME,uBAAN,SAAsCT,KAAK,CAACU,aAA5C,CAAgF;EAGrFC,WAAW,CAACC,KAAD,EAA8B;IACvC,MAAMA,KAAN;;IADuC;;IAAA,kCAK7BC,GAAD,IAAiBT,gBAAgB,CAACS,GAAD,EAAM,KAAKD,KAAL,CAAWL,KAAjB,CALH;;IAAA,uCAexBO,GAAD,IAAmC;MACjD,KAAKC,UAAL,GAAkBD,GAAlB;IACD,CAjBwC;;IAEvC,KAAKC,UAAL,GAAkBC,SAAlB;EACD;;EAIDC,iBAAiB,GAAG;IAClB,KAAKC,KAAL;EACD;;EAEDC,kBAAkB,GAAG;IACnB,KAAKD,KAAL;EACD;;EAMDA,KAAK,GAAG;IACN,IAAI,KAAKH,UAAT,EAAqB;MACnB,MAAM;QAAEK,UAAU,EAAEC,eAAd;QAA+BC;MAA/B,IAAyC,KAAKV,KAApD;MACAP,gBAAgB,CAAC,KAAKU,UAAN,EAAkBO,KAAlB,EAAyBD,eAAzB,EAA0C,KAAKE,QAA/C,EAAyDpB,SAAS,CAAC,KAAKS,KAAL,CAAWL,KAAZ,EAAmB,MAAnB,CAAlE,CAAhB;IACD;EACF;;EAEDiB,MAAM,GAAG;IACP,oBAAO;MAAQ,SAAS,EAAElB,SAAS,CAAC,KAAKM,KAAL,CAAWL,KAAZ,CAAT,CAA4BC,eAA/C;MAAgE,GAAG,EAAE,KAAKiB;IAA1E,EAAP;EACD;;AA/BoF;AAkCvF,eAAexB,UAAU,CAACQ,uBAAD,CAAzB"},"metadata":{},"sourceType":"module"}