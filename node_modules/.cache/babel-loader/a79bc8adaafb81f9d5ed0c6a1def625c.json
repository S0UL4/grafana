{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport { createTheme } from '@grafana/data';\nimport { config, ThemeChangedEvent } from '@grafana/runtime';\nimport { ThemeContext } from '@grafana/ui';\nimport { appEvents } from '../core';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const ConfigContext = /*#__PURE__*/React.createContext(config);\nexport const ConfigConsumer = ConfigContext.Consumer;\nexport const provideConfig = component => {\n  const ConfigProvider = props => /*#__PURE__*/_jsx(ConfigContext.Provider, {\n    value: config,\n    children: /*#__PURE__*/React.createElement(component, Object.assign({}, props))\n  });\n\n  return ConfigProvider;\n};\nexport const ThemeProvider = ({\n  children\n}) => {\n  const [theme, setTheme] = useState(getCurrentUserTheme());\n  useEffect(() => {\n    const sub = appEvents.subscribe(ThemeChangedEvent, event => {\n      //config.theme = event.payload;\n      setTheme(event.payload);\n    });\n    return () => sub.unsubscribe();\n  }, []);\n  return /*#__PURE__*/_jsx(ThemeContext.Provider, {\n    value: theme,\n    children: children\n  });\n};\n\nfunction getCurrentUserTheme() {\n  return createTheme({\n    colors: {\n      mode: config.bootData.user.lightTheme ? 'light' : 'dark'\n    }\n  });\n}\n\nexport const provideTheme = component => {\n  return provideConfig(props => /*#__PURE__*/_jsx(ThemeProvider, {\n    children: /*#__PURE__*/React.createElement(component, Object.assign({}, props))\n  }));\n};","map":{"version":3,"names":["React","useEffect","useState","createTheme","config","ThemeChangedEvent","ThemeContext","appEvents","ConfigContext","createContext","ConfigConsumer","Consumer","provideConfig","component","ConfigProvider","props","createElement","ThemeProvider","children","theme","setTheme","getCurrentUserTheme","sub","subscribe","event","payload","unsubscribe","colors","mode","bootData","user","lightTheme","provideTheme"],"sources":["/home/soula/grafana/public/app/core/utils/ConfigProvider.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport { createTheme } from '@grafana/data';\nimport { config, GrafanaBootConfig, ThemeChangedEvent } from '@grafana/runtime';\nimport { ThemeContext } from '@grafana/ui';\n\nimport { appEvents } from '../core';\n\nexport const ConfigContext = React.createContext<GrafanaBootConfig>(config);\nexport const ConfigConsumer = ConfigContext.Consumer;\n\nexport const provideConfig = (component: React.ComponentType<any>) => {\n  const ConfigProvider = (props: any) => (\n    <ConfigContext.Provider value={config}>{React.createElement(component, { ...props })}</ConfigContext.Provider>\n  );\n  return ConfigProvider;\n};\n\nexport const ThemeProvider = ({ children }: { children: React.ReactNode }) => {\n  const [theme, setTheme] = useState(getCurrentUserTheme());\n\n  useEffect(() => {\n    const sub = appEvents.subscribe(ThemeChangedEvent, (event) => {\n      //config.theme = event.payload;\n      setTheme(event.payload);\n    });\n\n    return () => sub.unsubscribe();\n  }, []);\n\n  return <ThemeContext.Provider value={theme}>{children}</ThemeContext.Provider>;\n};\n\nfunction getCurrentUserTheme() {\n  return createTheme({\n    colors: {\n      mode: config.bootData.user.lightTheme ? 'light' : 'dark',\n    },\n  });\n}\n\nexport const provideTheme = (component: React.ComponentType<any>) => {\n  return provideConfig((props: any) => <ThemeProvider>{React.createElement(component, { ...props })}</ThemeProvider>);\n};\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,MAAT,EAAoCC,iBAApC,QAA6D,kBAA7D;AACA,SAASC,YAAT,QAA6B,aAA7B;AAEA,SAASC,SAAT,QAA0B,SAA1B;;AAEA,OAAO,MAAMC,aAAa,gBAAGR,KAAK,CAACS,aAAN,CAAuCL,MAAvC,CAAtB;AACP,OAAO,MAAMM,cAAc,GAAGF,aAAa,CAACG,QAArC;AAEP,OAAO,MAAMC,aAAa,GAAIC,SAAD,IAAyC;EACpE,MAAMC,cAAc,GAAIC,KAAD,iBACrB,KAAC,aAAD,CAAe,QAAf;IAAwB,KAAK,EAAEX,MAA/B;IAAA,uBAAwCJ,KAAK,CAACgB,aAAN,CAAoBH,SAApB,oBAAoCE,KAApC;EAAxC,EADF;;EAGA,OAAOD,cAAP;AACD,CALM;AAOP,OAAO,MAAMG,aAAa,GAAG,CAAC;EAAEC;AAAF,CAAD,KAAiD;EAC5E,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAACmB,mBAAmB,EAApB,CAAlC;EAEApB,SAAS,CAAC,MAAM;IACd,MAAMqB,GAAG,GAAGf,SAAS,CAACgB,SAAV,CAAoBlB,iBAApB,EAAwCmB,KAAD,IAAW;MAC5D;MACAJ,QAAQ,CAACI,KAAK,CAACC,OAAP,CAAR;IACD,CAHW,CAAZ;IAKA,OAAO,MAAMH,GAAG,CAACI,WAAJ,EAAb;EACD,CAPQ,EAON,EAPM,CAAT;EASA,oBAAO,KAAC,YAAD,CAAc,QAAd;IAAuB,KAAK,EAAEP,KAA9B;IAAA,UAAsCD;EAAtC,EAAP;AACD,CAbM;;AAeP,SAASG,mBAAT,GAA+B;EAC7B,OAAOlB,WAAW,CAAC;IACjBwB,MAAM,EAAE;MACNC,IAAI,EAAExB,MAAM,CAACyB,QAAP,CAAgBC,IAAhB,CAAqBC,UAArB,GAAkC,OAAlC,GAA4C;IAD5C;EADS,CAAD,CAAlB;AAKD;;AAED,OAAO,MAAMC,YAAY,GAAInB,SAAD,IAAyC;EACnE,OAAOD,aAAa,CAAEG,KAAD,iBAAgB,KAAC,aAAD;IAAA,uBAAgBf,KAAK,CAACgB,aAAN,CAAoBH,SAApB,oBAAoCE,KAApC;EAAhB,EAAjB,CAApB;AACD,CAFM"},"metadata":{},"sourceType":"module"}