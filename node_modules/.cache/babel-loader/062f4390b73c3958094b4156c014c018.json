{"ast":null,"code":"import { getBackendSrv } from '@grafana/runtime';\nexport function fetchAnnotations(alertId) {\n  return getBackendSrv().get('/api/annotations', {\n    alertId\n  }).then(result => {\n    return result === null || result === void 0 ? void 0 : result.sort(sortStateHistory);\n  });\n}\nexport function sortStateHistory(a, b) {\n  const compareDesc = (a, b) => {\n    // Larger numbers first.\n    if (a > b) {\n      return -1;\n    }\n\n    if (b > a) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  const endNeq = compareDesc(a.timeEnd, b.timeEnd);\n\n  if (endNeq) {\n    return endNeq;\n  }\n\n  const timeNeq = compareDesc(a.time, b.time);\n\n  if (timeNeq) {\n    return timeNeq;\n  }\n\n  return compareDesc(a.id, b.id);\n}","map":{"version":3,"names":["getBackendSrv","fetchAnnotations","alertId","get","then","result","sort","sortStateHistory","a","b","compareDesc","endNeq","timeEnd","timeNeq","time","id"],"sources":["/home/soula/grafana/public/app/features/alerting/unified/api/annotations.ts"],"sourcesContent":["import { getBackendSrv } from '@grafana/runtime';\nimport { StateHistoryItem } from 'app/types/unified-alerting';\n\nexport function fetchAnnotations(alertId: string): Promise<StateHistoryItem[]> {\n  return getBackendSrv()\n    .get('/api/annotations', {\n      alertId,\n    })\n    .then((result) => {\n      return result?.sort(sortStateHistory);\n    });\n}\n\nexport function sortStateHistory(a: StateHistoryItem, b: StateHistoryItem): number {\n  const compareDesc = (a: number, b: number): number => {\n    // Larger numbers first.\n    if (a > b) {\n      return -1;\n    }\n\n    if (b > a) {\n      return 1;\n    }\n    return 0;\n  };\n\n  const endNeq = compareDesc(a.timeEnd, b.timeEnd);\n  if (endNeq) {\n    return endNeq;\n  }\n\n  const timeNeq = compareDesc(a.time, b.time);\n  if (timeNeq) {\n    return timeNeq;\n  }\n\n  return compareDesc(a.id, b.id);\n}\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,kBAA9B;AAGA,OAAO,SAASC,gBAAT,CAA0BC,OAA1B,EAAwE;EAC7E,OAAOF,aAAa,GACjBG,GADI,CACA,kBADA,EACoB;IACvBD;EADuB,CADpB,EAIJE,IAJI,CAIEC,MAAD,IAAY;IAChB,OAAOA,MAAP,aAAOA,MAAP,uBAAOA,MAAM,CAAEC,IAAR,CAAaC,gBAAb,CAAP;EACD,CANI,CAAP;AAOD;AAED,OAAO,SAASA,gBAAT,CAA0BC,CAA1B,EAA+CC,CAA/C,EAA4E;EACjF,MAAMC,WAAW,GAAG,CAACF,CAAD,EAAYC,CAAZ,KAAkC;IACpD;IACA,IAAID,CAAC,GAAGC,CAAR,EAAW;MACT,OAAO,CAAC,CAAR;IACD;;IAED,IAAIA,CAAC,GAAGD,CAAR,EAAW;MACT,OAAO,CAAP;IACD;;IACD,OAAO,CAAP;EACD,CAVD;;EAYA,MAAMG,MAAM,GAAGD,WAAW,CAACF,CAAC,CAACI,OAAH,EAAYH,CAAC,CAACG,OAAd,CAA1B;;EACA,IAAID,MAAJ,EAAY;IACV,OAAOA,MAAP;EACD;;EAED,MAAME,OAAO,GAAGH,WAAW,CAACF,CAAC,CAACM,IAAH,EAASL,CAAC,CAACK,IAAX,CAA3B;;EACA,IAAID,OAAJ,EAAa;IACX,OAAOA,OAAP;EACD;;EAED,OAAOH,WAAW,CAACF,CAAC,CAACO,EAAH,EAAON,CAAC,CAACM,EAAT,CAAlB;AACD"},"metadata":{},"sourceType":"module"}