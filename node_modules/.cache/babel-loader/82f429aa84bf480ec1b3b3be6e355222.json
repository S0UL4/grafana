{"ast":null,"code":"import { css, cx } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { dateMath, dateTime, getDefaultTimeRange } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { stylesFactory } from '../../themes';\nimport { useTheme2 } from '../../themes/ThemeContext';\nimport { ClickOutsideWrapper } from '../ClickOutsideWrapper/ClickOutsideWrapper';\nimport { Icon } from '../Icon/Icon';\nimport { getInputStyles } from '../Input/Input';\nimport { TimePickerButtonLabel } from './TimeRangePicker';\nimport { TimePickerContent } from './TimeRangePicker/TimePickerContent';\nimport { quickOptions } from './options';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst isValidTimeRange = range => {\n  return dateMath.isValid(range.from) && dateMath.isValid(range.to);\n};\n\nconst noop = () => {};\n\nexport const TimeRangeInput = ({\n  value,\n  onChange,\n  onChangeTimeZone = noop,\n  clearable,\n  hideTimeZone = true,\n  timeZone = 'browser',\n  placeholder = 'Select time range',\n  isReversed = true,\n  hideQuickRanges = false,\n  disabled = false\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const theme = useTheme2();\n  const styles = getStyles(theme, disabled);\n\n  const onOpen = event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (disabled) {\n      return;\n    }\n\n    setIsOpen(!isOpen);\n  };\n\n  const onClose = () => {\n    setIsOpen(false);\n  };\n\n  const onRangeChange = timeRange => {\n    onClose();\n    onChange(timeRange);\n  };\n\n  const onRangeClear = event => {\n    event.stopPropagation();\n    const from = dateTime(null);\n    const to = dateTime(null);\n    onChange({\n      from,\n      to,\n      raw: {\n        from,\n        to\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      tabIndex: 0,\n      className: styles.pickerInput,\n      \"aria-label\": selectors.components.TimePicker.openButton,\n      onClick: onOpen,\n      children: [isValidTimeRange(value) ? /*#__PURE__*/_jsx(TimePickerButtonLabel, {\n        value: value,\n        timeZone: timeZone\n      }) : /*#__PURE__*/_jsx(\"span\", {\n        className: styles.placeholder,\n        children: placeholder\n      }), !disabled && /*#__PURE__*/_jsxs(\"span\", {\n        className: styles.caretIcon,\n        children: [isValidTimeRange(value) && clearable && /*#__PURE__*/_jsx(Icon, {\n          className: styles.clearIcon,\n          name: \"times\",\n          size: \"lg\",\n          onClick: onRangeClear\n        }), /*#__PURE__*/_jsx(Icon, {\n          name: isOpen ? 'angle-up' : 'angle-down',\n          size: \"lg\"\n        })]\n      })]\n    }), isOpen && /*#__PURE__*/_jsx(ClickOutsideWrapper, {\n      includeButtonPress: false,\n      onClick: onClose,\n      children: /*#__PURE__*/_jsx(TimePickerContent, {\n        timeZone: timeZone,\n        value: isValidTimeRange(value) ? value : getDefaultTimeRange(),\n        onChange: onRangeChange,\n        quickOptions: quickOptions,\n        onChangeTimeZone: onChangeTimeZone,\n        className: styles.content,\n        hideTimeZone: hideTimeZone,\n        isReversed: isReversed,\n        hideQuickRanges: hideQuickRanges\n      })\n    })]\n  });\n};\nconst getStyles = stylesFactory((theme, disabled = false) => {\n  const inputStyles = getInputStyles({\n    theme,\n    invalid: false\n  });\n  return {\n    container: css`\n      display: flex;\n      position: relative;\n    `,\n    content: css`\n      margin-left: 0;\n    `,\n    pickerInput: cx(inputStyles.input, disabled && inputStyles.inputDisabled, inputStyles.wrapper, css`\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        cursor: pointer;\n        padding-right: 0;\n        line-height: ${theme.v1.spacing.formInputHeight - 2}px;\n      `),\n    caretIcon: cx(inputStyles.suffix, css`\n        position: relative;\n        top: -1px;\n        margin-left: ${theme.v1.spacing.xs};\n      `),\n    clearIcon: css`\n      margin-right: ${theme.v1.spacing.xs};\n      &:hover {\n        color: ${theme.v1.colors.linkHover};\n      }\n    `,\n    placeholder: css`\n      color: ${theme.v1.colors.formInputPlaceholderText};\n      opacity: 1;\n    `\n  };\n});","map":{"version":3,"names":["css","cx","React","useState","dateMath","dateTime","getDefaultTimeRange","selectors","stylesFactory","useTheme2","ClickOutsideWrapper","Icon","getInputStyles","TimePickerButtonLabel","TimePickerContent","quickOptions","isValidTimeRange","range","isValid","from","to","noop","TimeRangeInput","value","onChange","onChangeTimeZone","clearable","hideTimeZone","timeZone","placeholder","isReversed","hideQuickRanges","disabled","isOpen","setIsOpen","theme","styles","getStyles","onOpen","event","stopPropagation","preventDefault","onClose","onRangeChange","timeRange","onRangeClear","raw","container","pickerInput","components","TimePicker","openButton","caretIcon","clearIcon","content","inputStyles","invalid","input","inputDisabled","wrapper","v1","spacing","formInputHeight","suffix","xs","colors","linkHover","formInputPlaceholderText"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/DateTimePickers/TimeRangeInput.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { FC, FormEvent, MouseEvent, useState } from 'react';\n\nimport { dateMath, dateTime, getDefaultTimeRange, GrafanaTheme2, TimeRange, TimeZone } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { stylesFactory } from '../../themes';\nimport { useTheme2 } from '../../themes/ThemeContext';\nimport { ClickOutsideWrapper } from '../ClickOutsideWrapper/ClickOutsideWrapper';\nimport { Icon } from '../Icon/Icon';\nimport { getInputStyles } from '../Input/Input';\n\nimport { TimePickerButtonLabel } from './TimeRangePicker';\nimport { TimePickerContent } from './TimeRangePicker/TimePickerContent';\nimport { quickOptions } from './options';\n\nconst isValidTimeRange = (range: any) => {\n  return dateMath.isValid(range.from) && dateMath.isValid(range.to);\n};\n\nexport interface TimeRangeInputProps {\n  value: TimeRange;\n  timeZone?: TimeZone;\n  onChange: (timeRange: TimeRange) => void;\n  onChangeTimeZone?: (timeZone: TimeZone) => void;\n  hideTimeZone?: boolean;\n  placeholder?: string;\n  clearable?: boolean;\n  isReversed?: boolean;\n  hideQuickRanges?: boolean;\n  disabled?: boolean;\n}\n\nconst noop = () => {};\n\nexport const TimeRangeInput: FC<TimeRangeInputProps> = ({\n  value,\n  onChange,\n  onChangeTimeZone = noop,\n  clearable,\n  hideTimeZone = true,\n  timeZone = 'browser',\n  placeholder = 'Select time range',\n  isReversed = true,\n  hideQuickRanges = false,\n  disabled = false,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const theme = useTheme2();\n  const styles = getStyles(theme, disabled);\n\n  const onOpen = (event: FormEvent<HTMLDivElement>) => {\n    event.stopPropagation();\n    event.preventDefault();\n    if (disabled) {\n      return;\n    }\n    setIsOpen(!isOpen);\n  };\n\n  const onClose = () => {\n    setIsOpen(false);\n  };\n\n  const onRangeChange = (timeRange: TimeRange) => {\n    onClose();\n    onChange(timeRange);\n  };\n\n  const onRangeClear = (event: MouseEvent<HTMLDivElement>) => {\n    event.stopPropagation();\n    const from = dateTime(null);\n    const to = dateTime(null);\n    onChange({ from, to, raw: { from, to } });\n  };\n\n  return (\n    <div className={styles.container}>\n      <div\n        tabIndex={0}\n        className={styles.pickerInput}\n        aria-label={selectors.components.TimePicker.openButton}\n        onClick={onOpen}\n      >\n        {isValidTimeRange(value) ? (\n          <TimePickerButtonLabel value={value as TimeRange} timeZone={timeZone} />\n        ) : (\n          <span className={styles.placeholder}>{placeholder}</span>\n        )}\n\n        {!disabled && (\n          <span className={styles.caretIcon}>\n            {isValidTimeRange(value) && clearable && (\n              <Icon className={styles.clearIcon} name=\"times\" size=\"lg\" onClick={onRangeClear} />\n            )}\n            <Icon name={isOpen ? 'angle-up' : 'angle-down'} size=\"lg\" />\n          </span>\n        )}\n      </div>\n      {isOpen && (\n        <ClickOutsideWrapper includeButtonPress={false} onClick={onClose}>\n          <TimePickerContent\n            timeZone={timeZone}\n            value={isValidTimeRange(value) ? (value as TimeRange) : getDefaultTimeRange()}\n            onChange={onRangeChange}\n            quickOptions={quickOptions}\n            onChangeTimeZone={onChangeTimeZone}\n            className={styles.content}\n            hideTimeZone={hideTimeZone}\n            isReversed={isReversed}\n            hideQuickRanges={hideQuickRanges}\n          />\n        </ClickOutsideWrapper>\n      )}\n    </div>\n  );\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2, disabled = false) => {\n  const inputStyles = getInputStyles({ theme, invalid: false });\n  return {\n    container: css`\n      display: flex;\n      position: relative;\n    `,\n    content: css`\n      margin-left: 0;\n    `,\n    pickerInput: cx(\n      inputStyles.input,\n      disabled && inputStyles.inputDisabled,\n      inputStyles.wrapper,\n      css`\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        cursor: pointer;\n        padding-right: 0;\n        line-height: ${theme.v1.spacing.formInputHeight - 2}px;\n      `\n    ),\n    caretIcon: cx(\n      inputStyles.suffix,\n      css`\n        position: relative;\n        top: -1px;\n        margin-left: ${theme.v1.spacing.xs};\n      `\n    ),\n    clearIcon: css`\n      margin-right: ${theme.v1.spacing.xs};\n      &:hover {\n        color: ${theme.v1.colors.linkHover};\n      }\n    `,\n    placeholder: css`\n      color: ${theme.v1.colors.formInputPlaceholderText};\n      opacity: 1;\n    `,\n  };\n});\n"],"mappings":"AAAA,SAASA,GAAT,EAAcC,EAAd,QAAwB,cAAxB;AACA,OAAOC,KAAP,IAA2CC,QAA3C,QAA2D,OAA3D;AAEA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,mBAA7B,QAA4F,eAA5F;AACA,SAASC,SAAT,QAA0B,wBAA1B;AAEA,SAASC,aAAT,QAA8B,cAA9B;AACA,SAASC,SAAT,QAA0B,2BAA1B;AACA,SAASC,mBAAT,QAAoC,4CAApC;AACA,SAASC,IAAT,QAAqB,cAArB;AACA,SAASC,cAAT,QAA+B,gBAA/B;AAEA,SAASC,qBAAT,QAAsC,mBAAtC;AACA,SAASC,iBAAT,QAAkC,qCAAlC;AACA,SAASC,YAAT,QAA6B,WAA7B;;;;AAEA,MAAMC,gBAAgB,GAAIC,KAAD,IAAgB;EACvC,OAAOb,QAAQ,CAACc,OAAT,CAAiBD,KAAK,CAACE,IAAvB,KAAgCf,QAAQ,CAACc,OAAT,CAAiBD,KAAK,CAACG,EAAvB,CAAvC;AACD,CAFD;;AAiBA,MAAMC,IAAI,GAAG,MAAM,CAAE,CAArB;;AAEA,OAAO,MAAMC,cAAuC,GAAG,CAAC;EACtDC,KADsD;EAEtDC,QAFsD;EAGtDC,gBAAgB,GAAGJ,IAHmC;EAItDK,SAJsD;EAKtDC,YAAY,GAAG,IALuC;EAMtDC,QAAQ,GAAG,SAN2C;EAOtDC,WAAW,GAAG,mBAPwC;EAQtDC,UAAU,GAAG,IARyC;EAStDC,eAAe,GAAG,KAToC;EAUtDC,QAAQ,GAAG;AAV2C,CAAD,KAWjD;EACJ,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsB/B,QAAQ,CAAC,KAAD,CAApC;EACA,MAAMgC,KAAK,GAAG1B,SAAS,EAAvB;EACA,MAAM2B,MAAM,GAAGC,SAAS,CAACF,KAAD,EAAQH,QAAR,CAAxB;;EAEA,MAAMM,MAAM,GAAIC,KAAD,IAAsC;IACnDA,KAAK,CAACC,eAAN;IACAD,KAAK,CAACE,cAAN;;IACA,IAAIT,QAAJ,EAAc;MACZ;IACD;;IACDE,SAAS,CAAC,CAACD,MAAF,CAAT;EACD,CAPD;;EASA,MAAMS,OAAO,GAAG,MAAM;IACpBR,SAAS,CAAC,KAAD,CAAT;EACD,CAFD;;EAIA,MAAMS,aAAa,GAAIC,SAAD,IAA0B;IAC9CF,OAAO;IACPlB,QAAQ,CAACoB,SAAD,CAAR;EACD,CAHD;;EAKA,MAAMC,YAAY,GAAIN,KAAD,IAAuC;IAC1DA,KAAK,CAACC,eAAN;IACA,MAAMrB,IAAI,GAAGd,QAAQ,CAAC,IAAD,CAArB;IACA,MAAMe,EAAE,GAAGf,QAAQ,CAAC,IAAD,CAAnB;IACAmB,QAAQ,CAAC;MAAEL,IAAF;MAAQC,EAAR;MAAY0B,GAAG,EAAE;QAAE3B,IAAF;QAAQC;MAAR;IAAjB,CAAD,CAAR;EACD,CALD;;EAOA,oBACE;IAAK,SAAS,EAAEgB,MAAM,CAACW,SAAvB;IAAA,wBACE;MACE,QAAQ,EAAE,CADZ;MAEE,SAAS,EAAEX,MAAM,CAACY,WAFpB;MAGE,cAAYzC,SAAS,CAAC0C,UAAV,CAAqBC,UAArB,CAAgCC,UAH9C;MAIE,OAAO,EAAEb,MAJX;MAAA,WAMGtB,gBAAgB,CAACO,KAAD,CAAhB,gBACC,KAAC,qBAAD;QAAuB,KAAK,EAAEA,KAA9B;QAAkD,QAAQ,EAAEK;MAA5D,EADD,gBAGC;QAAM,SAAS,EAAEQ,MAAM,CAACP,WAAxB;QAAA,UAAsCA;MAAtC,EATJ,EAYG,CAACG,QAAD,iBACC;QAAM,SAAS,EAAEI,MAAM,CAACgB,SAAxB;QAAA,WACGpC,gBAAgB,CAACO,KAAD,CAAhB,IAA2BG,SAA3B,iBACC,KAAC,IAAD;UAAM,SAAS,EAAEU,MAAM,CAACiB,SAAxB;UAAmC,IAAI,EAAC,OAAxC;UAAgD,IAAI,EAAC,IAArD;UAA0D,OAAO,EAAER;QAAnE,EAFJ,eAIE,KAAC,IAAD;UAAM,IAAI,EAAEZ,MAAM,GAAG,UAAH,GAAgB,YAAlC;UAAgD,IAAI,EAAC;QAArD,EAJF;MAAA,EAbJ;IAAA,EADF,EAsBGA,MAAM,iBACL,KAAC,mBAAD;MAAqB,kBAAkB,EAAE,KAAzC;MAAgD,OAAO,EAAES,OAAzD;MAAA,uBACE,KAAC,iBAAD;QACE,QAAQ,EAAEd,QADZ;QAEE,KAAK,EAAEZ,gBAAgB,CAACO,KAAD,CAAhB,GAA2BA,KAA3B,GAAiDjB,mBAAmB,EAF7E;QAGE,QAAQ,EAAEqC,aAHZ;QAIE,YAAY,EAAE5B,YAJhB;QAKE,gBAAgB,EAAEU,gBALpB;QAME,SAAS,EAAEW,MAAM,CAACkB,OANpB;QAOE,YAAY,EAAE3B,YAPhB;QAQE,UAAU,EAAEG,UARd;QASE,eAAe,EAAEC;MATnB;IADF,EAvBJ;EAAA,EADF;AAwCD,CAjFM;AAmFP,MAAMM,SAAS,GAAG7B,aAAa,CAAC,CAAC2B,KAAD,EAAuBH,QAAQ,GAAG,KAAlC,KAA4C;EAC1E,MAAMuB,WAAW,GAAG3C,cAAc,CAAC;IAAEuB,KAAF;IAASqB,OAAO,EAAE;EAAlB,CAAD,CAAlC;EACA,OAAO;IACLT,SAAS,EAAE/C,GAAI;AACnB;AACA;AACA,KAJS;IAKLsD,OAAO,EAAEtD,GAAI;AACjB;AACA,KAPS;IAQLgD,WAAW,EAAE/C,EAAE,CACbsD,WAAW,CAACE,KADC,EAEbzB,QAAQ,IAAIuB,WAAW,CAACG,aAFX,EAGbH,WAAW,CAACI,OAHC,EAIb3D,GAAI;AACV;AACA;AACA;AACA;AACA;AACA,uBAAuBmC,KAAK,CAACyB,EAAN,CAASC,OAAT,CAAiBC,eAAjB,GAAmC,CAAE;AAC5D,OAXmB,CARV;IAqBLV,SAAS,EAAEnD,EAAE,CACXsD,WAAW,CAACQ,MADD,EAEX/D,GAAI;AACV;AACA;AACA,uBAAuBmC,KAAK,CAACyB,EAAN,CAASC,OAAT,CAAiBG,EAAG;AAC3C,OANiB,CArBR;IA6BLX,SAAS,EAAErD,GAAI;AACnB,sBAAsBmC,KAAK,CAACyB,EAAN,CAASC,OAAT,CAAiBG,EAAG;AAC1C;AACA,iBAAiB7B,KAAK,CAACyB,EAAN,CAASK,MAAT,CAAgBC,SAAU;AAC3C;AACA,KAlCS;IAmCLrC,WAAW,EAAE7B,GAAI;AACrB,eAAemC,KAAK,CAACyB,EAAN,CAASK,MAAT,CAAgBE,wBAAyB;AACxD;AACA;EAtCS,CAAP;AAwCD,CA1C8B,CAA/B"},"metadata":{},"sourceType":"module"}