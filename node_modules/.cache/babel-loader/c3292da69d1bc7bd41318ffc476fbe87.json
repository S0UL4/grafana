{"ast":null,"code":"import React from 'react';\nimport { LabelFilter } from '../index';\nimport { Alignment } from './Alignment';\nimport { GroupBy } from './GroupBy';\nimport { Metrics } from './Metrics';\nimport { Preprocessor } from './Preprocessor';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction Editor({\n  refId,\n  query,\n  labels,\n  datasource,\n  onChange,\n  onMetricTypeChange,\n  customMetaData,\n  variableOptionGroup\n}) {\n  return /*#__PURE__*/_jsx(Metrics, {\n    refId: refId,\n    projectName: query.projectName,\n    metricType: query.metricType,\n    templateVariableOptions: variableOptionGroup.options,\n    datasource: datasource,\n    onChange: onMetricTypeChange,\n    children: metric => /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(LabelFilter, {\n        labels: labels,\n        filters: query.filters,\n        onChange: filters => onChange(Object.assign({}, query, {\n          filters\n        })),\n        variableOptionGroup: variableOptionGroup\n      }), /*#__PURE__*/_jsx(Preprocessor, {\n        metricDescriptor: metric,\n        query: query,\n        onChange: onChange\n      }), /*#__PURE__*/_jsx(GroupBy, {\n        refId: refId,\n        labels: Object.keys(labels),\n        query: query,\n        onChange: onChange,\n        variableOptionGroup: variableOptionGroup,\n        metricDescriptor: metric\n      }), /*#__PURE__*/_jsx(Alignment, {\n        refId: refId,\n        datasource: datasource,\n        templateVariableOptions: variableOptionGroup.options,\n        query: query,\n        customMetaData: customMetaData,\n        onChange: onChange\n      })]\n    })\n  });\n}\n\nexport const VisualMetricQueryEditor = /*#__PURE__*/React.memo(Editor);","map":{"version":3,"names":["React","LabelFilter","Alignment","GroupBy","Metrics","Preprocessor","Editor","refId","query","labels","datasource","onChange","onMetricTypeChange","customMetaData","variableOptionGroup","projectName","metricType","options","metric","filters","Object","keys","VisualMetricQueryEditor","memo"],"sources":["/home/soula/grafana/public/app/plugins/datasource/cloud-monitoring/components/Experimental/VisualMetricQueryEditor.tsx"],"sourcesContent":["import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\n\nimport CloudMonitoringDatasource from '../../datasource';\nimport { CustomMetaData, MetricDescriptor, MetricQuery, SLOQuery } from '../../types';\nimport { LabelFilter } from '../index';\n\nimport { Alignment } from './Alignment';\nimport { GroupBy } from './GroupBy';\nimport { Metrics } from './Metrics';\nimport { Preprocessor } from './Preprocessor';\n\nexport interface Props {\n  refId: string;\n  customMetaData: CustomMetaData;\n  variableOptionGroup: SelectableValue<string>;\n  onMetricTypeChange: (query: MetricDescriptor) => void;\n  onChange: (query: MetricQuery | SLOQuery) => void;\n  query: MetricQuery;\n  datasource: CloudMonitoringDatasource;\n  labels: any;\n}\n\nfunction Editor({\n  refId,\n  query,\n  labels,\n  datasource,\n  onChange,\n  onMetricTypeChange,\n  customMetaData,\n  variableOptionGroup,\n}: React.PropsWithChildren<Props>) {\n  return (\n    <Metrics\n      refId={refId}\n      projectName={query.projectName}\n      metricType={query.metricType}\n      templateVariableOptions={variableOptionGroup.options}\n      datasource={datasource}\n      onChange={onMetricTypeChange}\n    >\n      {(metric) => (\n        <>\n          <LabelFilter\n            labels={labels}\n            filters={query.filters!}\n            onChange={(filters: string[]) => onChange({ ...query, filters })}\n            variableOptionGroup={variableOptionGroup}\n          />\n          <Preprocessor metricDescriptor={metric} query={query} onChange={onChange} />\n          <GroupBy\n            refId={refId}\n            labels={Object.keys(labels)}\n            query={query}\n            onChange={onChange}\n            variableOptionGroup={variableOptionGroup}\n            metricDescriptor={metric}\n          />\n          <Alignment\n            refId={refId}\n            datasource={datasource}\n            templateVariableOptions={variableOptionGroup.options}\n            query={query}\n            customMetaData={customMetaData}\n            onChange={onChange}\n          />\n        </>\n      )}\n    </Metrics>\n  );\n}\n\nexport const VisualMetricQueryEditor = React.memo(Editor);\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAMA,SAASC,WAAT,QAA4B,UAA5B;AAEA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,YAAT,QAA6B,gBAA7B;;;;;AAaA,SAASC,MAAT,CAAgB;EACdC,KADc;EAEdC,KAFc;EAGdC,MAHc;EAIdC,UAJc;EAKdC,QALc;EAMdC,kBANc;EAOdC,cAPc;EAQdC;AARc,CAAhB,EASmC;EACjC,oBACE,KAAC,OAAD;IACE,KAAK,EAAEP,KADT;IAEE,WAAW,EAAEC,KAAK,CAACO,WAFrB;IAGE,UAAU,EAAEP,KAAK,CAACQ,UAHpB;IAIE,uBAAuB,EAAEF,mBAAmB,CAACG,OAJ/C;IAKE,UAAU,EAAEP,UALd;IAME,QAAQ,EAAEE,kBANZ;IAAA,UAQIM,MAAD,iBACC;MAAA,wBACE,KAAC,WAAD;QACE,MAAM,EAAET,MADV;QAEE,OAAO,EAAED,KAAK,CAACW,OAFjB;QAGE,QAAQ,EAAGA,OAAD,IAAuBR,QAAQ,mBAAMH,KAAN;UAAaW;QAAb,GAH3C;QAIE,mBAAmB,EAAEL;MAJvB,EADF,eAOE,KAAC,YAAD;QAAc,gBAAgB,EAAEI,MAAhC;QAAwC,KAAK,EAAEV,KAA/C;QAAsD,QAAQ,EAAEG;MAAhE,EAPF,eAQE,KAAC,OAAD;QACE,KAAK,EAAEJ,KADT;QAEE,MAAM,EAAEa,MAAM,CAACC,IAAP,CAAYZ,MAAZ,CAFV;QAGE,KAAK,EAAED,KAHT;QAIE,QAAQ,EAAEG,QAJZ;QAKE,mBAAmB,EAAEG,mBALvB;QAME,gBAAgB,EAAEI;MANpB,EARF,eAgBE,KAAC,SAAD;QACE,KAAK,EAAEX,KADT;QAEE,UAAU,EAAEG,UAFd;QAGE,uBAAuB,EAAEI,mBAAmB,CAACG,OAH/C;QAIE,KAAK,EAAET,KAJT;QAKE,cAAc,EAAEK,cALlB;QAME,QAAQ,EAAEF;MANZ,EAhBF;IAAA;EATJ,EADF;AAsCD;;AAED,OAAO,MAAMW,uBAAuB,gBAAGtB,KAAK,CAACuB,IAAN,CAAWjB,MAAX,CAAhC"},"metadata":{},"sourceType":"module"}