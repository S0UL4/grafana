{"ast":null,"code":"// mutates all nulls -> undefineds in the fieldValues array for value-less refValues ranges below maxThreshold\n// refValues is typically a time array and maxThreshold is the allowable distance between in time\nexport function nullToUndefThreshold(refValues, fieldValues, maxThreshold) {\n  let prevRef;\n  let nullIdx;\n\n  for (let i = 0; i < fieldValues.length; i++) {\n    let fieldVal = fieldValues[i];\n\n    if (fieldVal == null) {\n      if (nullIdx == null && prevRef != null) {\n        nullIdx = i;\n      }\n    } else {\n      if (nullIdx != null) {\n        if (refValues[i] - prevRef < maxThreshold) {\n          while (nullIdx < i) {\n            fieldValues[nullIdx++] = undefined;\n          }\n        }\n\n        nullIdx = null;\n      }\n\n      prevRef = refValues[i];\n    }\n  }\n\n  return fieldValues;\n}","map":{"version":3,"names":["nullToUndefThreshold","refValues","fieldValues","maxThreshold","prevRef","nullIdx","i","length","fieldVal","undefined"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/GraphNG/nullToUndefThreshold.ts"],"sourcesContent":["// mutates all nulls -> undefineds in the fieldValues array for value-less refValues ranges below maxThreshold\n// refValues is typically a time array and maxThreshold is the allowable distance between in time\nexport function nullToUndefThreshold(refValues: number[], fieldValues: any[], maxThreshold: number): any[] {\n  let prevRef;\n  let nullIdx;\n\n  for (let i = 0; i < fieldValues.length; i++) {\n    let fieldVal = fieldValues[i];\n\n    if (fieldVal == null) {\n      if (nullIdx == null && prevRef != null) {\n        nullIdx = i;\n      }\n    } else {\n      if (nullIdx != null) {\n        if (refValues[i] - (prevRef as number) < maxThreshold) {\n          while (nullIdx < i) {\n            fieldValues[nullIdx++] = undefined;\n          }\n        }\n\n        nullIdx = null;\n      }\n\n      prevRef = refValues[i];\n    }\n  }\n\n  return fieldValues;\n}\n"],"mappings":"AAAA;AACA;AACA,OAAO,SAASA,oBAAT,CAA8BC,SAA9B,EAAmDC,WAAnD,EAAuEC,YAAvE,EAAoG;EACzG,IAAIC,OAAJ;EACA,IAAIC,OAAJ;;EAEA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,WAAW,CAACK,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;IAC3C,IAAIE,QAAQ,GAAGN,WAAW,CAACI,CAAD,CAA1B;;IAEA,IAAIE,QAAQ,IAAI,IAAhB,EAAsB;MACpB,IAAIH,OAAO,IAAI,IAAX,IAAmBD,OAAO,IAAI,IAAlC,EAAwC;QACtCC,OAAO,GAAGC,CAAV;MACD;IACF,CAJD,MAIO;MACL,IAAID,OAAO,IAAI,IAAf,EAAqB;QACnB,IAAIJ,SAAS,CAACK,CAAD,CAAT,GAAgBF,OAAhB,GAAqCD,YAAzC,EAAuD;UACrD,OAAOE,OAAO,GAAGC,CAAjB,EAAoB;YAClBJ,WAAW,CAACG,OAAO,EAAR,CAAX,GAAyBI,SAAzB;UACD;QACF;;QAEDJ,OAAO,GAAG,IAAV;MACD;;MAEDD,OAAO,GAAGH,SAAS,CAACK,CAAD,CAAnB;IACD;EACF;;EAED,OAAOJ,WAAP;AACD"},"metadata":{},"sourceType":"module"}