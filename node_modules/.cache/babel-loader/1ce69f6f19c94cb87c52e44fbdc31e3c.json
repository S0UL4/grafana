{"ast":null,"code":"import React, { useCallback } from 'react';\nimport { Input, TextArea } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const StringValueEditor = ({\n  value,\n  onChange,\n  item\n}) => {\n  var _item$settings, _item$settings3, _item$settings4, _item$settings5;\n\n  const Component = (_item$settings = item.settings) !== null && _item$settings !== void 0 && _item$settings.useTextarea ? TextArea : Input;\n  const onValueChange = useCallback(e => {\n    let nextValue = value !== null && value !== void 0 ? value : '';\n\n    if (e.hasOwnProperty('key')) {\n      var _item$settings2;\n\n      // handling keyboard event\n      const evt = e;\n\n      if (evt.key === 'Enter' && !((_item$settings2 = item.settings) !== null && _item$settings2 !== void 0 && _item$settings2.useTextarea)) {\n        nextValue = evt.currentTarget.value.trim();\n      }\n    } else {\n      // handling form event\n      const evt = e;\n      nextValue = evt.currentTarget.value.trim();\n    }\n\n    if (nextValue === value) {\n      return; // no change\n    }\n\n    onChange(nextValue === '' ? undefined : nextValue);\n  }, [value, (_item$settings3 = item.settings) === null || _item$settings3 === void 0 ? void 0 : _item$settings3.useTextarea, onChange]);\n  return /*#__PURE__*/_jsx(Component, {\n    placeholder: (_item$settings4 = item.settings) === null || _item$settings4 === void 0 ? void 0 : _item$settings4.placeholder,\n    defaultValue: value || '',\n    rows: ((_item$settings5 = item.settings) === null || _item$settings5 === void 0 ? void 0 : _item$settings5.useTextarea) && item.settings.rows || 5,\n    onBlur: onValueChange,\n    onKeyDown: onValueChange\n  });\n};","map":{"version":3,"names":["React","useCallback","Input","TextArea","StringValueEditor","value","onChange","item","Component","settings","useTextarea","onValueChange","e","nextValue","hasOwnProperty","evt","key","currentTarget","trim","undefined","placeholder","rows"],"sources":["/home/soula/grafana/public/app/core/components/OptionsUI/string.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\n\nimport { StandardEditorProps, StringFieldConfigSettings } from '@grafana/data';\nimport { Input, TextArea } from '@grafana/ui';\n\nexport const StringValueEditor: React.FC<StandardEditorProps<string, StringFieldConfigSettings>> = ({\n  value,\n  onChange,\n  item,\n}) => {\n  const Component = item.settings?.useTextarea ? TextArea : Input;\n\n  const onValueChange = useCallback(\n    (e: React.SyntheticEvent) => {\n      let nextValue = value ?? '';\n      if (e.hasOwnProperty('key')) {\n        // handling keyboard event\n        const evt = e as React.KeyboardEvent<HTMLInputElement>;\n        if (evt.key === 'Enter' && !item.settings?.useTextarea) {\n          nextValue = evt.currentTarget.value.trim();\n        }\n      } else {\n        // handling form event\n        const evt = e as React.FormEvent<HTMLInputElement>;\n        nextValue = evt.currentTarget.value.trim();\n      }\n      if (nextValue === value) {\n        return; // no change\n      }\n      onChange(nextValue === '' ? undefined : nextValue);\n    },\n    [value, item.settings?.useTextarea, onChange]\n  );\n\n  return (\n    <Component\n      placeholder={item.settings?.placeholder}\n      defaultValue={value || ''}\n      rows={(item.settings?.useTextarea && item.settings.rows) || 5}\n      onBlur={onValueChange}\n      onKeyDown={onValueChange}\n    />\n  );\n};\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;AAGA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,aAAhC;;AAEA,OAAO,MAAMC,iBAAmF,GAAG,CAAC;EAClGC,KADkG;EAElGC,QAFkG;EAGlGC;AAHkG,CAAD,KAI7F;EAAA;;EACJ,MAAMC,SAAS,GAAG,kBAAAD,IAAI,CAACE,QAAL,0DAAeC,WAAf,GAA6BP,QAA7B,GAAwCD,KAA1D;EAEA,MAAMS,aAAa,GAAGV,WAAW,CAC9BW,CAAD,IAA6B;IAC3B,IAAIC,SAAS,GAAGR,KAAH,aAAGA,KAAH,cAAGA,KAAH,GAAY,EAAzB;;IACA,IAAIO,CAAC,CAACE,cAAF,CAAiB,KAAjB,CAAJ,EAA6B;MAAA;;MAC3B;MACA,MAAMC,GAAG,GAAGH,CAAZ;;MACA,IAAIG,GAAG,CAACC,GAAJ,KAAY,OAAZ,IAAuB,qBAACT,IAAI,CAACE,QAAN,4CAAC,gBAAeC,WAAhB,CAA3B,EAAwD;QACtDG,SAAS,GAAGE,GAAG,CAACE,aAAJ,CAAkBZ,KAAlB,CAAwBa,IAAxB,EAAZ;MACD;IACF,CAND,MAMO;MACL;MACA,MAAMH,GAAG,GAAGH,CAAZ;MACAC,SAAS,GAAGE,GAAG,CAACE,aAAJ,CAAkBZ,KAAlB,CAAwBa,IAAxB,EAAZ;IACD;;IACD,IAAIL,SAAS,KAAKR,KAAlB,EAAyB;MACvB,OADuB,CACf;IACT;;IACDC,QAAQ,CAACO,SAAS,KAAK,EAAd,GAAmBM,SAAnB,GAA+BN,SAAhC,CAAR;EACD,CAlB8B,EAmB/B,CAACR,KAAD,qBAAQE,IAAI,CAACE,QAAb,oDAAQ,gBAAeC,WAAvB,EAAoCJ,QAApC,CAnB+B,CAAjC;EAsBA,oBACE,KAAC,SAAD;IACE,WAAW,qBAAEC,IAAI,CAACE,QAAP,oDAAE,gBAAeW,WAD9B;IAEE,YAAY,EAAEf,KAAK,IAAI,EAFzB;IAGE,IAAI,EAAG,oBAAAE,IAAI,CAACE,QAAL,oEAAeC,WAAf,KAA8BH,IAAI,CAACE,QAAL,CAAcY,IAA7C,IAAsD,CAH9D;IAIE,MAAM,EAAEV,aAJV;IAKE,SAAS,EAAEA;EALb,EADF;AASD,CAtCM"},"metadata":{},"sourceType":"module"}