{"ast":null,"code":"// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\nimport * as React from 'react';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport { useStyles2 } from '@grafana/ui';\nimport { autoColor } from '../../Theme';\nimport { uAlignIcon, uTxEllipsis } from '../../uberUtilityStyles';\nimport * as markers from './AccordianKeyValues.markers';\nimport KeyValuesTable from './KeyValuesTable';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const getStyles = theme => {\n  return {\n    header: css`\n      label: header;\n      cursor: pointer;\n      overflow: hidden;\n      padding: 0.25em 0.1em;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      &:hover {\n        background: ${autoColor(theme, '#e8e8e8')};\n      }\n    `,\n    headerEmpty: css`\n      label: headerEmpty;\n      background: none;\n      cursor: initial;\n    `,\n    headerHighContrast: css`\n      label: headerHighContrast;\n      &:hover {\n        background: ${autoColor(theme, '#ddd')};\n      }\n    `,\n    emptyIcon: css`\n      label: emptyIcon;\n      color: ${autoColor(theme, '#aaa')};\n    `,\n    summary: css`\n      label: summary;\n      display: inline;\n      list-style: none;\n      padding: 0;\n    `,\n    summaryItem: css`\n      label: summaryItem;\n      display: inline;\n      margin-left: 0.7em;\n      padding-right: 0.5rem;\n      border-right: 1px solid ${autoColor(theme, '#ddd')};\n      &:last-child {\n        padding-right: 0;\n        border-right: none;\n      }\n    `,\n    summaryLabel: css`\n      label: summaryLabel;\n      color: ${autoColor(theme, '#777')};\n    `,\n    summaryDelim: css`\n      label: summaryDelim;\n      color: ${autoColor(theme, '#bbb')};\n      padding: 0 0.2em;\n    `\n  };\n};\n// export for tests\nexport function KeyValuesSummary(props) {\n  const {\n    data\n  } = props;\n  const styles = useStyles2(getStyles);\n\n  if (!Array.isArray(data) || !data.length) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(\"ul\", {\n    className: styles.summary,\n    children: data.map((item, i) =>\n    /*#__PURE__*/\n    // `i` is necessary in the key because item.key can repeat\n    _jsxs(\"li\", {\n      className: styles.summaryItem,\n      children: [/*#__PURE__*/_jsx(\"span\", {\n        className: styles.summaryLabel,\n        children: item.key\n      }), /*#__PURE__*/_jsx(\"span\", {\n        className: styles.summaryDelim,\n        children: \"=\"\n      }), String(item.value)]\n    }, `${item.key}-${i}`))\n  });\n}\nKeyValuesSummary.defaultProps = {\n  data: null\n};\nexport default function AccordianKeyValues(props) {\n  const {\n    className,\n    data,\n    highContrast,\n    interactive,\n    isOpen,\n    label,\n    linksGetter,\n    onToggle\n  } = props;\n  const isEmpty = !Array.isArray(data) || !data.length;\n  const styles = useStyles2(getStyles);\n  const iconCls = cx(uAlignIcon, {\n    [styles.emptyIcon]: isEmpty\n  });\n  let arrow = null;\n  let headerProps = null;\n\n  if (interactive) {\n    arrow = isOpen ? /*#__PURE__*/_jsx(IoIosArrowDown, {\n      className: iconCls\n    }) : /*#__PURE__*/_jsx(IoIosArrowRight, {\n      className: iconCls\n    });\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: isEmpty ? null : onToggle,\n      role: 'switch'\n    };\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: cx(className, uTxEllipsis),\n    children: [/*#__PURE__*/_jsxs(\"div\", Object.assign({\n      className: cx(styles.header, {\n        [styles.headerEmpty]: isEmpty,\n        [styles.headerHighContrast]: highContrast && !isEmpty\n      })\n    }, headerProps, {\n      \"data-testid\": \"AccordianKeyValues--header\",\n      children: [arrow, /*#__PURE__*/_jsxs(\"strong\", {\n        \"data-test\": markers.LABEL,\n        children: [label, isOpen || ':']\n      }), !isOpen && /*#__PURE__*/_jsx(KeyValuesSummary, {\n        data: data\n      })]\n    })), isOpen && /*#__PURE__*/_jsx(KeyValuesTable, {\n      data: data,\n      linksGetter: linksGetter\n    })]\n  });\n}\nAccordianKeyValues.defaultProps = {\n  className: null,\n  highContrast: false,\n  interactive: true,\n  onToggle: null\n};","map":{"version":3,"names":["css","cx","React","IoIosArrowDown","IoIosArrowRight","useStyles2","autoColor","uAlignIcon","uTxEllipsis","markers","KeyValuesTable","getStyles","theme","header","headerEmpty","headerHighContrast","emptyIcon","summary","summaryItem","summaryLabel","summaryDelim","KeyValuesSummary","props","data","styles","Array","isArray","length","map","item","i","key","String","value","defaultProps","AccordianKeyValues","className","highContrast","interactive","isOpen","label","linksGetter","onToggle","isEmpty","iconCls","arrow","headerProps","onClick","role","LABEL"],"sources":["/home/soula/grafana/packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianKeyValues.tsx"],"sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { css } from '@emotion/css';\nimport cx from 'classnames';\nimport * as React from 'react';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { autoColor } from '../../Theme';\nimport { TNil } from '../../types';\nimport { TraceKeyValuePair, TraceLink } from '../../types/trace';\nimport { uAlignIcon, uTxEllipsis } from '../../uberUtilityStyles';\n\nimport * as markers from './AccordianKeyValues.markers';\nimport KeyValuesTable from './KeyValuesTable';\n\nexport const getStyles = (theme: GrafanaTheme2) => {\n  return {\n    header: css`\n      label: header;\n      cursor: pointer;\n      overflow: hidden;\n      padding: 0.25em 0.1em;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      &:hover {\n        background: ${autoColor(theme, '#e8e8e8')};\n      }\n    `,\n    headerEmpty: css`\n      label: headerEmpty;\n      background: none;\n      cursor: initial;\n    `,\n    headerHighContrast: css`\n      label: headerHighContrast;\n      &:hover {\n        background: ${autoColor(theme, '#ddd')};\n      }\n    `,\n    emptyIcon: css`\n      label: emptyIcon;\n      color: ${autoColor(theme, '#aaa')};\n    `,\n    summary: css`\n      label: summary;\n      display: inline;\n      list-style: none;\n      padding: 0;\n    `,\n    summaryItem: css`\n      label: summaryItem;\n      display: inline;\n      margin-left: 0.7em;\n      padding-right: 0.5rem;\n      border-right: 1px solid ${autoColor(theme, '#ddd')};\n      &:last-child {\n        padding-right: 0;\n        border-right: none;\n      }\n    `,\n    summaryLabel: css`\n      label: summaryLabel;\n      color: ${autoColor(theme, '#777')};\n    `,\n    summaryDelim: css`\n      label: summaryDelim;\n      color: ${autoColor(theme, '#bbb')};\n      padding: 0 0.2em;\n    `,\n  };\n};\n\ntype AccordianKeyValuesProps = {\n  className?: string | TNil;\n  data: TraceKeyValuePair[];\n  highContrast?: boolean;\n  interactive?: boolean;\n  isOpen: boolean;\n  label: string;\n  linksGetter: ((pairs: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n  onToggle?: null | (() => void);\n};\n\n// export for tests\nexport function KeyValuesSummary(props: { data?: TraceKeyValuePair[] }) {\n  const { data } = props;\n  const styles = useStyles2(getStyles);\n\n  if (!Array.isArray(data) || !data.length) {\n    return null;\n  }\n\n  return (\n    <ul className={styles.summary}>\n      {data.map((item, i) => (\n        // `i` is necessary in the key because item.key can repeat\n        <li className={styles.summaryItem} key={`${item.key}-${i}`}>\n          <span className={styles.summaryLabel}>{item.key}</span>\n          <span className={styles.summaryDelim}>=</span>\n          {String(item.value)}\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nKeyValuesSummary.defaultProps = {\n  data: null,\n};\n\nexport default function AccordianKeyValues(props: AccordianKeyValuesProps) {\n  const { className, data, highContrast, interactive, isOpen, label, linksGetter, onToggle } = props;\n  const isEmpty = !Array.isArray(data) || !data.length;\n  const styles = useStyles2(getStyles);\n  const iconCls = cx(uAlignIcon, { [styles.emptyIcon]: isEmpty });\n  let arrow: React.ReactNode | null = null;\n  let headerProps: {} | null = null;\n  if (interactive) {\n    arrow = isOpen ? <IoIosArrowDown className={iconCls} /> : <IoIosArrowRight className={iconCls} />;\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: isEmpty ? null : onToggle,\n      role: 'switch',\n    };\n  }\n\n  return (\n    <div className={cx(className, uTxEllipsis)}>\n      <div\n        className={cx(styles.header, {\n          [styles.headerEmpty]: isEmpty,\n          [styles.headerHighContrast]: highContrast && !isEmpty,\n        })}\n        {...headerProps}\n        data-testid=\"AccordianKeyValues--header\"\n      >\n        {arrow}\n        <strong data-test={markers.LABEL}>\n          {label}\n          {isOpen || ':'}\n        </strong>\n        {!isOpen && <KeyValuesSummary data={data} />}\n      </div>\n      {isOpen && <KeyValuesTable data={data} linksGetter={linksGetter} />}\n    </div>\n  );\n}\n\nAccordianKeyValues.defaultProps = {\n  className: null,\n  highContrast: false,\n  interactive: true,\n  onToggle: null,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}