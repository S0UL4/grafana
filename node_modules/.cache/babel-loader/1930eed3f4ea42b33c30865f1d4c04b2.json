{"ast":null,"code":"var _h, _div, _p;\n\nimport { css } from '@emotion/css';\nimport React from 'react';\nimport { LoadingPlaceholder, Pagination, useStyles2 } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../../core/constants';\nimport { flattenGrafanaManagedRules } from '../../hooks/useCombinedRuleNamespaces';\nimport { usePagination } from '../../hooks/usePagination';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { getPaginationStyles } from '../../styles/pagination';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\nimport { initialAsyncRequestState } from '../../utils/redux';\nimport { RulesGroup } from './RulesGroup';\nimport { useCombinedGroupNamespace } from './useCombinedGroupNamespace';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const GrafanaRules = ({\n  namespaces,\n  expandAll\n}) => {\n  const styles = useStyles2(getStyles);\n  const [queryParams] = useQueryParams();\n  const {\n    loading\n  } = useUnifiedAlertingSelector(state => state.promRules[GRAFANA_RULES_SOURCE_NAME] || initialAsyncRequestState);\n  const wantsGroupedView = queryParams['view'] === 'grouped';\n  const namespacesFormat = wantsGroupedView ? namespaces : flattenGrafanaManagedRules(namespaces);\n  const groupsWithNamespaces = useCombinedGroupNamespace(namespacesFormat);\n  const {\n    numberOfPages,\n    onPageChange,\n    page,\n    pageItems\n  } = usePagination(groupsWithNamespaces, 1, DEFAULT_PER_PAGE_PAGINATION);\n  return /*#__PURE__*/_jsxs(\"section\", {\n    className: styles.wrapper,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.sectionHeader,\n      children: [_h || (_h = /*#__PURE__*/_jsx(\"h5\", {\n        children: \"Grafana\"\n      })), loading ? /*#__PURE__*/_jsx(LoadingPlaceholder, {\n        className: styles.loader,\n        text: \"Loading...\"\n      }) : _div || (_div = /*#__PURE__*/_jsx(\"div\", {}))]\n    }), pageItems.map(({\n      group,\n      namespace\n    }) => /*#__PURE__*/_jsx(RulesGroup, {\n      group: group,\n      namespace: namespace,\n      expandAll: expandAll\n    }, `${namespace.name}-${group.name}`)), (namespacesFormat === null || namespacesFormat === void 0 ? void 0 : namespacesFormat.length) === 0 && (_p || (_p = /*#__PURE__*/_jsx(\"p\", {\n      children: \"No rules found.\"\n    }))), /*#__PURE__*/_jsx(Pagination, {\n      className: styles.pagination,\n      currentPage: page,\n      numberOfPages: numberOfPages,\n      onNavigate: onPageChange,\n      hideWhenSinglePage: true\n    })]\n  });\n};\n\nconst getStyles = theme => ({\n  loader: css`\n    margin-bottom: 0;\n  `,\n  sectionHeader: css`\n    display: flex;\n    justify-content: space-between;\n  `,\n  wrapper: css`\n    margin-bottom: ${theme.spacing(4)};\n  `,\n  pagination: getPaginationStyles(theme)\n});","map":{"version":3,"names":["css","React","LoadingPlaceholder","Pagination","useStyles2","useQueryParams","DEFAULT_PER_PAGE_PAGINATION","flattenGrafanaManagedRules","usePagination","useUnifiedAlertingSelector","getPaginationStyles","GRAFANA_RULES_SOURCE_NAME","initialAsyncRequestState","RulesGroup","useCombinedGroupNamespace","GrafanaRules","namespaces","expandAll","styles","getStyles","queryParams","loading","state","promRules","wantsGroupedView","namespacesFormat","groupsWithNamespaces","numberOfPages","onPageChange","page","pageItems","wrapper","sectionHeader","loader","map","group","namespace","name","length","pagination","theme","spacing"],"sources":["/home/soula/grafana/public/app/features/alerting/unified/components/rules/GrafanaRules.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { FC } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { LoadingPlaceholder, Pagination, useStyles2 } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../../core/constants';\nimport { flattenGrafanaManagedRules } from '../../hooks/useCombinedRuleNamespaces';\nimport { usePagination } from '../../hooks/usePagination';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { getPaginationStyles } from '../../styles/pagination';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\nimport { initialAsyncRequestState } from '../../utils/redux';\n\nimport { RulesGroup } from './RulesGroup';\nimport { useCombinedGroupNamespace } from './useCombinedGroupNamespace';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll: boolean;\n}\n\nexport const GrafanaRules: FC<Props> = ({ namespaces, expandAll }) => {\n  const styles = useStyles2(getStyles);\n  const [queryParams] = useQueryParams();\n\n  const { loading } = useUnifiedAlertingSelector(\n    (state) => state.promRules[GRAFANA_RULES_SOURCE_NAME] || initialAsyncRequestState\n  );\n\n  const wantsGroupedView = queryParams['view'] === 'grouped';\n  const namespacesFormat = wantsGroupedView ? namespaces : flattenGrafanaManagedRules(namespaces);\n\n  const groupsWithNamespaces = useCombinedGroupNamespace(namespacesFormat);\n\n  const { numberOfPages, onPageChange, page, pageItems } = usePagination(\n    groupsWithNamespaces,\n    1,\n    DEFAULT_PER_PAGE_PAGINATION\n  );\n\n  return (\n    <section className={styles.wrapper}>\n      <div className={styles.sectionHeader}>\n        <h5>Grafana</h5>\n        {loading ? <LoadingPlaceholder className={styles.loader} text=\"Loading...\" /> : <div />}\n      </div>\n\n      {pageItems.map(({ group, namespace }) => (\n        <RulesGroup group={group} key={`${namespace.name}-${group.name}`} namespace={namespace} expandAll={expandAll} />\n      ))}\n      {namespacesFormat?.length === 0 && <p>No rules found.</p>}\n      <Pagination\n        className={styles.pagination}\n        currentPage={page}\n        numberOfPages={numberOfPages}\n        onNavigate={onPageChange}\n        hideWhenSinglePage\n      />\n    </section>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  loader: css`\n    margin-bottom: 0;\n  `,\n  sectionHeader: css`\n    display: flex;\n    justify-content: space-between;\n  `,\n  wrapper: css`\n    margin-bottom: ${theme.spacing(4)};\n  `,\n  pagination: getPaginationStyles(theme),\n});\n"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,cAApB;AACA,OAAOC,KAAP,MAA0B,OAA1B;AAGA,SAASC,kBAAT,EAA6BC,UAA7B,EAAyCC,UAAzC,QAA2D,aAA3D;AACA,SAASC,cAAT,QAA+B,+BAA/B;AAGA,SAASC,2BAAT,QAA4C,+BAA5C;AACA,SAASC,0BAAT,QAA2C,uCAA3C;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,0BAAT,QAA2C,wCAA3C;AACA,SAASC,mBAAT,QAAoC,yBAApC;AACA,SAASC,yBAAT,QAA0C,wBAA1C;AACA,SAASC,wBAAT,QAAyC,mBAAzC;AAEA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,yBAAT,QAA0C,6BAA1C;;;AAOA,OAAO,MAAMC,YAAuB,GAAG,CAAC;EAAEC,UAAF;EAAcC;AAAd,CAAD,KAA+B;EACpE,MAAMC,MAAM,GAAGd,UAAU,CAACe,SAAD,CAAzB;EACA,MAAM,CAACC,WAAD,IAAgBf,cAAc,EAApC;EAEA,MAAM;IAAEgB;EAAF,IAAcZ,0BAA0B,CAC3Ca,KAAD,IAAWA,KAAK,CAACC,SAAN,CAAgBZ,yBAAhB,KAA8CC,wBADb,CAA9C;EAIA,MAAMY,gBAAgB,GAAGJ,WAAW,CAAC,MAAD,CAAX,KAAwB,SAAjD;EACA,MAAMK,gBAAgB,GAAGD,gBAAgB,GAAGR,UAAH,GAAgBT,0BAA0B,CAACS,UAAD,CAAnF;EAEA,MAAMU,oBAAoB,GAAGZ,yBAAyB,CAACW,gBAAD,CAAtD;EAEA,MAAM;IAAEE,aAAF;IAAiBC,YAAjB;IAA+BC,IAA/B;IAAqCC;EAArC,IAAmDtB,aAAa,CACpEkB,oBADoE,EAEpE,CAFoE,EAGpEpB,2BAHoE,CAAtE;EAMA,oBACE;IAAS,SAAS,EAAEY,MAAM,CAACa,OAA3B;IAAA,wBACE;MAAK,SAAS,EAAEb,MAAM,CAACc,aAAvB;MAAA,oCACE;QAAA;MAAA,EADF,GAEGX,OAAO,gBAAG,KAAC,kBAAD;QAAoB,SAAS,EAAEH,MAAM,CAACe,MAAtC;QAA8C,IAAI,EAAC;MAAnD,EAAH,gCAAwE,eAAxE,CAFV;IAAA,EADF,EAMGH,SAAS,CAACI,GAAV,CAAc,CAAC;MAAEC,KAAF;MAASC;IAAT,CAAD,kBACb,KAAC,UAAD;MAAY,KAAK,EAAED,KAAnB;MAAkE,SAAS,EAAEC,SAA7E;MAAwF,SAAS,EAAEnB;IAAnG,GAAgC,GAAEmB,SAAS,CAACC,IAAK,IAAGF,KAAK,CAACE,IAAK,EAA/D,CADD,CANH,EASG,CAAAZ,gBAAgB,SAAhB,IAAAA,gBAAgB,WAAhB,YAAAA,gBAAgB,CAAEa,MAAlB,MAA6B,CAA7B,8BAAkC;MAAA;IAAA,EAAlC,EATH,eAUE,KAAC,UAAD;MACE,SAAS,EAAEpB,MAAM,CAACqB,UADpB;MAEE,WAAW,EAAEV,IAFf;MAGE,aAAa,EAAEF,aAHjB;MAIE,UAAU,EAAEC,YAJd;MAKE,kBAAkB;IALpB,EAVF;EAAA,EADF;AAoBD,CAvCM;;AAyCP,MAAMT,SAAS,GAAIqB,KAAD,KAA2B;EAC3CP,MAAM,EAAEjC,GAAI;AACd;AACA,GAH6C;EAI3CgC,aAAa,EAAEhC,GAAI;AACrB;AACA;AACA,GAP6C;EAQ3C+B,OAAO,EAAE/B,GAAI;AACf,qBAAqBwC,KAAK,CAACC,OAAN,CAAc,CAAd,CAAiB;AACtC,GAV6C;EAW3CF,UAAU,EAAE7B,mBAAmB,CAAC8B,KAAD;AAXY,CAA3B,CAAlB"},"metadata":{},"sourceType":"module"}