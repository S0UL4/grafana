{"ast":null,"code":"import { getBackendSrv } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction, createAsyncThunk } from 'app/types';\nexport const fetchInvitees = createAsyncThunk('users/fetchInvitees', async () => {\n  if (!contextSrv.hasPermission(AccessControlAction.UsersCreate)) {\n    return [];\n  }\n\n  const invitees = await getBackendSrv().get('/api/org/invites');\n  return invitees;\n});\nexport const addInvitee = createAsyncThunk('users/addInvitee', async (addInviteForm, {\n  dispatch\n}) => {\n  await getBackendSrv().post(`/api/org/invites`, addInviteForm);\n  await dispatch(fetchInvitees());\n});\nexport const revokeInvite = createAsyncThunk('users/revokeInvite', async code => {\n  await getBackendSrv().patch(`/api/org/invites/${code}/revoke`, {});\n  return code;\n});","map":{"version":3,"names":["getBackendSrv","contextSrv","AccessControlAction","createAsyncThunk","fetchInvitees","hasPermission","UsersCreate","invitees","get","addInvitee","addInviteForm","dispatch","post","revokeInvite","code","patch"],"sources":["/home/soula/grafana/public/app/features/invites/state/actions.ts"],"sourcesContent":["import { getBackendSrv } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { FormModel } from 'app/features/org/UserInviteForm';\nimport { AccessControlAction, createAsyncThunk, Invitee } from 'app/types';\n\nexport const fetchInvitees = createAsyncThunk('users/fetchInvitees', async () => {\n  if (!contextSrv.hasPermission(AccessControlAction.UsersCreate)) {\n    return [];\n  }\n\n  const invitees: Invitee[] = await getBackendSrv().get('/api/org/invites');\n  return invitees;\n});\n\nexport const addInvitee = createAsyncThunk('users/addInvitee', async (addInviteForm: FormModel, { dispatch }) => {\n  await getBackendSrv().post(`/api/org/invites`, addInviteForm);\n  await dispatch(fetchInvitees());\n});\n\nexport const revokeInvite = createAsyncThunk('users/revokeInvite', async (code: string) => {\n  await getBackendSrv().patch(`/api/org/invites/${code}/revoke`, {});\n  return code;\n});\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,kBAA9B;AACA,SAASC,UAAT,QAA2B,eAA3B;AAEA,SAASC,mBAAT,EAA8BC,gBAA9B,QAA+D,WAA/D;AAEA,OAAO,MAAMC,aAAa,GAAGD,gBAAgB,CAAC,qBAAD,EAAwB,YAAY;EAC/E,IAAI,CAACF,UAAU,CAACI,aAAX,CAAyBH,mBAAmB,CAACI,WAA7C,CAAL,EAAgE;IAC9D,OAAO,EAAP;EACD;;EAED,MAAMC,QAAmB,GAAG,MAAMP,aAAa,GAAGQ,GAAhB,CAAoB,kBAApB,CAAlC;EACA,OAAOD,QAAP;AACD,CAP4C,CAAtC;AASP,OAAO,MAAME,UAAU,GAAGN,gBAAgB,CAAC,kBAAD,EAAqB,OAAOO,aAAP,EAAiC;EAAEC;AAAF,CAAjC,KAAkD;EAC/G,MAAMX,aAAa,GAAGY,IAAhB,CAAsB,kBAAtB,EAAyCF,aAAzC,CAAN;EACA,MAAMC,QAAQ,CAACP,aAAa,EAAd,CAAd;AACD,CAHyC,CAAnC;AAKP,OAAO,MAAMS,YAAY,GAAGV,gBAAgB,CAAC,oBAAD,EAAuB,MAAOW,IAAP,IAAwB;EACzF,MAAMd,aAAa,GAAGe,KAAhB,CAAuB,oBAAmBD,IAAK,SAA/C,EAAyD,EAAzD,CAAN;EACA,OAAOA,IAAP;AACD,CAH2C,CAArC"},"metadata":{},"sourceType":"module"}