{"ast":null,"code":"import { getBackendSrv } from '@grafana/runtime';\nimport { accessControlQueryParam } from 'app/core/utils/accessControl';\nimport { usersLoaded } from './reducers';\nexport function loadUsers() {\n  return async dispatch => {\n    const users = await getBackendSrv().get('/api/org/users', accessControlQueryParam());\n    dispatch(usersLoaded(users));\n  };\n}\nexport function updateUser(user) {\n  return async dispatch => {\n    await getBackendSrv().patch(`/api/org/users/${user.userId}`, {\n      role: user.role\n    });\n    dispatch(loadUsers());\n  };\n}\nexport function removeUser(userId) {\n  return async dispatch => {\n    await getBackendSrv().delete(`/api/org/users/${userId}`);\n    dispatch(loadUsers());\n  };\n}","map":{"version":3,"names":["getBackendSrv","accessControlQueryParam","usersLoaded","loadUsers","dispatch","users","get","updateUser","user","patch","userId","role","removeUser","delete"],"sources":["/home/soula/grafana/public/app/features/users/state/actions.ts"],"sourcesContent":["import { getBackendSrv } from '@grafana/runtime';\nimport { accessControlQueryParam } from 'app/core/utils/accessControl';\nimport { OrgUser } from 'app/types';\n\nimport { ThunkResult } from '../../../types';\n\nimport { usersLoaded } from './reducers';\n\nexport function loadUsers(): ThunkResult<void> {\n  return async (dispatch) => {\n    const users = await getBackendSrv().get('/api/org/users', accessControlQueryParam());\n    dispatch(usersLoaded(users));\n  };\n}\n\nexport function updateUser(user: OrgUser): ThunkResult<void> {\n  return async (dispatch) => {\n    await getBackendSrv().patch(`/api/org/users/${user.userId}`, { role: user.role });\n    dispatch(loadUsers());\n  };\n}\n\nexport function removeUser(userId: number): ThunkResult<void> {\n  return async (dispatch) => {\n    await getBackendSrv().delete(`/api/org/users/${userId}`);\n    dispatch(loadUsers());\n  };\n}\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,kBAA9B;AACA,SAASC,uBAAT,QAAwC,8BAAxC;AAKA,SAASC,WAAT,QAA4B,YAA5B;AAEA,OAAO,SAASC,SAAT,GAAwC;EAC7C,OAAO,MAAOC,QAAP,IAAoB;IACzB,MAAMC,KAAK,GAAG,MAAML,aAAa,GAAGM,GAAhB,CAAoB,gBAApB,EAAsCL,uBAAuB,EAA7D,CAApB;IACAG,QAAQ,CAACF,WAAW,CAACG,KAAD,CAAZ,CAAR;EACD,CAHD;AAID;AAED,OAAO,SAASE,UAAT,CAAoBC,IAApB,EAAsD;EAC3D,OAAO,MAAOJ,QAAP,IAAoB;IACzB,MAAMJ,aAAa,GAAGS,KAAhB,CAAuB,kBAAiBD,IAAI,CAACE,MAAO,EAApD,EAAuD;MAAEC,IAAI,EAAEH,IAAI,CAACG;IAAb,CAAvD,CAAN;IACAP,QAAQ,CAACD,SAAS,EAAV,CAAR;EACD,CAHD;AAID;AAED,OAAO,SAASS,UAAT,CAAoBF,MAApB,EAAuD;EAC5D,OAAO,MAAON,QAAP,IAAoB;IACzB,MAAMJ,aAAa,GAAGa,MAAhB,CAAwB,kBAAiBH,MAAO,EAAhD,CAAN;IACAN,QAAQ,CAACD,SAAS,EAAV,CAAR;EACD,CAHD;AAID"},"metadata":{},"sourceType":"module"}