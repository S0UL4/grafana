{"ast":null,"code":"// https://github.com/facebook/react/issues/5465\nexport function isCancelablePromiseRejection(promise) {\n  return typeof promise === 'object' && promise !== null && 'isCanceled' in promise;\n}\nexport const makePromiseCancelable = promise => {\n  let hasCanceled_ = false;\n  const wrappedPromise = new Promise((resolve, reject) => {\n    const canceledPromiseRejection = {\n      isCanceled: true\n    };\n    promise.then(val => hasCanceled_ ? reject(canceledPromiseRejection) : resolve(val));\n    promise.catch(error => hasCanceled_ ? reject(canceledPromiseRejection) : reject(error));\n  });\n  return {\n    promise: wrappedPromise,\n\n    cancel() {\n      hasCanceled_ = true;\n    }\n\n  };\n};","map":{"version":3,"names":["isCancelablePromiseRejection","promise","makePromiseCancelable","hasCanceled_","wrappedPromise","Promise","resolve","reject","canceledPromiseRejection","isCanceled","then","val","catch","error","cancel"],"sources":["/home/soula/grafana/public/app/core/utils/CancelablePromise.ts"],"sourcesContent":["// https://github.com/facebook/react/issues/5465\n\nexport interface CancelablePromise<T> {\n  promise: Promise<T>;\n  cancel: () => void;\n}\n\nexport interface CancelablePromiseRejection {\n  isCanceled: boolean;\n}\n\nexport function isCancelablePromiseRejection(promise: unknown): promise is CancelablePromiseRejection {\n  return typeof promise === 'object' && promise !== null && 'isCanceled' in promise;\n}\n\nexport const makePromiseCancelable = <T>(promise: Promise<T>): CancelablePromise<T> => {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise<T>((resolve, reject) => {\n    const canceledPromiseRejection: CancelablePromiseRejection = { isCanceled: true };\n    promise.then((val) => (hasCanceled_ ? reject(canceledPromiseRejection) : resolve(val)));\n    promise.catch((error) => (hasCanceled_ ? reject(canceledPromiseRejection) : reject(error)));\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    },\n  };\n};\n"],"mappings":"AAAA;AAWA,OAAO,SAASA,4BAAT,CAAsCC,OAAtC,EAA+F;EACpG,OAAO,OAAOA,OAAP,KAAmB,QAAnB,IAA+BA,OAAO,KAAK,IAA3C,IAAmD,gBAAgBA,OAA1E;AACD;AAED,OAAO,MAAMC,qBAAqB,GAAOD,OAAJ,IAAkD;EACrF,IAAIE,YAAY,GAAG,KAAnB;EAEA,MAAMC,cAAc,GAAG,IAAIC,OAAJ,CAAe,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACzD,MAAMC,wBAAoD,GAAG;MAAEC,UAAU,EAAE;IAAd,CAA7D;IACAR,OAAO,CAACS,IAAR,CAAcC,GAAD,IAAUR,YAAY,GAAGI,MAAM,CAACC,wBAAD,CAAT,GAAsCF,OAAO,CAACK,GAAD,CAAhF;IACAV,OAAO,CAACW,KAAR,CAAeC,KAAD,IAAYV,YAAY,GAAGI,MAAM,CAACC,wBAAD,CAAT,GAAsCD,MAAM,CAACM,KAAD,CAAlF;EACD,CAJsB,CAAvB;EAMA,OAAO;IACLZ,OAAO,EAAEG,cADJ;;IAELU,MAAM,GAAG;MACPX,YAAY,GAAG,IAAf;IACD;;EAJI,CAAP;AAMD,CAfM"},"metadata":{},"sourceType":"module"}