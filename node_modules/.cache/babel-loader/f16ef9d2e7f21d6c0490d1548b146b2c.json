{"ast":null,"code":"var _span;\n\n// Libraries\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { useTheme2 } from '@grafana/ui'; // Types\n\n// Components, enums\nimport { ExploreDrawer } from '../ExploreDrawer';\nimport { deleteRichHistory, initRichHistory, loadRichHistory, loadMoreRichHistory, clearRichHistoryResults, updateHistorySettings, updateHistorySearchFilters } from '../state/history';\nimport { RichHistory, Tabs } from './RichHistory'; //Actions\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction mapStateToProps(state, {\n  exploreId\n}) {\n  const explore = state.explore; // @ts-ignore\n\n  const item = explore[exploreId];\n  const richHistorySearchFilters = item.richHistorySearchFilters;\n  const richHistorySettings = explore.richHistorySettings;\n  const {\n    datasourceInstance\n  } = item;\n  const firstTab = richHistorySettings !== null && richHistorySettings !== void 0 && richHistorySettings.starredTabAsFirstTab ? Tabs.Starred : Tabs.RichHistory;\n  const {\n    richHistory,\n    richHistoryTotal\n  } = item;\n  return {\n    richHistory,\n    richHistoryTotal,\n    firstTab,\n    activeDatasourceInstance: datasourceInstance.name,\n    richHistorySettings,\n    richHistorySearchFilters\n  };\n}\n\nconst mapDispatchToProps = {\n  initRichHistory,\n  loadRichHistory,\n  loadMoreRichHistory,\n  clearRichHistoryResults,\n  updateHistorySettings,\n  updateHistorySearchFilters,\n  deleteRichHistory\n};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport function RichHistoryContainer(props) {\n  const theme = useTheme2();\n  const [height, setHeight] = useState(theme.components.horizontalDrawer.defaultHeight);\n  const {\n    richHistory,\n    richHistoryTotal,\n    width,\n    firstTab,\n    activeDatasourceInstance,\n    exploreId,\n    deleteRichHistory,\n    initRichHistory,\n    loadRichHistory,\n    loadMoreRichHistory,\n    clearRichHistoryResults,\n    richHistorySettings,\n    updateHistorySettings,\n    richHistorySearchFilters,\n    updateHistorySearchFilters,\n    onClose\n  } = props;\n  useEffect(() => {\n    initRichHistory();\n    reportInteraction('grafana_explore_query_history_opened', {\n      queryHistoryEnabled: config.queryHistoryEnabled\n    });\n  }, [initRichHistory]);\n\n  if (!richHistorySettings) {\n    return _span || (_span = /*#__PURE__*/_jsx(\"span\", {\n      children: \"Loading...\"\n    }));\n  }\n\n  return /*#__PURE__*/_jsx(ExploreDrawer, {\n    width: width,\n    onResize: (_e, _dir, ref) => {\n      setHeight(Number(ref.style.height.slice(0, -2)));\n    },\n    children: /*#__PURE__*/_jsx(RichHistory, {\n      richHistory: richHistory,\n      richHistoryTotal: richHistoryTotal,\n      firstTab: firstTab,\n      activeDatasourceInstance: activeDatasourceInstance,\n      exploreId: exploreId,\n      onClose: onClose,\n      height: height,\n      deleteRichHistory: deleteRichHistory,\n      richHistorySettings: richHistorySettings,\n      richHistorySearchFilters: richHistorySearchFilters,\n      updateHistorySettings: updateHistorySettings,\n      updateHistorySearchFilters: updateHistorySearchFilters,\n      loadRichHistory: loadRichHistory,\n      loadMoreRichHistory: loadMoreRichHistory,\n      clearRichHistoryResults: clearRichHistoryResults\n    })\n  });\n}\nexport default connector(RichHistoryContainer);","map":{"version":3,"names":["React","useEffect","useState","connect","config","reportInteraction","useTheme2","ExploreDrawer","deleteRichHistory","initRichHistory","loadRichHistory","loadMoreRichHistory","clearRichHistoryResults","updateHistorySettings","updateHistorySearchFilters","RichHistory","Tabs","mapStateToProps","state","exploreId","explore","item","richHistorySearchFilters","richHistorySettings","datasourceInstance","firstTab","starredTabAsFirstTab","Starred","richHistory","richHistoryTotal","activeDatasourceInstance","name","mapDispatchToProps","connector","RichHistoryContainer","props","theme","height","setHeight","components","horizontalDrawer","defaultHeight","width","onClose","queryHistoryEnabled","_e","_dir","ref","Number","style","slice"],"sources":["/home/soula/grafana/public/app/features/explore/RichHistory/RichHistoryContainer.tsx"],"sourcesContent":["// Libraries\nimport React, { useEffect, useState } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { useTheme2 } from '@grafana/ui';\n// Types\nimport { ExploreItemState, StoreState } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\n\n// Components, enums\nimport { ExploreDrawer } from '../ExploreDrawer';\nimport {\n  deleteRichHistory,\n  initRichHistory,\n  loadRichHistory,\n  loadMoreRichHistory,\n  clearRichHistoryResults,\n  updateHistorySettings,\n  updateHistorySearchFilters,\n} from '../state/history';\n\nimport { RichHistory, Tabs } from './RichHistory';\n\n//Actions\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  const richHistorySearchFilters = item.richHistorySearchFilters;\n  const richHistorySettings = explore.richHistorySettings;\n  const { datasourceInstance } = item;\n  const firstTab = richHistorySettings?.starredTabAsFirstTab ? Tabs.Starred : Tabs.RichHistory;\n  const { richHistory, richHistoryTotal } = item;\n  return {\n    richHistory,\n    richHistoryTotal,\n    firstTab,\n    activeDatasourceInstance: datasourceInstance!.name,\n    richHistorySettings,\n    richHistorySearchFilters,\n  };\n}\n\nconst mapDispatchToProps = {\n  initRichHistory,\n  loadRichHistory,\n  loadMoreRichHistory,\n  clearRichHistoryResults,\n  updateHistorySettings,\n  updateHistorySearchFilters,\n  deleteRichHistory,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ninterface OwnProps {\n  width: number;\n  exploreId: ExploreId;\n  onClose: () => void;\n}\nexport type Props = ConnectedProps<typeof connector> & OwnProps;\n\nexport function RichHistoryContainer(props: Props) {\n  const theme = useTheme2();\n  const [height, setHeight] = useState(theme.components.horizontalDrawer.defaultHeight);\n\n  const {\n    richHistory,\n    richHistoryTotal,\n    width,\n    firstTab,\n    activeDatasourceInstance,\n    exploreId,\n    deleteRichHistory,\n    initRichHistory,\n    loadRichHistory,\n    loadMoreRichHistory,\n    clearRichHistoryResults,\n    richHistorySettings,\n    updateHistorySettings,\n    richHistorySearchFilters,\n    updateHistorySearchFilters,\n    onClose,\n  } = props;\n\n  useEffect(() => {\n    initRichHistory();\n    reportInteraction('grafana_explore_query_history_opened', {\n      queryHistoryEnabled: config.queryHistoryEnabled,\n    });\n  }, [initRichHistory]);\n\n  if (!richHistorySettings) {\n    return <span>Loading...</span>;\n  }\n\n  return (\n    <ExploreDrawer\n      width={width}\n      onResize={(_e, _dir, ref) => {\n        setHeight(Number(ref.style.height.slice(0, -2)));\n      }}\n    >\n      <RichHistory\n        richHistory={richHistory}\n        richHistoryTotal={richHistoryTotal}\n        firstTab={firstTab}\n        activeDatasourceInstance={activeDatasourceInstance}\n        exploreId={exploreId}\n        onClose={onClose}\n        height={height}\n        deleteRichHistory={deleteRichHistory}\n        richHistorySettings={richHistorySettings}\n        richHistorySearchFilters={richHistorySearchFilters}\n        updateHistorySettings={updateHistorySettings}\n        updateHistorySearchFilters={updateHistorySearchFilters}\n        loadRichHistory={loadRichHistory}\n        loadMoreRichHistory={loadMoreRichHistory}\n        clearRichHistoryResults={clearRichHistoryResults}\n      />\n    </ExploreDrawer>\n  );\n}\n\nexport default connector(RichHistoryContainer);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}