{"ast":null,"code":"import { css } from '@emotion/css';\nimport React from 'react';\nimport { Tab, TabsBar, Icon, useStyles2 } from '@grafana/ui';\nimport { PanelHeaderMenuItem } from 'app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuItem';\nimport { ProBadge } from '../Upgrade/ProBadge';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst SelectNav = ({\n  children,\n  customCss\n}) => {\n  if (!children || children.length === 0) {\n    return null;\n  }\n\n  const defaultSelectedItem = children.find(navItem => {\n    return navItem.active === true;\n  });\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: `gf-form-select-wrapper width-20 ${customCss}`,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"dropdown\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"gf-form-input dropdown-toggle\",\n        \"data-toggle\": \"dropdown\",\n        children: defaultSelectedItem === null || defaultSelectedItem === void 0 ? void 0 : defaultSelectedItem.text\n      }), /*#__PURE__*/_jsx(\"ul\", {\n        className: \"dropdown-menu dropdown-menu--menu\",\n        children: children.map(navItem => {\n          if (navItem.hideFromTabs) {\n            // TODO: Rename hideFromTabs => hideFromNav\n            return null;\n          }\n\n          return /*#__PURE__*/_jsx(PanelHeaderMenuItem, {\n            iconClassName: navItem.icon,\n            text: navItem.text,\n            href: navItem.url\n          }, navItem.url);\n        })\n      })]\n    })\n  });\n};\n\nconst Navigation = ({\n  children\n}) => {\n  if (!children || children.length === 0) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxs(\"nav\", {\n    children: [/*#__PURE__*/_jsx(SelectNav, {\n      customCss: \"page-header__select-nav\",\n      children: children\n    }), /*#__PURE__*/_jsx(TabsBar, {\n      className: \"page-header__tabs\",\n      hideBorder: true,\n      children: children.map((child, index) => {\n        return !child.hideFromTabs && /*#__PURE__*/_jsx(Tab, {\n          label: child.text,\n          active: child.active,\n          icon: child.icon,\n          href: child.url,\n          suffix: child.tabSuffix\n        }, `${child.url}-${index}`);\n      })\n    })]\n  });\n};\n\nexport const PageHeader = ({\n  model\n}) => {\n  const styles = useStyles2(getStyles);\n\n  if (!model) {\n    return null;\n  }\n\n  const main = model.main;\n  const children = main.children;\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.headerCanvas,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"page-container\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"page-header\",\n        children: [renderHeaderTitle(main), children && children.length && /*#__PURE__*/_jsx(Navigation, {\n          children: children\n        })]\n      })\n    })\n  });\n};\n\nfunction renderHeaderTitle(main) {\n  var _main$breadcrumbs;\n\n  const marginTop = main.icon === 'grafana' ? 12 : 14;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"page-header__inner\",\n    children: [/*#__PURE__*/_jsxs(\"span\", {\n      className: \"page-header__logo\",\n      children: [main.icon && /*#__PURE__*/_jsx(Icon, {\n        name: main.icon,\n        size: \"xxxl\",\n        style: {\n          marginTop\n        }\n      }), main.img && /*#__PURE__*/_jsx(\"img\", {\n        className: \"page-header__img\",\n        src: main.img,\n        alt: `logo of ${main.text}`\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"page-header__info-block\",\n      children: [renderTitle(main.text, (_main$breadcrumbs = main.breadcrumbs) !== null && _main$breadcrumbs !== void 0 ? _main$breadcrumbs : [], main.highlightText), main.subTitle && /*#__PURE__*/_jsx(\"div\", {\n        className: \"page-header__sub-title\",\n        children: main.subTitle\n      })]\n    })]\n  });\n}\n\nfunction renderTitle(title, breadcrumbs, highlightText) {\n  if (!title && (!breadcrumbs || breadcrumbs.length === 0)) {\n    return null;\n  }\n\n  if (!breadcrumbs || breadcrumbs.length === 0) {\n    return /*#__PURE__*/_jsxs(\"h1\", {\n      className: \"page-header__title\",\n      children: [title, highlightText && /*#__PURE__*/_jsx(ProBadge, {\n        text: highlightText,\n        className: css`\n              vertical-align: middle;\n            `\n      })]\n    });\n  }\n\n  const breadcrumbsResult = [];\n\n  for (const bc of breadcrumbs) {\n    if (bc.url) {\n      breadcrumbsResult.push( /*#__PURE__*/_jsx(\"a\", {\n        className: \"page-header__link\",\n        href: bc.url,\n        children: bc.title\n      }, breadcrumbsResult.length));\n    } else {\n      breadcrumbsResult.push( /*#__PURE__*/_jsxs(\"span\", {\n        children: [\" / \", bc.title]\n      }, breadcrumbsResult.length));\n    }\n  }\n\n  breadcrumbsResult.push( /*#__PURE__*/_jsxs(\"span\", {\n    children: [\" / \", title]\n  }, breadcrumbs.length + 1));\n  return /*#__PURE__*/_jsx(\"h1\", {\n    className: \"page-header__title\",\n    children: breadcrumbsResult\n  });\n}\n\nconst getStyles = theme => ({\n  headerCanvas: css`\n    background: ${theme.colors.background.canvas};\n  `\n});\n\nexport default PageHeader;","map":{"version":3,"names":["css","React","Tab","TabsBar","Icon","useStyles2","PanelHeaderMenuItem","ProBadge","SelectNav","children","customCss","length","defaultSelectedItem","find","navItem","active","text","map","hideFromTabs","icon","url","Navigation","child","index","tabSuffix","PageHeader","model","styles","getStyles","main","headerCanvas","renderHeaderTitle","marginTop","img","renderTitle","breadcrumbs","highlightText","subTitle","title","breadcrumbsResult","bc","push","theme","colors","background","canvas"],"sources":["/home/soula/grafana/public/app/core/components/PageHeader/PageHeader.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { FC } from 'react';\n\nimport { NavModel, NavModelItem, NavModelBreadcrumb, GrafanaTheme2 } from '@grafana/data';\nimport { Tab, TabsBar, Icon, IconName, useStyles2 } from '@grafana/ui';\nimport { PanelHeaderMenuItem } from 'app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuItem';\n\nimport { ProBadge } from '../Upgrade/ProBadge';\n\nexport interface Props {\n  model: NavModel;\n}\n\nconst SelectNav = ({ children, customCss }: { children: NavModelItem[]; customCss: string }) => {\n  if (!children || children.length === 0) {\n    return null;\n  }\n\n  const defaultSelectedItem = children.find((navItem) => {\n    return navItem.active === true;\n  });\n\n  return (\n    <div className={`gf-form-select-wrapper width-20 ${customCss}`}>\n      <div className=\"dropdown\">\n        <div className=\"gf-form-input dropdown-toggle\" data-toggle=\"dropdown\">\n          {defaultSelectedItem?.text}\n        </div>\n        <ul className=\"dropdown-menu dropdown-menu--menu\">\n          {children.map((navItem: NavModelItem) => {\n            if (navItem.hideFromTabs) {\n              // TODO: Rename hideFromTabs => hideFromNav\n              return null;\n            }\n            return (\n              <PanelHeaderMenuItem\n                key={navItem.url}\n                iconClassName={navItem.icon}\n                text={navItem.text}\n                href={navItem.url}\n              />\n            );\n          })}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Navigation = ({ children }: { children: NavModelItem[] }) => {\n  if (!children || children.length === 0) {\n    return null;\n  }\n\n  return (\n    <nav>\n      <SelectNav customCss=\"page-header__select-nav\">{children}</SelectNav>\n      <TabsBar className=\"page-header__tabs\" hideBorder={true}>\n        {children.map((child, index) => {\n          return (\n            !child.hideFromTabs && (\n              <Tab\n                label={child.text}\n                active={child.active}\n                key={`${child.url}-${index}`}\n                icon={child.icon as IconName}\n                href={child.url}\n                suffix={child.tabSuffix}\n              />\n            )\n          );\n        })}\n      </TabsBar>\n    </nav>\n  );\n};\n\nexport const PageHeader: FC<Props> = ({ model }) => {\n  const styles = useStyles2(getStyles);\n\n  if (!model) {\n    return null;\n  }\n\n  const main = model.main;\n  const children = main.children;\n  return (\n    <div className={styles.headerCanvas}>\n      <div className=\"page-container\">\n        <div className=\"page-header\">\n          {renderHeaderTitle(main)}\n          {children && children.length && <Navigation>{children}</Navigation>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction renderHeaderTitle(main: NavModelItem) {\n  const marginTop = main.icon === 'grafana' ? 12 : 14;\n\n  return (\n    <div className=\"page-header__inner\">\n      <span className=\"page-header__logo\">\n        {main.icon && <Icon name={main.icon as IconName} size=\"xxxl\" style={{ marginTop }} />}\n        {main.img && <img className=\"page-header__img\" src={main.img} alt={`logo of ${main.text}`} />}\n      </span>\n\n      <div className=\"page-header__info-block\">\n        {renderTitle(main.text, main.breadcrumbs ?? [], main.highlightText)}\n        {main.subTitle && <div className=\"page-header__sub-title\">{main.subTitle}</div>}\n      </div>\n    </div>\n  );\n}\n\nfunction renderTitle(title: string, breadcrumbs: NavModelBreadcrumb[], highlightText: NavModelItem['highlightText']) {\n  if (!title && (!breadcrumbs || breadcrumbs.length === 0)) {\n    return null;\n  }\n\n  if (!breadcrumbs || breadcrumbs.length === 0) {\n    return (\n      <h1 className=\"page-header__title\">\n        {title}\n        {highlightText && (\n          <ProBadge\n            text={highlightText}\n            className={css`\n              vertical-align: middle;\n            `}\n          />\n        )}\n      </h1>\n    );\n  }\n\n  const breadcrumbsResult = [];\n  for (const bc of breadcrumbs) {\n    if (bc.url) {\n      breadcrumbsResult.push(\n        <a className=\"page-header__link\" key={breadcrumbsResult.length} href={bc.url}>\n          {bc.title}\n        </a>\n      );\n    } else {\n      breadcrumbsResult.push(<span key={breadcrumbsResult.length}> / {bc.title}</span>);\n    }\n  }\n  breadcrumbsResult.push(<span key={breadcrumbs.length + 1}> / {title}</span>);\n\n  return <h1 className=\"page-header__title\">{breadcrumbsResult}</h1>;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  headerCanvas: css`\n    background: ${theme.colors.background.canvas};\n  `,\n});\n\nexport default PageHeader;\n"],"mappings":"AAAA,SAASA,GAAT,QAAoB,cAApB;AACA,OAAOC,KAAP,MAA0B,OAA1B;AAGA,SAASC,GAAT,EAAcC,OAAd,EAAuBC,IAAvB,EAAuCC,UAAvC,QAAyD,aAAzD;AACA,SAASC,mBAAT,QAAoC,iEAApC;AAEA,SAASC,QAAT,QAAyB,qBAAzB;;;;AAMA,MAAMC,SAAS,GAAG,CAAC;EAAEC,QAAF;EAAYC;AAAZ,CAAD,KAA8E;EAC9F,IAAI,CAACD,QAAD,IAAaA,QAAQ,CAACE,MAAT,KAAoB,CAArC,EAAwC;IACtC,OAAO,IAAP;EACD;;EAED,MAAMC,mBAAmB,GAAGH,QAAQ,CAACI,IAAT,CAAeC,OAAD,IAAa;IACrD,OAAOA,OAAO,CAACC,MAAR,KAAmB,IAA1B;EACD,CAF2B,CAA5B;EAIA,oBACE;IAAK,SAAS,EAAG,mCAAkCL,SAAU,EAA7D;IAAA,uBACE;MAAK,SAAS,EAAC,UAAf;MAAA,wBACE;QAAK,SAAS,EAAC,+BAAf;QAA+C,eAAY,UAA3D;QAAA,UACGE,mBADH,aACGA,mBADH,uBACGA,mBAAmB,CAAEI;MADxB,EADF,eAIE;QAAI,SAAS,EAAC,mCAAd;QAAA,UACGP,QAAQ,CAACQ,GAAT,CAAcH,OAAD,IAA2B;UACvC,IAAIA,OAAO,CAACI,YAAZ,EAA0B;YACxB;YACA,OAAO,IAAP;UACD;;UACD,oBACE,KAAC,mBAAD;YAEE,aAAa,EAAEJ,OAAO,CAACK,IAFzB;YAGE,IAAI,EAAEL,OAAO,CAACE,IAHhB;YAIE,IAAI,EAAEF,OAAO,CAACM;UAJhB,GACON,OAAO,CAACM,GADf,CADF;QAQD,CAbA;MADH,EAJF;IAAA;EADF,EADF;AAyBD,CAlCD;;AAoCA,MAAMC,UAAU,GAAG,CAAC;EAAEZ;AAAF,CAAD,KAAgD;EACjE,IAAI,CAACA,QAAD,IAAaA,QAAQ,CAACE,MAAT,KAAoB,CAArC,EAAwC;IACtC,OAAO,IAAP;EACD;;EAED,oBACE;IAAA,wBACE,KAAC,SAAD;MAAW,SAAS,EAAC,yBAArB;MAAA,UAAgDF;IAAhD,EADF,eAEE,KAAC,OAAD;MAAS,SAAS,EAAC,mBAAnB;MAAuC,UAAU,EAAE,IAAnD;MAAA,UACGA,QAAQ,CAACQ,GAAT,CAAa,CAACK,KAAD,EAAQC,KAAR,KAAkB;QAC9B,OACE,CAACD,KAAK,CAACJ,YAAP,iBACE,KAAC,GAAD;UACE,KAAK,EAAEI,KAAK,CAACN,IADf;UAEE,MAAM,EAAEM,KAAK,CAACP,MAFhB;UAIE,IAAI,EAAEO,KAAK,CAACH,IAJd;UAKE,IAAI,EAAEG,KAAK,CAACF,GALd;UAME,MAAM,EAAEE,KAAK,CAACE;QANhB,GAGQ,GAAEF,KAAK,CAACF,GAAI,IAAGG,KAAM,EAH7B,CAFJ;MAYD,CAbA;IADH,EAFF;EAAA,EADF;AAqBD,CA1BD;;AA4BA,OAAO,MAAME,UAAqB,GAAG,CAAC;EAAEC;AAAF,CAAD,KAAe;EAClD,MAAMC,MAAM,GAAGtB,UAAU,CAACuB,SAAD,CAAzB;;EAEA,IAAI,CAACF,KAAL,EAAY;IACV,OAAO,IAAP;EACD;;EAED,MAAMG,IAAI,GAAGH,KAAK,CAACG,IAAnB;EACA,MAAMpB,QAAQ,GAAGoB,IAAI,CAACpB,QAAtB;EACA,oBACE;IAAK,SAAS,EAAEkB,MAAM,CAACG,YAAvB;IAAA,uBACE;MAAK,SAAS,EAAC,gBAAf;MAAA,uBACE;QAAK,SAAS,EAAC,aAAf;QAAA,WACGC,iBAAiB,CAACF,IAAD,CADpB,EAEGpB,QAAQ,IAAIA,QAAQ,CAACE,MAArB,iBAA+B,KAAC,UAAD;UAAA,UAAaF;QAAb,EAFlC;MAAA;IADF;EADF,EADF;AAUD,CAnBM;;AAqBP,SAASsB,iBAAT,CAA2BF,IAA3B,EAA+C;EAAA;;EAC7C,MAAMG,SAAS,GAAGH,IAAI,CAACV,IAAL,KAAc,SAAd,GAA0B,EAA1B,GAA+B,EAAjD;EAEA,oBACE;IAAK,SAAS,EAAC,oBAAf;IAAA,wBACE;MAAM,SAAS,EAAC,mBAAhB;MAAA,WACGU,IAAI,CAACV,IAAL,iBAAa,KAAC,IAAD;QAAM,IAAI,EAAEU,IAAI,CAACV,IAAjB;QAAmC,IAAI,EAAC,MAAxC;QAA+C,KAAK,EAAE;UAAEa;QAAF;MAAtD,EADhB,EAEGH,IAAI,CAACI,GAAL,iBAAY;QAAK,SAAS,EAAC,kBAAf;QAAkC,GAAG,EAAEJ,IAAI,CAACI,GAA5C;QAAiD,GAAG,EAAG,WAAUJ,IAAI,CAACb,IAAK;MAA3E,EAFf;IAAA,EADF,eAME;MAAK,SAAS,EAAC,yBAAf;MAAA,WACGkB,WAAW,CAACL,IAAI,CAACb,IAAN,uBAAYa,IAAI,CAACM,WAAjB,iEAAgC,EAAhC,EAAoCN,IAAI,CAACO,aAAzC,CADd,EAEGP,IAAI,CAACQ,QAAL,iBAAiB;QAAK,SAAS,EAAC,wBAAf;QAAA,UAAyCR,IAAI,CAACQ;MAA9C,EAFpB;IAAA,EANF;EAAA,EADF;AAaD;;AAED,SAASH,WAAT,CAAqBI,KAArB,EAAoCH,WAApC,EAAuEC,aAAvE,EAAqH;EACnH,IAAI,CAACE,KAAD,KAAW,CAACH,WAAD,IAAgBA,WAAW,CAACxB,MAAZ,KAAuB,CAAlD,CAAJ,EAA0D;IACxD,OAAO,IAAP;EACD;;EAED,IAAI,CAACwB,WAAD,IAAgBA,WAAW,CAACxB,MAAZ,KAAuB,CAA3C,EAA8C;IAC5C,oBACE;MAAI,SAAS,EAAC,oBAAd;MAAA,WACG2B,KADH,EAEGF,aAAa,iBACZ,KAAC,QAAD;QACE,IAAI,EAAEA,aADR;QAEE,SAAS,EAAEpC,GAAI;AAC3B;AACA;MAJU,EAHJ;IAAA,EADF;EAaD;;EAED,MAAMuC,iBAAiB,GAAG,EAA1B;;EACA,KAAK,MAAMC,EAAX,IAAiBL,WAAjB,EAA8B;IAC5B,IAAIK,EAAE,CAACpB,GAAP,EAAY;MACVmB,iBAAiB,CAACE,IAAlB,eACE;QAAG,SAAS,EAAC,mBAAb;QAAgE,IAAI,EAAED,EAAE,CAACpB,GAAzE;QAAA,UACGoB,EAAE,CAACF;MADN,GAAsCC,iBAAiB,CAAC5B,MAAxD,CADF;IAKD,CAND,MAMO;MACL4B,iBAAiB,CAACE,IAAlB,eAAuB;QAAA,kBAAyCD,EAAE,CAACF,KAA5C;MAAA,GAAWC,iBAAiB,CAAC5B,MAA7B,CAAvB;IACD;EACF;;EACD4B,iBAAiB,CAACE,IAAlB,eAAuB;IAAA,kBAAuCH,KAAvC;EAAA,GAAWH,WAAW,CAACxB,MAAZ,GAAqB,CAAhC,CAAvB;EAEA,oBAAO;IAAI,SAAS,EAAC,oBAAd;IAAA,UAAoC4B;EAApC,EAAP;AACD;;AAED,MAAMX,SAAS,GAAIc,KAAD,KAA2B;EAC3CZ,YAAY,EAAE9B,GAAI;AACpB,kBAAkB0C,KAAK,CAACC,MAAN,CAAaC,UAAb,CAAwBC,MAAO;AACjD;AAH6C,CAA3B,CAAlB;;AAMA,eAAepB,UAAf"},"metadata":{},"sourceType":"module"}