{"ast":null,"code":"var _thead, _Button;\n\nimport { css } from '@emotion/css';\nimport React from 'react';\nimport { useAsync } from 'react-use';\nimport { Button, CustomScrollbar, Modal } from '@grafana/ui';\nimport config from 'app/core/config';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { api } from '../../features/profile/api';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function OrgSwitcher({\n  onDismiss\n}) {\n  const {\n    value: orgs = []\n  } = useAsync(() => {\n    return api.loadOrgs();\n  }, []);\n  const currentOrgId = contextSrv.user.orgId;\n  const contentClassName = css({\n    display: 'flex',\n    maxHeight: 'calc(85vh - 42px)'\n  });\n\n  const setCurrentOrg = async org => {\n    await api.setUserOrg(org);\n    window.location.href = `${config.appSubUrl}${config.appSubUrl.endsWith('/') ? '' : '/'}?orgId=${org.orgId}`;\n  };\n\n  return /*#__PURE__*/_jsx(Modal, {\n    title: \"Switch Organization\",\n    icon: \"arrow-random\",\n    onDismiss: onDismiss,\n    isOpen: true,\n    contentClassName: contentClassName,\n    children: /*#__PURE__*/_jsx(CustomScrollbar, {\n      autoHeightMin: \"100%\",\n      children: /*#__PURE__*/_jsxs(\"table\", {\n        className: \"filter-table form-inline\",\n        children: [_thead || (_thead = /*#__PURE__*/_jsx(\"thead\", {\n          children: /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"th\", {\n              children: \"Name\"\n            }), /*#__PURE__*/_jsx(\"th\", {\n              children: \"Role\"\n            }), /*#__PURE__*/_jsx(\"th\", {})]\n          })\n        })), /*#__PURE__*/_jsx(\"tbody\", {\n          children: orgs.map(org => /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              children: org.name\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: org.role\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"text-right\",\n              children: org.orgId === currentOrgId ? _Button || (_Button = /*#__PURE__*/_jsx(Button, {\n                size: \"sm\",\n                children: \"Current\"\n              })) : /*#__PURE__*/_jsx(Button, {\n                variant: \"secondary\",\n                size: \"sm\",\n                onClick: () => setCurrentOrg(org),\n                children: \"Switch to\"\n              })\n            })]\n          }, org.orgId))\n        })]\n      })\n    })\n  });\n}","map":{"version":3,"names":["css","React","useAsync","Button","CustomScrollbar","Modal","config","contextSrv","api","OrgSwitcher","onDismiss","value","orgs","loadOrgs","currentOrgId","user","orgId","contentClassName","display","maxHeight","setCurrentOrg","org","setUserOrg","window","location","href","appSubUrl","endsWith","map","name","role"],"sources":["/home/soula/grafana/public/app/core/components/OrgSwitcher.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { ReactElement } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { UserOrgDTO } from '@grafana/data';\nimport { Button, CustomScrollbar, Modal } from '@grafana/ui';\nimport config from 'app/core/config';\nimport { contextSrv } from 'app/core/services/context_srv';\n\nimport { api } from '../../features/profile/api';\n\ninterface Props {\n  onDismiss: () => void;\n}\n\nexport function OrgSwitcher({ onDismiss }: Props): ReactElement {\n  const { value: orgs = [] } = useAsync(() => {\n    return api.loadOrgs();\n  }, []);\n  const currentOrgId = contextSrv.user.orgId;\n  const contentClassName = css({\n    display: 'flex',\n    maxHeight: 'calc(85vh - 42px)',\n  });\n  const setCurrentOrg = async (org: UserOrgDTO) => {\n    await api.setUserOrg(org);\n    window.location.href = `${config.appSubUrl}${config.appSubUrl.endsWith('/') ? '' : '/'}?orgId=${org.orgId}`;\n  };\n\n  return (\n    <Modal\n      title=\"Switch Organization\"\n      icon=\"arrow-random\"\n      onDismiss={onDismiss}\n      isOpen={true}\n      contentClassName={contentClassName}\n    >\n      <CustomScrollbar autoHeightMin=\"100%\">\n        <table className=\"filter-table form-inline\">\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Role</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {orgs.map((org) => (\n              <tr key={org.orgId}>\n                <td>{org.name}</td>\n                <td>{org.role}</td>\n                <td className=\"text-right\">\n                  {org.orgId === currentOrgId ? (\n                    <Button size=\"sm\">Current</Button>\n                  ) : (\n                    <Button variant=\"secondary\" size=\"sm\" onClick={() => setCurrentOrg(org)}>\n                      Switch to\n                    </Button>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </CustomScrollbar>\n    </Modal>\n  );\n}\n"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,cAApB;AACA,OAAOC,KAAP,MAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,WAAzB;AAGA,SAASC,MAAT,EAAiBC,eAAjB,EAAkCC,KAAlC,QAA+C,aAA/C;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,UAAT,QAA2B,+BAA3B;AAEA,SAASC,GAAT,QAAoB,4BAApB;;;AAMA,OAAO,SAASC,WAAT,CAAqB;EAAEC;AAAF,CAArB,EAAyD;EAC9D,MAAM;IAAEC,KAAK,EAAEC,IAAI,GAAG;EAAhB,IAAuBV,QAAQ,CAAC,MAAM;IAC1C,OAAOM,GAAG,CAACK,QAAJ,EAAP;EACD,CAFoC,EAElC,EAFkC,CAArC;EAGA,MAAMC,YAAY,GAAGP,UAAU,CAACQ,IAAX,CAAgBC,KAArC;EACA,MAAMC,gBAAgB,GAAGjB,GAAG,CAAC;IAC3BkB,OAAO,EAAE,MADkB;IAE3BC,SAAS,EAAE;EAFgB,CAAD,CAA5B;;EAIA,MAAMC,aAAa,GAAG,MAAOC,GAAP,IAA2B;IAC/C,MAAMb,GAAG,CAACc,UAAJ,CAAeD,GAAf,CAAN;IACAE,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAwB,GAAEnB,MAAM,CAACoB,SAAU,GAAEpB,MAAM,CAACoB,SAAP,CAAiBC,QAAjB,CAA0B,GAA1B,IAAiC,EAAjC,GAAsC,GAAI,UAASN,GAAG,CAACL,KAAM,EAA1G;EACD,CAHD;;EAKA,oBACE,KAAC,KAAD;IACE,KAAK,EAAC,qBADR;IAEE,IAAI,EAAC,cAFP;IAGE,SAAS,EAAEN,SAHb;IAIE,MAAM,EAAE,IAJV;IAKE,gBAAgB,EAAEO,gBALpB;IAAA,uBAOE,KAAC,eAAD;MAAiB,aAAa,EAAC,MAA/B;MAAA,uBACE;QAAO,SAAS,EAAC,0BAAjB;QAAA,4CACE;UAAA,uBACE;YAAA,wBACE;cAAA;YAAA,EADF,eAEE;cAAA;YAAA,EAFF,eAGE,cAHF;UAAA;QADF,EADF,gBAQE;UAAA,UACGL,IAAI,CAACgB,GAAL,CAAUP,GAAD,iBACR;YAAA,wBACE;cAAA,UAAKA,GAAG,CAACQ;YAAT,EADF,eAEE;cAAA,UAAKR,GAAG,CAACS;YAAT,EAFF,eAGE;cAAI,SAAS,EAAC,YAAd;cAAA,UACGT,GAAG,CAACL,KAAJ,KAAcF,YAAd,sCACC,KAAC,MAAD;gBAAQ,IAAI,EAAC,IAAb;gBAAA;cAAA,EADD,iBAGC,KAAC,MAAD;gBAAQ,OAAO,EAAC,WAAhB;gBAA4B,IAAI,EAAC,IAAjC;gBAAsC,OAAO,EAAE,MAAMM,aAAa,CAACC,GAAD,CAAlE;gBAAA;cAAA;YAJJ,EAHF;UAAA,GAASA,GAAG,CAACL,KAAb,CADD;QADH,EARF;MAAA;IADF;EAPF,EADF;AAsCD"},"metadata":{},"sourceType":"module"}