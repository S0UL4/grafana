{"ast":null,"code":"var _p;\n\nimport { css, cx } from '@emotion/css';\nimport React, { useMemo, useReducer } from 'react';\nimport { useDebounce } from 'react-use';\nimport { LoadingState } from '@grafana/data';\nimport { Pagination, useStyles } from '@grafana/ui';\nimport { LibraryPanelCard } from '../LibraryPanelCard/LibraryPanelCard';\nimport { asyncDispatcher, deleteLibraryPanel, searchForLibraryPanels } from './actions';\nimport { changePage, initialLibraryPanelsViewState, libraryPanelsViewReducer } from './reducer';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const LibraryPanelsView = ({\n  className,\n  onClickCard,\n  searchString,\n  sortDirection,\n  panelFilter,\n  folderFilter,\n  showSecondaryActions,\n  currentPanelId: currentPanel,\n  perPage: propsPerPage = 40\n}) => {\n  const styles = useStyles(getPanelViewStyles);\n  const [{\n    libraryPanels,\n    page,\n    perPage,\n    numberOfPages,\n    loadingState,\n    currentPanelId\n  }, dispatch] = useReducer(libraryPanelsViewReducer, Object.assign({}, initialLibraryPanelsViewState, {\n    currentPanelId: currentPanel,\n    perPage: propsPerPage\n  }));\n  const asyncDispatch = useMemo(() => asyncDispatcher(dispatch), [dispatch]);\n  useDebounce(() => asyncDispatch(searchForLibraryPanels({\n    searchString,\n    sortDirection,\n    panelFilter,\n    folderFilter,\n    page,\n    perPage,\n    currentPanelId\n  })), 300, [searchString, sortDirection, panelFilter, folderFilter, page, asyncDispatch]);\n\n  const onDelete = ({\n    uid\n  }) => asyncDispatch(deleteLibraryPanel(uid, {\n    searchString,\n    page,\n    perPage\n  }));\n\n  const onPageChange = page => asyncDispatch(changePage({\n    page\n  }));\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: cx(styles.container, className),\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.libraryPanelList,\n      children: loadingState === LoadingState.Loading ? _p || (_p = /*#__PURE__*/_jsx(\"p\", {\n        children: \"Loading library panels...\"\n      })) : libraryPanels.length < 1 ? /*#__PURE__*/_jsx(\"p\", {\n        className: styles.noPanelsFound,\n        children: \"No library panels found.\"\n      }) : libraryPanels === null || libraryPanels === void 0 ? void 0 : libraryPanels.map((item, i) => /*#__PURE__*/_jsx(LibraryPanelCard, {\n        libraryPanel: item,\n        onDelete: onDelete,\n        onClick: onClickCard,\n        showSecondaryActions: showSecondaryActions\n      }, `library-panel=${i}`))\n    }), libraryPanels.length ? /*#__PURE__*/_jsx(\"div\", {\n      className: styles.pagination,\n      children: /*#__PURE__*/_jsx(Pagination, {\n        currentPage: page,\n        numberOfPages: numberOfPages,\n        onNavigate: onPageChange,\n        hideWhenSinglePage: true\n      })\n    }) : null]\n  });\n};\n\nconst getPanelViewStyles = theme => {\n  return {\n    container: css`\n      display: flex;\n      flex-direction: column;\n      flex-wrap: nowrap;\n    `,\n    libraryPanelList: css`\n      max-width: 100%;\n      display: grid;\n      grid-gap: ${theme.spacing.sm};\n    `,\n    searchHeader: css`\n      display: flex;\n    `,\n    newPanelButton: css`\n      margin-top: 10px;\n      align-self: flex-start;\n    `,\n    pagination: css`\n      align-self: center;\n      margin-top: ${theme.spacing.sm};\n    `,\n    noPanelsFound: css`\n      label: noPanelsFound;\n      min-height: 200px;\n    `\n  };\n};","map":{"version":3,"names":["css","cx","React","useMemo","useReducer","useDebounce","LoadingState","Pagination","useStyles","LibraryPanelCard","asyncDispatcher","deleteLibraryPanel","searchForLibraryPanels","changePage","initialLibraryPanelsViewState","libraryPanelsViewReducer","LibraryPanelsView","className","onClickCard","searchString","sortDirection","panelFilter","folderFilter","showSecondaryActions","currentPanelId","currentPanel","perPage","propsPerPage","styles","getPanelViewStyles","libraryPanels","page","numberOfPages","loadingState","dispatch","asyncDispatch","onDelete","uid","onPageChange","container","libraryPanelList","Loading","length","noPanelsFound","map","item","i","pagination","theme","spacing","sm","searchHeader","newPanelButton"],"sources":["/home/soula/grafana/public/app/features/library-panels/components/LibraryPanelsView/LibraryPanelsView.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { useMemo, useReducer } from 'react';\nimport { useDebounce } from 'react-use';\n\nimport { GrafanaTheme, LoadingState } from '@grafana/data';\nimport { Pagination, useStyles } from '@grafana/ui';\n\nimport { LibraryElementDTO } from '../../types';\nimport { LibraryPanelCard } from '../LibraryPanelCard/LibraryPanelCard';\n\nimport { asyncDispatcher, deleteLibraryPanel, searchForLibraryPanels } from './actions';\nimport { changePage, initialLibraryPanelsViewState, libraryPanelsViewReducer } from './reducer';\n\ninterface LibraryPanelViewProps {\n  className?: string;\n  onClickCard: (panel: LibraryElementDTO) => void;\n  showSecondaryActions?: boolean;\n  currentPanelId?: string;\n  searchString: string;\n  sortDirection?: string;\n  panelFilter?: string[];\n  folderFilter?: string[];\n  perPage?: number;\n}\n\nexport const LibraryPanelsView: React.FC<LibraryPanelViewProps> = ({\n  className,\n  onClickCard,\n  searchString,\n  sortDirection,\n  panelFilter,\n  folderFilter,\n  showSecondaryActions,\n  currentPanelId: currentPanel,\n  perPage: propsPerPage = 40,\n}) => {\n  const styles = useStyles(getPanelViewStyles);\n  const [{ libraryPanels, page, perPage, numberOfPages, loadingState, currentPanelId }, dispatch] = useReducer(\n    libraryPanelsViewReducer,\n    {\n      ...initialLibraryPanelsViewState,\n      currentPanelId: currentPanel,\n      perPage: propsPerPage,\n    }\n  );\n  const asyncDispatch = useMemo(() => asyncDispatcher(dispatch), [dispatch]);\n  useDebounce(\n    () =>\n      asyncDispatch(\n        searchForLibraryPanels({\n          searchString,\n          sortDirection,\n          panelFilter,\n          folderFilter,\n          page,\n          perPage,\n          currentPanelId,\n        })\n      ),\n    300,\n    [searchString, sortDirection, panelFilter, folderFilter, page, asyncDispatch]\n  );\n  const onDelete = ({ uid }: LibraryElementDTO) =>\n    asyncDispatch(deleteLibraryPanel(uid, { searchString, page, perPage }));\n  const onPageChange = (page: number) => asyncDispatch(changePage({ page }));\n\n  return (\n    <div className={cx(styles.container, className)}>\n      <div className={styles.libraryPanelList}>\n        {loadingState === LoadingState.Loading ? (\n          <p>Loading library panels...</p>\n        ) : libraryPanels.length < 1 ? (\n          <p className={styles.noPanelsFound}>No library panels found.</p>\n        ) : (\n          libraryPanels?.map((item, i) => (\n            <LibraryPanelCard\n              key={`library-panel=${i}`}\n              libraryPanel={item}\n              onDelete={onDelete}\n              onClick={onClickCard}\n              showSecondaryActions={showSecondaryActions}\n            />\n          ))\n        )}\n      </div>\n      {libraryPanels.length ? (\n        <div className={styles.pagination}>\n          <Pagination\n            currentPage={page}\n            numberOfPages={numberOfPages}\n            onNavigate={onPageChange}\n            hideWhenSinglePage={true}\n          />\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nconst getPanelViewStyles = (theme: GrafanaTheme) => {\n  return {\n    container: css`\n      display: flex;\n      flex-direction: column;\n      flex-wrap: nowrap;\n    `,\n    libraryPanelList: css`\n      max-width: 100%;\n      display: grid;\n      grid-gap: ${theme.spacing.sm};\n    `,\n    searchHeader: css`\n      display: flex;\n    `,\n    newPanelButton: css`\n      margin-top: 10px;\n      align-self: flex-start;\n    `,\n    pagination: css`\n      align-self: center;\n      margin-top: ${theme.spacing.sm};\n    `,\n    noPanelsFound: css`\n      label: noPanelsFound;\n      min-height: 200px;\n    `,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}