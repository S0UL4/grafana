{"ast":null,"code":"var _h;\n\nimport React, { useMemo } from 'react';\nimport { config } from '@grafana/runtime';\nimport { getCredentials, updateCredentials } from '../credentials';\nimport { AzureCredentialsForm } from './AzureCredentialsForm';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst azureClouds = [{\n  value: 'azuremonitor',\n  label: 'Azure'\n}, {\n  value: 'govazuremonitor',\n  label: 'Azure US Government'\n}, {\n  value: 'germanyazuremonitor',\n  label: 'Azure Germany'\n}, {\n  value: 'chinaazuremonitor',\n  label: 'Azure China'\n}];\nexport const MonitorConfig = props => {\n  const {\n    updateOptions,\n    getSubscriptions\n  } = props;\n  const credentials = useMemo(() => getCredentials(props.options), [props.options]);\n\n  const onCredentialsChange = credentials => {\n    updateOptions(options => updateCredentials(options, credentials));\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [_h || (_h = /*#__PURE__*/_jsx(\"h3\", {\n      className: \"page-heading\",\n      children: \"Authentication\"\n    })), /*#__PURE__*/_jsx(AzureCredentialsForm, {\n      managedIdentityEnabled: config.azure.managedIdentityEnabled,\n      credentials: credentials,\n      azureCloudOptions: azureClouds,\n      onCredentialsChange: onCredentialsChange,\n      getSubscriptions: getSubscriptions,\n      disabled: props.options.readOnly\n    })]\n  });\n};\nexport default MonitorConfig;","map":{"version":3,"names":["React","useMemo","config","getCredentials","updateCredentials","AzureCredentialsForm","azureClouds","value","label","MonitorConfig","props","updateOptions","getSubscriptions","credentials","options","onCredentialsChange","azure","managedIdentityEnabled","readOnly"],"sources":["/home/soula/grafana/public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MonitorConfig.tsx"],"sourcesContent":["import React, { FunctionComponent, useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nimport { getCredentials, updateCredentials } from '../credentials';\nimport { AzureDataSourceSettings, AzureCredentials } from '../types';\n\nimport { AzureCredentialsForm } from './AzureCredentialsForm';\n\nconst azureClouds = [\n  { value: 'azuremonitor', label: 'Azure' },\n  { value: 'govazuremonitor', label: 'Azure US Government' },\n  { value: 'germanyazuremonitor', label: 'Azure Germany' },\n  { value: 'chinaazuremonitor', label: 'Azure China' },\n] as SelectableValue[];\n\nexport interface Props {\n  options: AzureDataSourceSettings;\n  updateOptions: (optionsFunc: (options: AzureDataSourceSettings) => AzureDataSourceSettings) => void;\n  getSubscriptions: () => Promise<Array<SelectableValue<string>>>;\n}\n\nexport const MonitorConfig: FunctionComponent<Props> = (props: Props) => {\n  const { updateOptions, getSubscriptions } = props;\n  const credentials = useMemo(() => getCredentials(props.options), [props.options]);\n\n  const onCredentialsChange = (credentials: AzureCredentials): void => {\n    updateOptions((options) => updateCredentials(options, credentials));\n  };\n\n  return (\n    <>\n      <h3 className=\"page-heading\">Authentication</h3>\n      <AzureCredentialsForm\n        managedIdentityEnabled={config.azure.managedIdentityEnabled}\n        credentials={credentials}\n        azureCloudOptions={azureClouds}\n        onCredentialsChange={onCredentialsChange}\n        getSubscriptions={getSubscriptions}\n        disabled={props.options.readOnly}\n      />\n    </>\n  );\n};\n\nexport default MonitorConfig;\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAmCC,OAAnC,QAAkD,OAAlD;AAGA,SAASC,MAAT,QAAuB,kBAAvB;AAEA,SAASC,cAAT,EAAyBC,iBAAzB,QAAkD,gBAAlD;AAGA,SAASC,oBAAT,QAAqC,wBAArC;;;;AAEA,MAAMC,WAAW,GAAG,CAClB;EAAEC,KAAK,EAAE,cAAT;EAAyBC,KAAK,EAAE;AAAhC,CADkB,EAElB;EAAED,KAAK,EAAE,iBAAT;EAA4BC,KAAK,EAAE;AAAnC,CAFkB,EAGlB;EAAED,KAAK,EAAE,qBAAT;EAAgCC,KAAK,EAAE;AAAvC,CAHkB,EAIlB;EAAED,KAAK,EAAE,mBAAT;EAA8BC,KAAK,EAAE;AAArC,CAJkB,CAApB;AAaA,OAAO,MAAMC,aAAuC,GAAIC,KAAD,IAAkB;EACvE,MAAM;IAAEC,aAAF;IAAiBC;EAAjB,IAAsCF,KAA5C;EACA,MAAMG,WAAW,GAAGZ,OAAO,CAAC,MAAME,cAAc,CAACO,KAAK,CAACI,OAAP,CAArB,EAAsC,CAACJ,KAAK,CAACI,OAAP,CAAtC,CAA3B;;EAEA,MAAMC,mBAAmB,GAAIF,WAAD,IAAyC;IACnEF,aAAa,CAAEG,OAAD,IAAaV,iBAAiB,CAACU,OAAD,EAAUD,WAAV,CAA/B,CAAb;EACD,CAFD;;EAIA,oBACE;IAAA,oCACE;MAAI,SAAS,EAAC,cAAd;MAAA;IAAA,EADF,gBAEE,KAAC,oBAAD;MACE,sBAAsB,EAAEX,MAAM,CAACc,KAAP,CAAaC,sBADvC;MAEE,WAAW,EAAEJ,WAFf;MAGE,iBAAiB,EAAEP,WAHrB;MAIE,mBAAmB,EAAES,mBAJvB;MAKE,gBAAgB,EAAEH,gBALpB;MAME,QAAQ,EAAEF,KAAK,CAACI,OAAN,CAAcI;IAN1B,EAFF;EAAA,EADF;AAaD,CArBM;AAuBP,eAAeT,aAAf"},"metadata":{},"sourceType":"module"}