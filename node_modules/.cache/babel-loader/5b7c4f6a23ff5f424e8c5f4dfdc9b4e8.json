{"ast":null,"code":"var _Spinner, _Button, _Button2;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Libraries\nimport { css, cx } from '@emotion/css';\nimport React, { PureComponent } from 'react';\nimport { config } from '@grafana/runtime';\nimport { Button, Spinner, stylesFactory } from '@grafana/ui';\nimport { contextSrv } from 'app/core/core';\nimport { backendSrv } from 'app/core/services/backend_srv';\nimport { getDashboardSrv } from 'app/features/dashboard/services/DashboardSrv';\nimport { Step } from './components/Step';\nimport { getSteps } from './steps';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport class GettingStarted extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      checksDone: false,\n      currentStep: 0,\n      steps: getSteps()\n    });\n\n    _defineProperty(this, \"onForwardClick\", () => {\n      this.setState(prevState => ({\n        currentStep: prevState.currentStep + 1\n      }));\n    });\n\n    _defineProperty(this, \"onPreviousClick\", () => {\n      this.setState(prevState => ({\n        currentStep: prevState.currentStep - 1\n      }));\n    });\n\n    _defineProperty(this, \"dismiss\", () => {\n      const {\n        id\n      } = this.props;\n      const dashboard = getDashboardSrv().getCurrent();\n      const panel = dashboard === null || dashboard === void 0 ? void 0 : dashboard.getPanelById(id);\n      dashboard === null || dashboard === void 0 ? void 0 : dashboard.removePanel(panel);\n      backendSrv.request({\n        method: 'PUT',\n        url: '/api/user/helpflags/1',\n        showSuccessAlert: false\n      }).then(res => {\n        contextSrv.user.helpFlags1 = res.helpFlags1;\n      });\n    });\n  }\n\n  async componentDidMount() {\n    const {\n      steps\n    } = this.state;\n    const checkedStepsPromises = steps.map(async step => {\n      const checkedCardsPromises = step.cards.map(card => {\n        return card.check().then(passed => {\n          return Object.assign({}, card, {\n            done: passed\n          });\n        });\n      });\n      const checkedCards = await Promise.all(checkedCardsPromises);\n      return Object.assign({}, step, {\n        done: checkedCards.every(c => c.done),\n        cards: checkedCards\n      });\n    });\n    const checkedSteps = await Promise.all(checkedStepsPromises);\n    this.setState({\n      currentStep: !checkedSteps[0].done ? 0 : 1,\n      steps: checkedSteps,\n      checksDone: true\n    });\n  }\n\n  render() {\n    const {\n      checksDone,\n      currentStep,\n      steps\n    } = this.state;\n    const styles = getStyles();\n    const step = steps[currentStep];\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: styles.container,\n      children: !checksDone ? /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.loading,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.loadingText,\n          children: \"Checking completed setup steps\"\n        }), _Spinner || (_Spinner = /*#__PURE__*/_jsx(Spinner, {\n          size: 24,\n          inline: true\n        }))]\n      }) : /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.dismiss,\n          children: /*#__PURE__*/_jsx(\"div\", {\n            onClick: this.dismiss,\n            children: \"Remove this panel\"\n          })\n        }), currentStep === steps.length - 1 && /*#__PURE__*/_jsx(\"div\", {\n          className: cx(styles.backForwardButtons, styles.previous),\n          onClick: this.onPreviousClick,\n          children: _Button || (_Button = /*#__PURE__*/_jsx(Button, {\n            \"aria-label\": \"To advanced tutorials\",\n            icon: \"angle-left\",\n            variant: \"secondary\"\n          }))\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.content,\n          children: /*#__PURE__*/_jsx(Step, {\n            step: step\n          })\n        }), currentStep < steps.length - 1 && /*#__PURE__*/_jsx(\"div\", {\n          className: cx(styles.backForwardButtons, styles.forward),\n          onClick: this.onForwardClick,\n          children: _Button2 || (_Button2 = /*#__PURE__*/_jsx(Button, {\n            \"aria-label\": \"To basic tutorials\",\n            icon: \"angle-right\",\n            variant: \"secondary\"\n          }))\n        })]\n      })\n    });\n  }\n\n}\nconst getStyles = stylesFactory(() => {\n  const {\n    theme\n  } = config;\n  return {\n    container: css`\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      // background: url(public/img/getting_started_bg_${theme.type}.svg) no-repeat;\n      background-size: cover;\n      padding: ${theme.spacing.xl} ${theme.spacing.md} 0;\n    `,\n    content: css`\n      label: content;\n      display: flex;\n      justify-content: center;\n\n      @media only screen and (max-width: ${theme.breakpoints.xxl}) {\n        margin-left: ${theme.spacing.lg};\n        justify-content: flex-start;\n      }\n    `,\n    header: css`\n      label: header;\n      margin-bottom: ${theme.spacing.lg};\n      display: flex;\n      flex-direction: column;\n\n      @media only screen and (min-width: ${theme.breakpoints.lg}) {\n        flex-direction: row;\n      }\n    `,\n    headerLogo: css`\n      height: 58px;\n      padding-right: ${theme.spacing.md};\n      display: none;\n\n      @media only screen and (min-width: ${theme.breakpoints.md}) {\n        display: block;\n      }\n    `,\n    heading: css`\n      label: heading;\n      margin-right: ${theme.spacing.lg};\n      margin-bottom: ${theme.spacing.lg};\n      flex-grow: 1;\n      display: flex;\n\n      @media only screen and (min-width: ${theme.breakpoints.md}) {\n        margin-bottom: 0;\n      }\n    `,\n    backForwardButtons: css`\n      position: absolute;\n      bottom: 50%;\n      top: 50%;\n      height: 50px;\n    `,\n    previous: css`\n      left: 10px;\n\n      @media only screen and (max-width: ${theme.breakpoints.md}) {\n        left: 0;\n      }\n    `,\n    forward: css`\n      right: 10px;\n\n      @media only screen and (max-width: ${theme.breakpoints.md}) {\n        right: 0;\n      }\n    `,\n    dismiss: css`\n      display: flex;\n      justify-content: flex-end;\n      cursor: pointer;\n      text-decoration: underline;\n      margin-right: ${theme.spacing.md};\n      margin-bottom: ${theme.spacing.sm};\n    `,\n    loading: css`\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n    `,\n    loadingText: css`\n      margin-right: ${theme.spacing.sm};\n    `\n  };\n});","map":{"version":3,"names":["css","cx","React","PureComponent","config","Button","Spinner","stylesFactory","contextSrv","backendSrv","getDashboardSrv","Step","getSteps","GettingStarted","checksDone","currentStep","steps","setState","prevState","id","props","dashboard","getCurrent","panel","getPanelById","removePanel","request","method","url","showSuccessAlert","then","res","user","helpFlags1","componentDidMount","state","checkedStepsPromises","map","step","checkedCardsPromises","cards","card","check","passed","done","checkedCards","Promise","all","every","c","checkedSteps","render","styles","getStyles","container","loading","loadingText","dismiss","length","backForwardButtons","previous","onPreviousClick","content","forward","onForwardClick","theme","type","spacing","xl","md","breakpoints","xxl","lg","header","headerLogo","heading","sm"],"sources":["/home/soula/grafana/public/app/plugins/panel/gettingstarted/GettingStarted.tsx"],"sourcesContent":["// Libraries\nimport { css, cx } from '@emotion/css';\nimport React, { PureComponent } from 'react';\n\nimport { PanelProps } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { Button, Spinner, stylesFactory } from '@grafana/ui';\nimport { contextSrv } from 'app/core/core';\nimport { backendSrv } from 'app/core/services/backend_srv';\nimport { getDashboardSrv } from 'app/features/dashboard/services/DashboardSrv';\n\nimport { Step } from './components/Step';\nimport { getSteps } from './steps';\nimport { Card, SetupStep } from './types';\n\ninterface State {\n  checksDone: boolean;\n  currentStep: number;\n  steps: SetupStep[];\n}\n\nexport class GettingStarted extends PureComponent<PanelProps, State> {\n  state = {\n    checksDone: false,\n    currentStep: 0,\n    steps: getSteps(),\n  };\n\n  async componentDidMount() {\n    const { steps } = this.state;\n\n    const checkedStepsPromises: Array<Promise<SetupStep>> = steps.map(async (step: SetupStep) => {\n      const checkedCardsPromises: Array<Promise<Card>> = step.cards.map((card: Card) => {\n        return card.check().then((passed) => {\n          return { ...card, done: passed };\n        });\n      });\n      const checkedCards = await Promise.all(checkedCardsPromises);\n      return {\n        ...step,\n        done: checkedCards.every((c) => c.done),\n        cards: checkedCards,\n      };\n    });\n\n    const checkedSteps = await Promise.all(checkedStepsPromises);\n\n    this.setState({\n      currentStep: !checkedSteps[0].done ? 0 : 1,\n      steps: checkedSteps,\n      checksDone: true,\n    });\n  }\n\n  onForwardClick = () => {\n    this.setState((prevState) => ({\n      currentStep: prevState.currentStep + 1,\n    }));\n  };\n\n  onPreviousClick = () => {\n    this.setState((prevState) => ({\n      currentStep: prevState.currentStep - 1,\n    }));\n  };\n\n  dismiss = () => {\n    const { id } = this.props;\n    const dashboard = getDashboardSrv().getCurrent();\n    const panel = dashboard?.getPanelById(id);\n\n    dashboard?.removePanel(panel!);\n\n    backendSrv\n      .request({\n        method: 'PUT',\n        url: '/api/user/helpflags/1',\n        showSuccessAlert: false,\n      })\n      .then((res: any) => {\n        contextSrv.user.helpFlags1 = res.helpFlags1;\n      });\n  };\n\n  render() {\n    const { checksDone, currentStep, steps } = this.state;\n    const styles = getStyles();\n    const step = steps[currentStep];\n\n    return (\n      <div className={styles.container}>\n        {!checksDone ? (\n          <div className={styles.loading}>\n            <div className={styles.loadingText}>Checking completed setup steps</div>\n            <Spinner size={24} inline />\n          </div>\n        ) : (\n          <>\n            <div className={styles.dismiss}>\n              <div onClick={this.dismiss}>Remove this panel</div>\n            </div>\n            {currentStep === steps.length - 1 && (\n              <div className={cx(styles.backForwardButtons, styles.previous)} onClick={this.onPreviousClick}>\n                <Button aria-label=\"To advanced tutorials\" icon=\"angle-left\" variant=\"secondary\" />\n              </div>\n            )}\n            <div className={styles.content}>\n              <Step step={step} />\n            </div>\n            {currentStep < steps.length - 1 && (\n              <div className={cx(styles.backForwardButtons, styles.forward)} onClick={this.onForwardClick}>\n                <Button aria-label=\"To basic tutorials\" icon=\"angle-right\" variant=\"secondary\" />\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nconst getStyles = stylesFactory(() => {\n  const { theme } = config;\n  return {\n    container: css`\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      // background: url(public/img/getting_started_bg_${theme.type}.svg) no-repeat;\n      background-size: cover;\n      padding: ${theme.spacing.xl} ${theme.spacing.md} 0;\n    `,\n    content: css`\n      label: content;\n      display: flex;\n      justify-content: center;\n\n      @media only screen and (max-width: ${theme.breakpoints.xxl}) {\n        margin-left: ${theme.spacing.lg};\n        justify-content: flex-start;\n      }\n    `,\n    header: css`\n      label: header;\n      margin-bottom: ${theme.spacing.lg};\n      display: flex;\n      flex-direction: column;\n\n      @media only screen and (min-width: ${theme.breakpoints.lg}) {\n        flex-direction: row;\n      }\n    `,\n    headerLogo: css`\n      height: 58px;\n      padding-right: ${theme.spacing.md};\n      display: none;\n\n      @media only screen and (min-width: ${theme.breakpoints.md}) {\n        display: block;\n      }\n    `,\n    heading: css`\n      label: heading;\n      margin-right: ${theme.spacing.lg};\n      margin-bottom: ${theme.spacing.lg};\n      flex-grow: 1;\n      display: flex;\n\n      @media only screen and (min-width: ${theme.breakpoints.md}) {\n        margin-bottom: 0;\n      }\n    `,\n    backForwardButtons: css`\n      position: absolute;\n      bottom: 50%;\n      top: 50%;\n      height: 50px;\n    `,\n    previous: css`\n      left: 10px;\n\n      @media only screen and (max-width: ${theme.breakpoints.md}) {\n        left: 0;\n      }\n    `,\n    forward: css`\n      right: 10px;\n\n      @media only screen and (max-width: ${theme.breakpoints.md}) {\n        right: 0;\n      }\n    `,\n    dismiss: css`\n      display: flex;\n      justify-content: flex-end;\n      cursor: pointer;\n      text-decoration: underline;\n      margin-right: ${theme.spacing.md};\n      margin-bottom: ${theme.spacing.sm};\n    `,\n    loading: css`\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n    `,\n    loadingText: css`\n      margin-right: ${theme.spacing.sm};\n    `,\n  };\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}