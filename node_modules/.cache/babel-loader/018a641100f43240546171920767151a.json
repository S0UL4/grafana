{"ast":null,"code":"var _Page$Contents, _h, _Tooltip, _div;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Tooltip, Icon, Button } from '@grafana/ui';\nimport { SlideDown } from 'app/core/components/Animations/SlideDown';\nimport Page from 'app/core/components/Page/Page';\nimport AddPermission from 'app/core/components/PermissionList/AddPermission';\nimport PermissionList from 'app/core/components/PermissionList/PermissionList';\nimport PermissionsInfo from 'app/core/components/PermissionList/PermissionsInfo';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { getFolderByUid, getFolderPermissions, updateFolderPermission, removeFolderPermission, addFolderPermission } from './state/actions';\nimport { getLoadingNav } from './state/navModel';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst mapStateToProps = (state, props) => {\n  const uid = props.match.params.uid;\n  return {\n    navModel: getNavModel(state.navIndex, `folder-permissions-${uid}`, getLoadingNav(1)),\n    folderUid: uid,\n    folder: state.folder\n  };\n};\n\nconst mapDispatchToProps = {\n  getFolderByUid,\n  getFolderPermissions,\n  updateFolderPermission,\n  removeFolderPermission,\n  addFolderPermission\n};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport class FolderPermissions extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onOpenAddPermissions\", () => {\n      this.setState({\n        isAdding: true\n      });\n    });\n\n    _defineProperty(this, \"onRemoveItem\", item => {\n      this.props.removeFolderPermission(item);\n    });\n\n    _defineProperty(this, \"onPermissionChanged\", (item, level) => {\n      this.props.updateFolderPermission(item, level);\n    });\n\n    _defineProperty(this, \"onAddPermission\", newItem => {\n      return this.props.addFolderPermission(newItem);\n    });\n\n    _defineProperty(this, \"onCancelAddPermission\", () => {\n      this.setState({\n        isAdding: false\n      });\n    });\n\n    this.state = {\n      isAdding: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.getFolderByUid(this.props.folderUid);\n    this.props.getFolderPermissions(this.props.folderUid);\n  }\n\n  render() {\n    const {\n      navModel,\n      folder\n    } = this.props;\n    const {\n      isAdding\n    } = this.state;\n\n    if (folder.id === 0) {\n      return /*#__PURE__*/_jsx(Page, {\n        navModel: navModel,\n        children: _Page$Contents || (_Page$Contents = /*#__PURE__*/_jsx(Page.Contents, {\n          isLoading: true,\n          children: /*#__PURE__*/_jsx(\"span\", {})\n        }))\n      });\n    }\n\n    const folderInfo = {\n      title: folder.title,\n      url: folder.url,\n      id: folder.id\n    };\n    return /*#__PURE__*/_jsx(Page, {\n      navModel: navModel,\n      children: /*#__PURE__*/_jsxs(Page.Contents, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"page-action-bar\",\n          children: [_h || (_h = /*#__PURE__*/_jsx(\"h3\", {\n            className: \"page-sub-heading\",\n            children: \"Folder Permissions\"\n          })), _Tooltip || (_Tooltip = /*#__PURE__*/_jsx(Tooltip, {\n            placement: \"auto\",\n            content: /*#__PURE__*/_jsx(PermissionsInfo, {}),\n            children: /*#__PURE__*/_jsx(Icon, {\n              className: \"icon--has-hover page-sub-heading-icon\",\n              name: \"question-circle\"\n            })\n          })), _div || (_div = /*#__PURE__*/_jsx(\"div\", {\n            className: \"page-action-bar__spacer\"\n          })), /*#__PURE__*/_jsx(Button, {\n            className: \"pull-right\",\n            onClick: this.onOpenAddPermissions,\n            disabled: isAdding,\n            children: \"Add Permission\"\n          })]\n        }), /*#__PURE__*/_jsx(SlideDown, {\n          in: isAdding,\n          children: /*#__PURE__*/_jsx(AddPermission, {\n            onAddPermission: this.onAddPermission,\n            onCancel: this.onCancelAddPermission\n          })\n        }), /*#__PURE__*/_jsx(PermissionList, {\n          items: folder.permissions,\n          onRemoveItem: this.onRemoveItem,\n          onPermissionChanged: this.onPermissionChanged,\n          isFetching: false,\n          folderInfo: folderInfo\n        })]\n      })\n    });\n  }\n\n}\nexport default connector(FolderPermissions);","map":{"version":3,"names":["React","PureComponent","connect","Tooltip","Icon","Button","SlideDown","Page","AddPermission","PermissionList","PermissionsInfo","getNavModel","getFolderByUid","getFolderPermissions","updateFolderPermission","removeFolderPermission","addFolderPermission","getLoadingNav","mapStateToProps","state","props","uid","match","params","navModel","navIndex","folderUid","folder","mapDispatchToProps","connector","FolderPermissions","constructor","setState","isAdding","item","level","newItem","componentDidMount","render","id","folderInfo","title","url","onOpenAddPermissions","onAddPermission","onCancelAddPermission","permissions","onRemoveItem","onPermissionChanged"],"sources":["/home/soula/grafana/public/app/features/folders/FolderPermissions.tsx"],"sourcesContent":["import React, { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { Tooltip, Icon, Button } from '@grafana/ui';\nimport { SlideDown } from 'app/core/components/Animations/SlideDown';\nimport Page from 'app/core/components/Page/Page';\nimport AddPermission from 'app/core/components/PermissionList/AddPermission';\nimport PermissionList from 'app/core/components/PermissionList/PermissionList';\nimport PermissionsInfo from 'app/core/components/PermissionList/PermissionsInfo';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { StoreState } from 'app/types';\nimport { DashboardAcl, PermissionLevel, NewDashboardAclItem } from 'app/types/acl';\n\nimport {\n  getFolderByUid,\n  getFolderPermissions,\n  updateFolderPermission,\n  removeFolderPermission,\n  addFolderPermission,\n} from './state/actions';\nimport { getLoadingNav } from './state/navModel';\n\nexport interface OwnProps extends GrafanaRouteComponentProps<{ uid: string }> {}\n\nconst mapStateToProps = (state: StoreState, props: OwnProps) => {\n  const uid = props.match.params.uid;\n  return {\n    navModel: getNavModel(state.navIndex, `folder-permissions-${uid}`, getLoadingNav(1)),\n    folderUid: uid,\n    folder: state.folder,\n  };\n};\n\nconst mapDispatchToProps = {\n  getFolderByUid,\n  getFolderPermissions,\n  updateFolderPermission,\n  removeFolderPermission,\n  addFolderPermission,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport type Props = OwnProps & ConnectedProps<typeof connector>;\n\nexport interface State {\n  isAdding: boolean;\n}\n\nexport class FolderPermissions extends PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      isAdding: false,\n    };\n  }\n\n  componentDidMount() {\n    this.props.getFolderByUid(this.props.folderUid);\n    this.props.getFolderPermissions(this.props.folderUid);\n  }\n\n  onOpenAddPermissions = () => {\n    this.setState({ isAdding: true });\n  };\n\n  onRemoveItem = (item: DashboardAcl) => {\n    this.props.removeFolderPermission(item);\n  };\n\n  onPermissionChanged = (item: DashboardAcl, level: PermissionLevel) => {\n    this.props.updateFolderPermission(item, level);\n  };\n\n  onAddPermission = (newItem: NewDashboardAclItem) => {\n    return this.props.addFolderPermission(newItem);\n  };\n\n  onCancelAddPermission = () => {\n    this.setState({ isAdding: false });\n  };\n\n  render() {\n    const { navModel, folder } = this.props;\n    const { isAdding } = this.state;\n\n    if (folder.id === 0) {\n      return (\n        <Page navModel={navModel}>\n          <Page.Contents isLoading={true}>\n            <span />\n          </Page.Contents>\n        </Page>\n      );\n    }\n\n    const folderInfo = { title: folder.title, url: folder.url, id: folder.id };\n\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents>\n          <div className=\"page-action-bar\">\n            <h3 className=\"page-sub-heading\">Folder Permissions</h3>\n            <Tooltip placement=\"auto\" content={<PermissionsInfo />}>\n              <Icon className=\"icon--has-hover page-sub-heading-icon\" name=\"question-circle\" />\n            </Tooltip>\n            <div className=\"page-action-bar__spacer\" />\n            <Button className=\"pull-right\" onClick={this.onOpenAddPermissions} disabled={isAdding}>\n              Add Permission\n            </Button>\n          </div>\n          <SlideDown in={isAdding}>\n            <AddPermission onAddPermission={this.onAddPermission} onCancel={this.onCancelAddPermission} />\n          </SlideDown>\n          <PermissionList\n            items={folder.permissions}\n            onRemoveItem={this.onRemoveItem}\n            onPermissionChanged={this.onPermissionChanged}\n            isFetching={false}\n            folderInfo={folderInfo}\n          />\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nexport default connector(FolderPermissions);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}