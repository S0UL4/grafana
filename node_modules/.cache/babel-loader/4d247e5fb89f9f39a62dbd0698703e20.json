{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from 'react';\nimport store from '../../store';\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport class LocalStorageValueProvider extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onSaveToStore\", value => {\n      const {\n        storageKey\n      } = this.props;\n\n      try {\n        store.setObject(storageKey, value);\n      } catch (error) {\n        console.error(error);\n      }\n\n      this.setState({\n        value\n      });\n    });\n\n    _defineProperty(this, \"onDeleteFromStore\", () => {\n      const {\n        storageKey,\n        defaultValue\n      } = this.props;\n\n      try {\n        store.delete(storageKey);\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.setState({\n        value: defaultValue\n      });\n    });\n\n    const {\n      storageKey: _storageKey,\n      defaultValue: _defaultValue\n    } = props;\n    this.state = {\n      value: store.getObject(_storageKey, _defaultValue)\n    };\n  }\n\n  render() {\n    const {\n      children\n    } = this.props;\n    const {\n      value\n    } = this.state;\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: children(value, this.onSaveToStore, this.onDeleteFromStore)\n    });\n  }\n\n}","map":{"version":3,"names":["React","PureComponent","store","LocalStorageValueProvider","constructor","props","value","storageKey","setObject","error","console","setState","defaultValue","delete","log","state","getObject","render","children","onSaveToStore","onDeleteFromStore"],"sources":["/home/soula/grafana/public/app/core/components/LocalStorageValueProvider/LocalStorageValueProvider.tsx"],"sourcesContent":["import React, { PureComponent } from 'react';\n\nimport store from '../../store';\n\nexport interface Props<T> {\n  storageKey: string;\n  defaultValue: T;\n  children: (value: T, onSaveToStore: (value: T) => void, onDeleteFromStore: () => void) => React.ReactNode;\n}\n\ninterface State<T> {\n  value: T;\n}\n\nexport class LocalStorageValueProvider<T> extends PureComponent<Props<T>, State<T>> {\n  constructor(props: Props<T>) {\n    super(props);\n\n    const { storageKey, defaultValue } = props;\n\n    this.state = {\n      value: store.getObject(storageKey, defaultValue),\n    };\n  }\n\n  onSaveToStore = (value: T) => {\n    const { storageKey } = this.props;\n    try {\n      store.setObject(storageKey, value);\n    } catch (error) {\n      console.error(error);\n    }\n    this.setState({ value });\n  };\n\n  onDeleteFromStore = () => {\n    const { storageKey, defaultValue } = this.props;\n    try {\n      store.delete(storageKey);\n    } catch (error) {\n      console.log(error);\n    }\n    this.setState({ value: defaultValue });\n  };\n\n  render() {\n    const { children } = this.props;\n    const { value } = this.state;\n\n    return <>{children(value, this.onSaveToStore, this.onDeleteFromStore)}</>;\n  }\n}\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AAEA,OAAOC,KAAP,MAAkB,aAAlB;;;AAYA,OAAO,MAAMC,yBAAN,SAA2CF,aAA3C,CAA6E;EAClFG,WAAW,CAACC,KAAD,EAAkB;IAC3B,MAAMA,KAAN;;IAD2B,uCAUZC,KAAD,IAAc;MAC5B,MAAM;QAAEC;MAAF,IAAiB,KAAKF,KAA5B;;MACA,IAAI;QACFH,KAAK,CAACM,SAAN,CAAgBD,UAAhB,EAA4BD,KAA5B;MACD,CAFD,CAEE,OAAOG,KAAP,EAAc;QACdC,OAAO,CAACD,KAAR,CAAcA,KAAd;MACD;;MACD,KAAKE,QAAL,CAAc;QAAEL;MAAF,CAAd;IACD,CAlB4B;;IAAA,2CAoBT,MAAM;MACxB,MAAM;QAAEC,UAAF;QAAcK;MAAd,IAA+B,KAAKP,KAA1C;;MACA,IAAI;QACFH,KAAK,CAACW,MAAN,CAAaN,UAAb;MACD,CAFD,CAEE,OAAOE,KAAP,EAAc;QACdC,OAAO,CAACI,GAAR,CAAYL,KAAZ;MACD;;MACD,KAAKE,QAAL,CAAc;QAAEL,KAAK,EAAEM;MAAT,CAAd;IACD,CA5B4B;;IAG3B,MAAM;MAAEL,UAAU,EAAVA,WAAF;MAAcK,YAAY,EAAZA;IAAd,IAA+BP,KAArC;IAEA,KAAKU,KAAL,GAAa;MACXT,KAAK,EAAEJ,KAAK,CAACc,SAAN,CAAgBT,WAAhB,EAA4BK,aAA5B;IADI,CAAb;EAGD;;EAsBDK,MAAM,GAAG;IACP,MAAM;MAAEC;IAAF,IAAe,KAAKb,KAA1B;IACA,MAAM;MAAEC;IAAF,IAAY,KAAKS,KAAvB;IAEA,oBAAO;MAAA,UAAGG,QAAQ,CAACZ,KAAD,EAAQ,KAAKa,aAAb,EAA4B,KAAKC,iBAAjC;IAAX,EAAP;EACD;;AApCiF"},"metadata":{},"sourceType":"module"}