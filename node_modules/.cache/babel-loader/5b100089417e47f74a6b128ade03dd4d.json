{"ast":null,"code":"var _Icon;\n\nimport { css } from '@emotion/css';\nimport React, { useCallback, useRef, useState } from 'react';\nimport SVG from 'react-inlinesvg';\nimport { usePopper } from 'react-popper';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Icon, Portal, TagList, useTheme2 } from '@grafana/ui';\nimport { backendSrv } from 'app/core/services/backend_srv';\nimport { SearchCardExpanded } from './SearchCardExpanded';\nimport { SearchCheckbox } from './SearchCheckbox';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst DELAY_BEFORE_EXPANDING = 500;\nexport function getThumbnailURL(uid, isLight) {\n  return `/api/dashboards/uid/${uid}/img/thumb/${isLight ? 'light' : 'dark'}`;\n}\nexport function SearchCard({\n  editable,\n  item,\n  onTagSelected,\n  onToggleChecked\n}) {\n  const [hasImage, setHasImage] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState(null);\n  const [showExpandedView, setShowExpandedView] = useState(false);\n  const timeout = useRef(null); // Popper specific logic\n\n  const offsetCallback = useCallback(({\n    placement,\n    reference,\n    popper\n  }) => {\n    let result = [0, 0];\n\n    if (placement === 'bottom' || placement === 'top') {\n      result = [0, -(reference.height + popper.height) / 2];\n    } else if (placement === 'left' || placement === 'right') {\n      result = [-(reference.width + popper.width) / 2, 0];\n    }\n\n    return result;\n  }, []);\n  const [markerElement, setMarkerElement] = React.useState(null);\n  const [popperElement, setPopperElement] = React.useState(null);\n  const {\n    styles: popperStyles,\n    attributes\n  } = usePopper(markerElement, popperElement, {\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: offsetCallback\n      }\n    }]\n  });\n  const theme = useTheme2();\n  const imageSrc = getThumbnailURL(item.uid, theme.isLight);\n  const styles = getStyles(theme, markerElement === null || markerElement === void 0 ? void 0 : markerElement.getBoundingClientRect().width, popperElement === null || popperElement === void 0 ? void 0 : popperElement.getBoundingClientRect().width);\n\n  const onShowExpandedView = async () => {\n    setShowExpandedView(true);\n\n    if (item.uid && !lastUpdated) {\n      const dashboard = await backendSrv.getDashboardByUid(item.uid);\n      const {\n        updated\n      } = dashboard.meta;\n\n      if (updated) {\n        setLastUpdated(new Date(updated).toLocaleString());\n      } else {\n        setLastUpdated(null);\n      }\n    }\n  };\n\n  const onMouseEnter = () => {\n    timeout.current = window.setTimeout(onShowExpandedView, DELAY_BEFORE_EXPANDING);\n  };\n\n  const onMouseMove = () => {\n    if (timeout.current) {\n      window.clearTimeout(timeout.current);\n    }\n\n    timeout.current = window.setTimeout(onShowExpandedView, DELAY_BEFORE_EXPANDING);\n  };\n\n  const onMouseLeave = () => {\n    if (timeout.current) {\n      window.clearTimeout(timeout.current);\n    }\n\n    setShowExpandedView(false);\n  };\n\n  const onCheckboxClick = ev => {\n    ev.stopPropagation();\n    ev.preventDefault();\n    onToggleChecked === null || onToggleChecked === void 0 ? void 0 : onToggleChecked(item);\n  };\n\n  const onTagClick = (tag, ev) => {\n    ev.stopPropagation();\n    ev.preventDefault();\n    onTagSelected === null || onTagSelected === void 0 ? void 0 : onTagSelected(tag);\n  };\n\n  return /*#__PURE__*/_jsxs(\"a\", {\n    \"data-testid\": selectors.components.Search.dashboardCard(item.title),\n    className: styles.card,\n    href: item.url,\n    ref: ref => setMarkerElement(ref),\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseMove: onMouseMove,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.imageContainer,\n      children: [/*#__PURE__*/_jsx(SearchCheckbox, {\n        className: styles.checkbox,\n        \"aria-label\": `Select dashboard ${item.title}`,\n        editable: editable,\n        checked: item.checked,\n        onClick: onCheckboxClick\n      }), hasImage ? /*#__PURE__*/_jsx(\"img\", {\n        loading: \"lazy\",\n        className: styles.image,\n        src: imageSrc,\n        onError: () => setHasImage(false)\n      }) : /*#__PURE__*/_jsx(\"div\", {\n        className: styles.imagePlaceholder,\n        children: item.icon ? /*#__PURE__*/_jsx(SVG, {\n          src: item.icon,\n          width: 36,\n          height: 36,\n          title: item.title\n        }) : _Icon || (_Icon = /*#__PURE__*/_jsx(Icon, {\n          name: \"apps\",\n          size: \"xl\"\n        }))\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.info,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.title,\n        children: item.title\n      }), /*#__PURE__*/_jsx(TagList, {\n        displayMax: 1,\n        tags: item.tags,\n        onClick: onTagClick\n      })]\n    }), showExpandedView && /*#__PURE__*/_jsx(Portal, {\n      className: styles.portal,\n      children: /*#__PURE__*/_jsx(\"div\", Object.assign({\n        ref: setPopperElement,\n        style: popperStyles.popper\n      }, attributes.popper, {\n        children: /*#__PURE__*/_jsx(SearchCardExpanded, {\n          className: styles.expandedView,\n          imageHeight: 240,\n          imageWidth: 320,\n          item: item,\n          lastUpdated: lastUpdated\n        })\n      }))\n    })]\n  }, item.uid);\n}\n\nconst getStyles = (theme, markerWidth = 0, popperWidth = 0) => {\n  const IMAGE_HORIZONTAL_MARGIN = theme.spacing(4);\n  return {\n    card: css`\n      background-color: ${theme.colors.background.secondary};\n      border: 1px solid ${theme.colors.border.medium};\n      border-radius: 4px;\n      display: flex;\n      flex-direction: column;\n\n      &:hover {\n        background-color: ${theme.colors.emphasize(theme.colors.background.secondary, 0.03)};\n      }\n    `,\n    checkbox: css`\n      left: 0;\n      margin: ${theme.spacing(1)};\n      position: absolute;\n      top: 0;\n    `,\n    expandedView: css`\n      @keyframes expand {\n        0% {\n          transform: scale(${markerWidth / popperWidth});\n        }\n        100% {\n          transform: scale(1);\n        }\n      }\n\n      animation: expand ${theme.transitions.duration.shortest}ms ease-in-out 0s 1 normal;\n      background-color: ${theme.colors.emphasize(theme.colors.background.secondary, 0.03)};\n    `,\n    image: css`\n      aspect-ratio: 4 / 3;\n      box-shadow: ${theme.shadows.z1};\n      margin: ${theme.spacing(1)} ${IMAGE_HORIZONTAL_MARGIN} 0;\n      width: calc(100% - (2 * ${IMAGE_HORIZONTAL_MARGIN}));\n    `,\n    imageContainer: css`\n      flex: 1;\n      position: relative;\n\n      &:after {\n        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);\n        bottom: 0;\n        content: '';\n        left: 0;\n        margin: ${theme.spacing(1)} ${IMAGE_HORIZONTAL_MARGIN} 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n      }\n    `,\n    imagePlaceholder: css`\n      align-items: center;\n      aspect-ratio: 4 / 3;\n      color: ${theme.colors.text.secondary};\n      display: flex;\n      justify-content: center;\n      margin: ${theme.spacing(1)} ${IMAGE_HORIZONTAL_MARGIN} 0;\n      width: calc(100% - (2 * ${IMAGE_HORIZONTAL_MARGIN}));\n    `,\n    info: css`\n      align-items: center;\n      background-color: ${theme.colors.background.canvas};\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      display: flex;\n      height: ${theme.spacing(7)};\n      gap: ${theme.spacing(1)};\n      padding: 0 ${theme.spacing(2)};\n      z-index: 1;\n    `,\n    portal: css`\n      pointer-events: none;\n    `,\n    title: css`\n      display: block;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    `\n  };\n};","map":{"version":3,"names":["css","React","useCallback","useRef","useState","SVG","usePopper","selectors","Icon","Portal","TagList","useTheme2","backendSrv","SearchCardExpanded","SearchCheckbox","DELAY_BEFORE_EXPANDING","getThumbnailURL","uid","isLight","SearchCard","editable","item","onTagSelected","onToggleChecked","hasImage","setHasImage","lastUpdated","setLastUpdated","showExpandedView","setShowExpandedView","timeout","offsetCallback","placement","reference","popper","result","height","width","markerElement","setMarkerElement","popperElement","setPopperElement","styles","popperStyles","attributes","modifiers","name","options","offset","theme","imageSrc","getStyles","getBoundingClientRect","onShowExpandedView","dashboard","getDashboardByUid","updated","meta","Date","toLocaleString","onMouseEnter","current","window","setTimeout","onMouseMove","clearTimeout","onMouseLeave","onCheckboxClick","ev","stopPropagation","preventDefault","onTagClick","tag","components","Search","dashboardCard","title","card","url","ref","imageContainer","checkbox","checked","image","imagePlaceholder","icon","info","tags","portal","expandedView","markerWidth","popperWidth","IMAGE_HORIZONTAL_MARGIN","spacing","colors","background","secondary","border","medium","emphasize","transitions","duration","shortest","shadows","z1","text","canvas"],"sources":["/home/soula/grafana/public/app/features/search/components/SearchCard.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useCallback, useRef, useState } from 'react';\nimport SVG from 'react-inlinesvg';\nimport { usePopper } from 'react-popper';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Icon, Portal, TagList, useTheme2 } from '@grafana/ui';\nimport { backendSrv } from 'app/core/services/backend_srv';\n\nimport { DashboardSectionItem, OnToggleChecked } from '../types';\n\nimport { SearchCardExpanded } from './SearchCardExpanded';\nimport { SearchCheckbox } from './SearchCheckbox';\n\nconst DELAY_BEFORE_EXPANDING = 500;\n\nexport interface Props {\n  editable?: boolean;\n  item: DashboardSectionItem;\n  onTagSelected?: (name: string) => any;\n  onToggleChecked?: OnToggleChecked;\n}\n\nexport function getThumbnailURL(uid: string, isLight?: boolean) {\n  return `/api/dashboards/uid/${uid}/img/thumb/${isLight ? 'light' : 'dark'}`;\n}\n\nexport function SearchCard({ editable, item, onTagSelected, onToggleChecked }: Props) {\n  const [hasImage, setHasImage] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState<string | null>(null);\n  const [showExpandedView, setShowExpandedView] = useState(false);\n  const timeout = useRef<number | null>(null);\n\n  // Popper specific logic\n  const offsetCallback = useCallback(({ placement, reference, popper }) => {\n    let result: [number, number] = [0, 0];\n    if (placement === 'bottom' || placement === 'top') {\n      result = [0, -(reference.height + popper.height) / 2];\n    } else if (placement === 'left' || placement === 'right') {\n      result = [-(reference.width + popper.width) / 2, 0];\n    }\n    return result;\n  }, []);\n  const [markerElement, setMarkerElement] = React.useState<HTMLDivElement | null>(null);\n  const [popperElement, setPopperElement] = React.useState<HTMLDivElement | null>(null);\n  const { styles: popperStyles, attributes } = usePopper(markerElement, popperElement, {\n    modifiers: [\n      {\n        name: 'offset',\n        options: {\n          offset: offsetCallback,\n        },\n      },\n    ],\n  });\n\n  const theme = useTheme2();\n  const imageSrc = getThumbnailURL(item.uid!, theme.isLight);\n  const styles = getStyles(\n    theme,\n    markerElement?.getBoundingClientRect().width,\n    popperElement?.getBoundingClientRect().width\n  );\n\n  const onShowExpandedView = async () => {\n    setShowExpandedView(true);\n    if (item.uid && !lastUpdated) {\n      const dashboard = await backendSrv.getDashboardByUid(item.uid);\n      const { updated } = dashboard.meta;\n      if (updated) {\n        setLastUpdated(new Date(updated).toLocaleString());\n      } else {\n        setLastUpdated(null);\n      }\n    }\n  };\n\n  const onMouseEnter = () => {\n    timeout.current = window.setTimeout(onShowExpandedView, DELAY_BEFORE_EXPANDING);\n  };\n\n  const onMouseMove = () => {\n    if (timeout.current) {\n      window.clearTimeout(timeout.current);\n    }\n    timeout.current = window.setTimeout(onShowExpandedView, DELAY_BEFORE_EXPANDING);\n  };\n\n  const onMouseLeave = () => {\n    if (timeout.current) {\n      window.clearTimeout(timeout.current);\n    }\n    setShowExpandedView(false);\n  };\n\n  const onCheckboxClick = (ev: React.MouseEvent) => {\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    onToggleChecked?.(item);\n  };\n\n  const onTagClick = (tag: string, ev: React.MouseEvent) => {\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    onTagSelected?.(tag);\n  };\n\n  return (\n    <a\n      data-testid={selectors.components.Search.dashboardCard(item.title)}\n      className={styles.card}\n      key={item.uid}\n      href={item.url}\n      ref={(ref) => setMarkerElement(ref as unknown as HTMLDivElement)}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      onMouseMove={onMouseMove}\n    >\n      <div className={styles.imageContainer}>\n        <SearchCheckbox\n          className={styles.checkbox}\n          aria-label={`Select dashboard ${item.title}`}\n          editable={editable}\n          checked={item.checked}\n          onClick={onCheckboxClick}\n        />\n        {hasImage ? (\n          <img loading=\"lazy\" className={styles.image} src={imageSrc} onError={() => setHasImage(false)} />\n        ) : (\n          <div className={styles.imagePlaceholder}>\n            {item.icon ? (\n              <SVG src={item.icon} width={36} height={36} title={item.title} />\n            ) : (\n              <Icon name=\"apps\" size=\"xl\" />\n            )}\n          </div>\n        )}\n      </div>\n      <div className={styles.info}>\n        <div className={styles.title}>{item.title}</div>\n        <TagList displayMax={1} tags={item.tags} onClick={onTagClick} />\n      </div>\n      {showExpandedView && (\n        <Portal className={styles.portal}>\n          <div ref={setPopperElement} style={popperStyles.popper} {...attributes.popper}>\n            <SearchCardExpanded\n              className={styles.expandedView}\n              imageHeight={240}\n              imageWidth={320}\n              item={item}\n              lastUpdated={lastUpdated}\n            />\n          </div>\n        </Portal>\n      )}\n    </a>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2, markerWidth = 0, popperWidth = 0) => {\n  const IMAGE_HORIZONTAL_MARGIN = theme.spacing(4);\n\n  return {\n    card: css`\n      background-color: ${theme.colors.background.secondary};\n      border: 1px solid ${theme.colors.border.medium};\n      border-radius: 4px;\n      display: flex;\n      flex-direction: column;\n\n      &:hover {\n        background-color: ${theme.colors.emphasize(theme.colors.background.secondary, 0.03)};\n      }\n    `,\n    checkbox: css`\n      left: 0;\n      margin: ${theme.spacing(1)};\n      position: absolute;\n      top: 0;\n    `,\n    expandedView: css`\n      @keyframes expand {\n        0% {\n          transform: scale(${markerWidth / popperWidth});\n        }\n        100% {\n          transform: scale(1);\n        }\n      }\n\n      animation: expand ${theme.transitions.duration.shortest}ms ease-in-out 0s 1 normal;\n      background-color: ${theme.colors.emphasize(theme.colors.background.secondary, 0.03)};\n    `,\n    image: css`\n      aspect-ratio: 4 / 3;\n      box-shadow: ${theme.shadows.z1};\n      margin: ${theme.spacing(1)} ${IMAGE_HORIZONTAL_MARGIN} 0;\n      width: calc(100% - (2 * ${IMAGE_HORIZONTAL_MARGIN}));\n    `,\n    imageContainer: css`\n      flex: 1;\n      position: relative;\n\n      &:after {\n        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);\n        bottom: 0;\n        content: '';\n        left: 0;\n        margin: ${theme.spacing(1)} ${IMAGE_HORIZONTAL_MARGIN} 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n      }\n    `,\n    imagePlaceholder: css`\n      align-items: center;\n      aspect-ratio: 4 / 3;\n      color: ${theme.colors.text.secondary};\n      display: flex;\n      justify-content: center;\n      margin: ${theme.spacing(1)} ${IMAGE_HORIZONTAL_MARGIN} 0;\n      width: calc(100% - (2 * ${IMAGE_HORIZONTAL_MARGIN}));\n    `,\n    info: css`\n      align-items: center;\n      background-color: ${theme.colors.background.canvas};\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      display: flex;\n      height: ${theme.spacing(7)};\n      gap: ${theme.spacing(1)};\n      padding: 0 ${theme.spacing(2)};\n      z-index: 1;\n    `,\n    portal: css`\n      pointer-events: none;\n    `,\n    title: css`\n      display: block;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    `,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}