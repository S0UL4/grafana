{"ast":null,"code":"var _VariableSectionHeade;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from 'react';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { VerticalGroup } from '@grafana/ui';\nimport { connectWithStore } from 'app/core/utils/connectWithReduxStore';\nimport { SelectionOptionsEditor } from '../editor/SelectionOptionsEditor';\nimport { VariableSectionHeader } from '../editor/VariableSectionHeader';\nimport { VariableTextAreaField } from '../editor/VariableTextAreaField';\nimport { changeVariableMultiValue } from '../state/actions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nclass CustomVariableEditorUnconnected extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onChange\", event => {\n      this.props.onPropChange({\n        propName: 'query',\n        propValue: event.currentTarget.value\n      });\n    });\n\n    _defineProperty(this, \"onSelectionOptionsChange\", async ({\n      propName,\n      propValue\n    }) => {\n      this.props.onPropChange({\n        propName,\n        propValue,\n        updateOptions: true\n      });\n    });\n\n    _defineProperty(this, \"onBlur\", event => {\n      this.props.onPropChange({\n        propName: 'query',\n        propValue: event.currentTarget.value,\n        updateOptions: true\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(VerticalGroup, {\n      spacing: \"xs\",\n      children: [_VariableSectionHeade || (_VariableSectionHeade = /*#__PURE__*/_jsx(VariableSectionHeader, {\n        name: \"Custom options\"\n      })), /*#__PURE__*/_jsxs(VerticalGroup, {\n        spacing: \"md\",\n        children: [/*#__PURE__*/_jsx(VerticalGroup, {\n          spacing: \"none\",\n          children: /*#__PURE__*/_jsx(VariableTextAreaField, {\n            name: \"Values separated by comma\",\n            value: this.props.variable.query,\n            placeholder: \"1, 10, mykey : myvalue, myvalue, escaped\\\\,value\",\n            onChange: this.onChange,\n            onBlur: this.onBlur,\n            required: true,\n            width: 50,\n            labelWidth: 27,\n            testId: selectors.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput\n          })\n        }), /*#__PURE__*/_jsx(SelectionOptionsEditor, {\n          variable: this.props.variable,\n          onPropChange: this.onSelectionOptionsChange,\n          onMultiChanged: this.props.changeVariableMultiValue\n        }), ' ']\n      })]\n    });\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => ({});\n\nconst mapDispatchToProps = {\n  changeVariableMultiValue\n};\nexport const CustomVariableEditor = connectWithStore(CustomVariableEditorUnconnected, mapStateToProps, mapDispatchToProps);","map":{"version":3,"names":["React","PureComponent","selectors","VerticalGroup","connectWithStore","SelectionOptionsEditor","VariableSectionHeader","VariableTextAreaField","changeVariableMultiValue","CustomVariableEditorUnconnected","event","props","onPropChange","propName","propValue","currentTarget","value","updateOptions","render","variable","query","onChange","onBlur","pages","Dashboard","Settings","Variables","Edit","CustomVariable","customValueInput","onSelectionOptionsChange","mapStateToProps","state","ownProps","mapDispatchToProps","CustomVariableEditor"],"sources":["/home/soula/grafana/public/app/features/variables/custom/CustomVariableEditor.tsx"],"sourcesContent":["import React, { FormEvent, PureComponent } from 'react';\nimport { MapDispatchToProps, MapStateToProps } from 'react-redux';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { VerticalGroup } from '@grafana/ui';\nimport { connectWithStore } from 'app/core/utils/connectWithReduxStore';\nimport { StoreState } from 'app/types';\n\nimport { SelectionOptionsEditor } from '../editor/SelectionOptionsEditor';\nimport { VariableSectionHeader } from '../editor/VariableSectionHeader';\nimport { VariableTextAreaField } from '../editor/VariableTextAreaField';\nimport { OnPropChangeArguments, VariableEditorProps } from '../editor/types';\nimport { changeVariableMultiValue } from '../state/actions';\nimport { CustomVariableModel, VariableWithMultiSupport } from '../types';\n\ninterface OwnProps extends VariableEditorProps<CustomVariableModel> {}\n\ninterface ConnectedProps {}\n\ninterface DispatchProps {\n  changeVariableMultiValue: typeof changeVariableMultiValue;\n}\n\nexport type Props = OwnProps & ConnectedProps & DispatchProps;\n\nclass CustomVariableEditorUnconnected extends PureComponent<Props> {\n  onChange = (event: FormEvent<HTMLTextAreaElement>) => {\n    this.props.onPropChange({\n      propName: 'query',\n      propValue: event.currentTarget.value,\n    });\n  };\n\n  onSelectionOptionsChange = async ({ propName, propValue }: OnPropChangeArguments<VariableWithMultiSupport>) => {\n    this.props.onPropChange({ propName, propValue, updateOptions: true });\n  };\n\n  onBlur = (event: FormEvent<HTMLTextAreaElement>) => {\n    this.props.onPropChange({\n      propName: 'query',\n      propValue: event.currentTarget.value,\n      updateOptions: true,\n    });\n  };\n\n  render() {\n    return (\n      <VerticalGroup spacing=\"xs\">\n        <VariableSectionHeader name=\"Custom options\" />\n        <VerticalGroup spacing=\"md\">\n          <VerticalGroup spacing=\"none\">\n            <VariableTextAreaField\n              name=\"Values separated by comma\"\n              value={this.props.variable.query}\n              placeholder=\"1, 10, mykey : myvalue, myvalue, escaped\\,value\"\n              onChange={this.onChange}\n              onBlur={this.onBlur}\n              required\n              width={50}\n              labelWidth={27}\n              testId={selectors.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}\n            />\n          </VerticalGroup>\n          <SelectionOptionsEditor\n            variable={this.props.variable}\n            onPropChange={this.onSelectionOptionsChange}\n            onMultiChanged={this.props.changeVariableMultiValue}\n          />{' '}\n        </VerticalGroup>\n      </VerticalGroup>\n    );\n  }\n}\n\nconst mapStateToProps: MapStateToProps<ConnectedProps, OwnProps, StoreState> = (state, ownProps) => ({});\n\nconst mapDispatchToProps: MapDispatchToProps<DispatchProps, OwnProps> = {\n  changeVariableMultiValue,\n};\n\nexport const CustomVariableEditor = connectWithStore(\n  CustomVariableEditorUnconnected,\n  mapStateToProps,\n  mapDispatchToProps\n);\n"],"mappings":";;;;AAAA,OAAOA,KAAP,IAA2BC,aAA3B,QAAgD,OAAhD;AAGA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,aAAT,QAA8B,aAA9B;AACA,SAASC,gBAAT,QAAiC,sCAAjC;AAGA,SAASC,sBAAT,QAAuC,kCAAvC;AACA,SAASC,qBAAT,QAAsC,iCAAtC;AACA,SAASC,qBAAT,QAAsC,iCAAtC;AAEA,SAASC,wBAAT,QAAyC,kBAAzC;;;;AAaA,MAAMC,+BAAN,SAA8CR,aAA9C,CAAmE;EAAA;IAAA;;IAAA,kCACrDS,KAAD,IAA2C;MACpD,KAAKC,KAAL,CAAWC,YAAX,CAAwB;QACtBC,QAAQ,EAAE,OADY;QAEtBC,SAAS,EAAEJ,KAAK,CAACK,aAAN,CAAoBC;MAFT,CAAxB;IAID,CANgE;;IAAA,kDAQtC,OAAO;MAAEH,QAAF;MAAYC;IAAZ,CAAP,KAAoF;MAC7G,KAAKH,KAAL,CAAWC,YAAX,CAAwB;QAAEC,QAAF;QAAYC,SAAZ;QAAuBG,aAAa,EAAE;MAAtC,CAAxB;IACD,CAVgE;;IAAA,gCAYvDP,KAAD,IAA2C;MAClD,KAAKC,KAAL,CAAWC,YAAX,CAAwB;QACtBC,QAAQ,EAAE,OADY;QAEtBC,SAAS,EAAEJ,KAAK,CAACK,aAAN,CAAoBC,KAFT;QAGtBC,aAAa,EAAE;MAHO,CAAxB;IAKD,CAlBgE;EAAA;;EAoBjEC,MAAM,GAAG;IACP,oBACE,MAAC,aAAD;MAAe,OAAO,EAAC,IAAvB;MAAA,0EACE,KAAC,qBAAD;QAAuB,IAAI,EAAC;MAA5B,EADF,gBAEE,MAAC,aAAD;QAAe,OAAO,EAAC,IAAvB;QAAA,wBACE,KAAC,aAAD;UAAe,OAAO,EAAC,MAAvB;UAAA,uBACE,KAAC,qBAAD;YACE,IAAI,EAAC,2BADP;YAEE,KAAK,EAAE,KAAKP,KAAL,CAAWQ,QAAX,CAAoBC,KAF7B;YAGE,WAAW,EAAC,kDAHd;YAIE,QAAQ,EAAE,KAAKC,QAJjB;YAKE,MAAM,EAAE,KAAKC,MALf;YAME,QAAQ,MANV;YAOE,KAAK,EAAE,EAPT;YAQE,UAAU,EAAE,EARd;YASE,MAAM,EAAEpB,SAAS,CAACqB,KAAV,CAAgBC,SAAhB,CAA0BC,QAA1B,CAAmCC,SAAnC,CAA6CC,IAA7C,CAAkDC,cAAlD,CAAiEC;UAT3E;QADF,EADF,eAcE,KAAC,sBAAD;UACE,QAAQ,EAAE,KAAKlB,KAAL,CAAWQ,QADvB;UAEE,YAAY,EAAE,KAAKW,wBAFrB;UAGE,cAAc,EAAE,KAAKnB,KAAL,CAAWH;QAH7B,EAdF,EAkBK,GAlBL;MAAA,EAFF;IAAA,EADF;EAyBD;;AA9CgE;;AAiDnE,MAAMuB,eAAsE,GAAG,CAACC,KAAD,EAAQC,QAAR,MAAsB,EAAtB,CAA/E;;AAEA,MAAMC,kBAA+D,GAAG;EACtE1B;AADsE,CAAxE;AAIA,OAAO,MAAM2B,oBAAoB,GAAG/B,gBAAgB,CAClDK,+BADkD,EAElDsB,eAFkD,EAGlDG,kBAHkD,CAA7C"},"metadata":{},"sourceType":"module"}