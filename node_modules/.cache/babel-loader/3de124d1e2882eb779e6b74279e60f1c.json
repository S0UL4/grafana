{"ast":null,"code":"var _thead, _Icon, _Icon2;\n\nimport React, { useState } from 'react';\nimport { arrayUtils } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { DeleteButton, Icon, IconButton, VerticalGroup } from '@grafana/ui';\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\nimport { ListNewButton } from '../DashboardSettings/ListNewButton';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const AnnotationSettingsList = ({\n  dashboard,\n  onNew,\n  onEdit\n}) => {\n  const [annotations, updateAnnotations] = useState(dashboard.annotations.list);\n\n  const onMove = (idx, direction) => {\n    dashboard.annotations.list = arrayUtils.moveItemImmutably(annotations, idx, idx + direction);\n    updateAnnotations(dashboard.annotations.list);\n  };\n\n  const onDelete = idx => {\n    dashboard.annotations.list = [...annotations.slice(0, idx), ...annotations.slice(idx + 1)];\n    updateAnnotations(dashboard.annotations.list);\n  };\n\n  const showEmptyListCTA = annotations.length === 0 || annotations.length === 1 && annotations[0].builtIn;\n  const dataSourceSrv = getDataSourceSrv();\n  return /*#__PURE__*/_jsxs(VerticalGroup, {\n    children: [annotations.length > 0 && /*#__PURE__*/_jsxs(\"table\", {\n      className: \"filter-table filter-table--hover\",\n      children: [_thead || (_thead = /*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(\"th\", {\n            children: \"Query name\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Data source\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            colSpan: 3\n          })]\n        })\n      })), /*#__PURE__*/_jsx(\"tbody\", {\n        children: dashboard.annotations.list.map((annotation, idx) => {\n          var _dataSourceSrv$getIns, _annotation$datasourc;\n\n          return /*#__PURE__*/_jsxs(\"tr\", {\n            children: [annotation.builtIn ? /*#__PURE__*/_jsxs(\"td\", {\n              style: {\n                width: '90%'\n              },\n              className: \"pointer\",\n              onClick: () => onEdit(idx),\n              children: [_Icon || (_Icon = /*#__PURE__*/_jsx(Icon, {\n                name: \"comment-alt\"\n              })), \" \\xA0 \", /*#__PURE__*/_jsxs(\"em\", {\n                className: \"muted\",\n                children: [annotation.name, \" (Built-in)\"]\n              })]\n            }) : /*#__PURE__*/_jsxs(\"td\", {\n              className: \"pointer\",\n              onClick: () => onEdit(idx),\n              children: [_Icon2 || (_Icon2 = /*#__PURE__*/_jsx(Icon, {\n                name: \"comment-alt\"\n              })), \" \\xA0 \", annotation.name]\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"pointer\",\n              onClick: () => onEdit(idx),\n              children: ((_dataSourceSrv$getIns = dataSourceSrv.getInstanceSettings(annotation.datasource)) === null || _dataSourceSrv$getIns === void 0 ? void 0 : _dataSourceSrv$getIns.name) || ((_annotation$datasourc = annotation.datasource) === null || _annotation$datasourc === void 0 ? void 0 : _annotation$datasourc.uid)\n            }), /*#__PURE__*/_jsx(\"td\", {\n              style: {\n                width: '1%'\n              },\n              children: idx !== 0 && /*#__PURE__*/_jsx(IconButton, {\n                name: \"arrow-up\",\n                \"aria-label\": \"arrow-up\",\n                onClick: () => onMove(idx, -1)\n              })\n            }), /*#__PURE__*/_jsx(\"td\", {\n              style: {\n                width: '1%'\n              },\n              children: dashboard.annotations.list.length > 1 && idx !== dashboard.annotations.list.length - 1 ? /*#__PURE__*/_jsx(IconButton, {\n                name: \"arrow-down\",\n                \"aria-label\": \"arrow-down\",\n                onClick: () => onMove(idx, 1)\n              }) : null\n            }), /*#__PURE__*/_jsx(\"td\", {\n              style: {\n                width: '1%'\n              },\n              children: /*#__PURE__*/_jsx(DeleteButton, {\n                size: \"sm\",\n                onConfirm: () => onDelete(idx),\n                \"aria-label\": `Delete query with title \"${annotation.name}\"`\n              })\n            })]\n          }, `${annotation.name}-${idx}`);\n        })\n      })]\n    }), showEmptyListCTA && /*#__PURE__*/_jsx(EmptyListCTA, {\n      onClick: onNew,\n      title: \"There are no custom annotation queries added yet\",\n      buttonIcon: \"comment-alt\",\n      buttonTitle: \"Add annotation query\",\n      infoBoxTitle: \"What are annotation queries?\",\n      infoBox: {\n        __html: `<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines\n          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for\n          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or\n          drag region). These will be stored in Grafana's annotation database.\n        </p>\n        Checkout the\n        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'\n          >Annotations documentation</a\n        >\n        for more information.`\n      }\n    }), !showEmptyListCTA && /*#__PURE__*/_jsx(ListNewButton, {\n      onClick: onNew,\n      children: \"New query\"\n    })]\n  });\n};","map":{"version":3,"names":["React","useState","arrayUtils","getDataSourceSrv","DeleteButton","Icon","IconButton","VerticalGroup","EmptyListCTA","ListNewButton","AnnotationSettingsList","dashboard","onNew","onEdit","annotations","updateAnnotations","list","onMove","idx","direction","moveItemImmutably","onDelete","slice","showEmptyListCTA","length","builtIn","dataSourceSrv","map","annotation","width","name","getInstanceSettings","datasource","uid","__html"],"sources":["/home/soula/grafana/public/app/features/dashboard/components/AnnotationSettings/AnnotationSettingsList.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\nimport { arrayUtils } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { DeleteButton, Icon, IconButton, VerticalGroup } from '@grafana/ui';\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\n\nimport { DashboardModel } from '../../state/DashboardModel';\nimport { ListNewButton } from '../DashboardSettings/ListNewButton';\n\ntype Props = {\n  dashboard: DashboardModel;\n  onNew: () => void;\n  onEdit: (idx: number) => void;\n};\n\nexport const AnnotationSettingsList: React.FC<Props> = ({ dashboard, onNew, onEdit }) => {\n  const [annotations, updateAnnotations] = useState(dashboard.annotations.list);\n\n  const onMove = (idx: number, direction: number) => {\n    dashboard.annotations.list = arrayUtils.moveItemImmutably(annotations, idx, idx + direction);\n    updateAnnotations(dashboard.annotations.list);\n  };\n\n  const onDelete = (idx: number) => {\n    dashboard.annotations.list = [...annotations.slice(0, idx), ...annotations.slice(idx + 1)];\n    updateAnnotations(dashboard.annotations.list);\n  };\n\n  const showEmptyListCTA = annotations.length === 0 || (annotations.length === 1 && annotations[0].builtIn);\n\n  const dataSourceSrv = getDataSourceSrv();\n  return (\n    <VerticalGroup>\n      {annotations.length > 0 && (\n        <table className=\"filter-table filter-table--hover\">\n          <thead>\n            <tr>\n              <th>Query name</th>\n              <th>Data source</th>\n              <th colSpan={3}></th>\n            </tr>\n          </thead>\n          <tbody>\n            {dashboard.annotations.list.map((annotation, idx) => (\n              <tr key={`${annotation.name}-${idx}`}>\n                {annotation.builtIn ? (\n                  <td style={{ width: '90%' }} className=\"pointer\" onClick={() => onEdit(idx)}>\n                    <Icon name=\"comment-alt\" /> &nbsp; <em className=\"muted\">{annotation.name} (Built-in)</em>\n                  </td>\n                ) : (\n                  <td className=\"pointer\" onClick={() => onEdit(idx)}>\n                    <Icon name=\"comment-alt\" /> &nbsp; {annotation.name}\n                  </td>\n                )}\n                <td className=\"pointer\" onClick={() => onEdit(idx)}>\n                  {dataSourceSrv.getInstanceSettings(annotation.datasource)?.name || annotation.datasource?.uid}\n                </td>\n                <td style={{ width: '1%' }}>\n                  {idx !== 0 && <IconButton name=\"arrow-up\" aria-label=\"arrow-up\" onClick={() => onMove(idx, -1)} />}\n                </td>\n                <td style={{ width: '1%' }}>\n                  {dashboard.annotations.list.length > 1 && idx !== dashboard.annotations.list.length - 1 ? (\n                    <IconButton name=\"arrow-down\" aria-label=\"arrow-down\" onClick={() => onMove(idx, 1)} />\n                  ) : null}\n                </td>\n                <td style={{ width: '1%' }}>\n                  <DeleteButton\n                    size=\"sm\"\n                    onConfirm={() => onDelete(idx)}\n                    aria-label={`Delete query with title \"${annotation.name}\"`}\n                  />\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n      {showEmptyListCTA && (\n        <EmptyListCTA\n          onClick={onNew}\n          title=\"There are no custom annotation queries added yet\"\n          buttonIcon=\"comment-alt\"\n          buttonTitle=\"Add annotation query\"\n          infoBoxTitle=\"What are annotation queries?\"\n          infoBox={{\n            __html: `<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines\n          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for\n          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or\n          drag region). These will be stored in Grafana's annotation database.\n        </p>\n        Checkout the\n        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'\n          >Annotations documentation</a\n        >\n        for more information.`,\n          }}\n        />\n      )}\n      {!showEmptyListCTA && <ListNewButton onClick={onNew}>New query</ListNewButton>}\n    </VerticalGroup>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}