{"ast":null,"code":"var _Icon;\n\nimport { css } from '@emotion/css';\nimport React, { useCallback } from 'react';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Icon, Tooltip, useStyles } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const VariableLink = ({\n  loading,\n  onClick: propsOnClick,\n  text,\n  onCancel,\n  id\n}) => {\n  const styles = useStyles(getStyles);\n  const onClick = useCallback(event => {\n    event.stopPropagation();\n    event.preventDefault();\n    propsOnClick();\n  }, [propsOnClick]);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.container,\n      \"data-testid\": selectors.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${text}`),\n      title: text,\n      id: id,\n      children: [/*#__PURE__*/_jsx(VariableLinkText, {\n        text: text\n      }), /*#__PURE__*/_jsx(LoadingIndicator, {\n        onCancel: onCancel\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"button\", {\n    onClick: onClick,\n    className: styles.container,\n    \"data-testid\": selectors.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${text}`),\n    \"aria-expanded\": false,\n    \"aria-controls\": `options-${id}`,\n    id: id,\n    title: text,\n    children: [/*#__PURE__*/_jsx(VariableLinkText, {\n      text: text\n    }), _Icon || (_Icon = /*#__PURE__*/_jsx(Icon, {\n      \"aria-hidden\": true,\n      name: \"angle-down\",\n      size: \"sm\"\n    }))]\n  });\n};\n\nconst VariableLinkText = ({\n  text\n}) => {\n  const styles = useStyles(getStyles);\n  return /*#__PURE__*/_jsx(\"span\", {\n    className: styles.textAndTags,\n    children: text\n  });\n};\n\nconst LoadingIndicator = ({\n  onCancel\n}) => {\n  const onClick = useCallback(event => {\n    event.preventDefault();\n    onCancel();\n  }, [onCancel]);\n  return /*#__PURE__*/_jsx(Tooltip, {\n    content: \"Cancel query\",\n    children: /*#__PURE__*/_jsx(Icon, {\n      className: \"spin-clockwise\",\n      name: \"sync\",\n      size: \"xs\",\n      onClick: onClick,\n      \"aria-label\": selectors.components.LoadingIndicator.icon\n    })\n  });\n};\n\nconst getStyles = theme => ({\n  container: css`\n    max-width: 500px;\n    padding-right: 10px;\n    padding: 0 ${theme.spacing.sm};\n    background-color: ${theme.colors.formInputBg};\n    border: 1px solid ${theme.colors.formInputBorder};\n    border-radius: ${theme.border.radius.sm};\n    display: flex;\n    align-items: center;\n    color: ${theme.colors.text};\n    height: ${theme.height.md}px;\n\n    .label-tag {\n      margin: 0 5px;\n    }\n  `,\n  textAndTags: css`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    margin-right: ${theme.spacing.xxs};\n    user-select: none;\n  `\n});","map":{"version":3,"names":["css","React","useCallback","selectors","Icon","Tooltip","useStyles","VariableLink","loading","onClick","propsOnClick","text","onCancel","id","styles","getStyles","event","stopPropagation","preventDefault","container","pages","Dashboard","SubMenu","submenuItemValueDropDownValueLinkTexts","VariableLinkText","textAndTags","LoadingIndicator","components","icon","theme","spacing","sm","colors","formInputBg","formInputBorder","border","radius","height","md","xxs"],"sources":["/home/soula/grafana/public/app/features/variables/pickers/shared/VariableLink.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { FC, MouseEvent, useCallback } from 'react';\n\nimport { GrafanaTheme } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Icon, Tooltip, useStyles } from '@grafana/ui';\n\ninterface Props {\n  onClick: () => void;\n  text: string;\n  loading: boolean;\n  onCancel: () => void;\n  /**\n   *  htmlFor, needed for the label\n   */\n  id: string;\n}\n\nexport const VariableLink: FC<Props> = ({ loading, onClick: propsOnClick, text, onCancel, id }) => {\n  const styles = useStyles(getStyles);\n  const onClick = useCallback(\n    (event: MouseEvent<HTMLButtonElement>) => {\n      event.stopPropagation();\n      event.preventDefault();\n      propsOnClick();\n    },\n    [propsOnClick]\n  );\n\n  if (loading) {\n    return (\n      <div\n        className={styles.container}\n        data-testid={selectors.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${text}`)}\n        title={text}\n        id={id}\n      >\n        <VariableLinkText text={text} />\n        <LoadingIndicator onCancel={onCancel} />\n      </div>\n    );\n  }\n\n  return (\n    <button\n      onClick={onClick}\n      className={styles.container}\n      data-testid={selectors.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${text}`)}\n      aria-expanded={false}\n      aria-controls={`options-${id}`}\n      id={id}\n      title={text}\n    >\n      <VariableLinkText text={text} />\n      <Icon aria-hidden name=\"angle-down\" size=\"sm\" />\n    </button>\n  );\n};\n\ninterface VariableLinkTextProps {\n  text: string;\n}\n\nconst VariableLinkText: FC<VariableLinkTextProps> = ({ text }) => {\n  const styles = useStyles(getStyles);\n  return <span className={styles.textAndTags}>{text}</span>;\n};\n\nconst LoadingIndicator: FC<Pick<Props, 'onCancel'>> = ({ onCancel }) => {\n  const onClick = useCallback(\n    (event: MouseEvent) => {\n      event.preventDefault();\n      onCancel();\n    },\n    [onCancel]\n  );\n\n  return (\n    <Tooltip content=\"Cancel query\">\n      <Icon\n        className=\"spin-clockwise\"\n        name=\"sync\"\n        size=\"xs\"\n        onClick={onClick}\n        aria-label={selectors.components.LoadingIndicator.icon}\n      />\n    </Tooltip>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  container: css`\n    max-width: 500px;\n    padding-right: 10px;\n    padding: 0 ${theme.spacing.sm};\n    background-color: ${theme.colors.formInputBg};\n    border: 1px solid ${theme.colors.formInputBorder};\n    border-radius: ${theme.border.radius.sm};\n    display: flex;\n    align-items: center;\n    color: ${theme.colors.text};\n    height: ${theme.height.md}px;\n\n    .label-tag {\n      margin: 0 5px;\n    }\n  `,\n  textAndTags: css`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    margin-right: ${theme.spacing.xxs};\n    user-select: none;\n  `,\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}