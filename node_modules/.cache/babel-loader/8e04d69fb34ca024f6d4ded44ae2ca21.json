{"ast":null,"code":"import { config } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { SortOrder } from '../utils/richHistoryTypes';\nimport RichHistoryLocalStorage from './RichHistoryLocalStorage';\nimport RichHistoryRemoteStorage from './RichHistoryRemoteStorage';\nconst richHistoryLocalStorage = new RichHistoryLocalStorage();\nconst richHistoryRemoteStorage = new RichHistoryRemoteStorage();\nexport const getRichHistoryStorage = () => {\n  return config.queryHistoryEnabled ? richHistoryRemoteStorage : richHistoryLocalStorage;\n};\nexport const supportedFeatures = () => {\n  return config.queryHistoryEnabled ? {\n    availableFilters: [SortOrder.Descending, SortOrder.Ascending],\n    lastUsedDataSourcesAvailable: false,\n    clearHistory: false,\n    onlyActiveDataSource: false,\n    changeRetention: false,\n    queryHistoryAvailable: contextSrv.isSignedIn\n  } : {\n    availableFilters: [SortOrder.Descending, SortOrder.Ascending, SortOrder.DatasourceAZ, SortOrder.DatasourceZA],\n    lastUsedDataSourcesAvailable: true,\n    clearHistory: true,\n    onlyActiveDataSource: true,\n    changeRetention: true,\n    queryHistoryAvailable: true\n  };\n};","map":{"version":3,"names":["config","contextSrv","SortOrder","RichHistoryLocalStorage","RichHistoryRemoteStorage","richHistoryLocalStorage","richHistoryRemoteStorage","getRichHistoryStorage","queryHistoryEnabled","supportedFeatures","availableFilters","Descending","Ascending","lastUsedDataSourcesAvailable","clearHistory","onlyActiveDataSource","changeRetention","queryHistoryAvailable","isSignedIn","DatasourceAZ","DatasourceZA"],"sources":["/home/soula/grafana/public/app/core/history/richHistoryStorageProvider.ts"],"sourcesContent":["import { config } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\n\nimport { SortOrder } from '../utils/richHistoryTypes';\n\nimport RichHistoryLocalStorage from './RichHistoryLocalStorage';\nimport RichHistoryRemoteStorage from './RichHistoryRemoteStorage';\nimport RichHistoryStorage from './RichHistoryStorage';\n\nconst richHistoryLocalStorage = new RichHistoryLocalStorage();\nconst richHistoryRemoteStorage = new RichHistoryRemoteStorage();\n\nexport const getRichHistoryStorage = (): RichHistoryStorage => {\n  return config.queryHistoryEnabled ? richHistoryRemoteStorage : richHistoryLocalStorage;\n};\n\ninterface RichHistorySupportedFeatures {\n  availableFilters: SortOrder[];\n  lastUsedDataSourcesAvailable: boolean;\n  clearHistory: boolean;\n  onlyActiveDataSource: boolean;\n  changeRetention: boolean;\n  queryHistoryAvailable: boolean;\n}\n\nexport const supportedFeatures = (): RichHistorySupportedFeatures => {\n  return config.queryHistoryEnabled\n    ? {\n        availableFilters: [SortOrder.Descending, SortOrder.Ascending],\n        lastUsedDataSourcesAvailable: false,\n        clearHistory: false,\n        onlyActiveDataSource: false,\n        changeRetention: false,\n        queryHistoryAvailable: contextSrv.isSignedIn,\n      }\n    : {\n        availableFilters: [SortOrder.Descending, SortOrder.Ascending, SortOrder.DatasourceAZ, SortOrder.DatasourceZA],\n        lastUsedDataSourcesAvailable: true,\n        clearHistory: true,\n        onlyActiveDataSource: true,\n        changeRetention: true,\n        queryHistoryAvailable: true,\n      };\n};\n"],"mappings":"AAAA,SAASA,MAAT,QAAuB,kBAAvB;AACA,SAASC,UAAT,QAA2B,eAA3B;AAEA,SAASC,SAAT,QAA0B,2BAA1B;AAEA,OAAOC,uBAAP,MAAoC,2BAApC;AACA,OAAOC,wBAAP,MAAqC,4BAArC;AAGA,MAAMC,uBAAuB,GAAG,IAAIF,uBAAJ,EAAhC;AACA,MAAMG,wBAAwB,GAAG,IAAIF,wBAAJ,EAAjC;AAEA,OAAO,MAAMG,qBAAqB,GAAG,MAA0B;EAC7D,OAAOP,MAAM,CAACQ,mBAAP,GAA6BF,wBAA7B,GAAwDD,uBAA/D;AACD,CAFM;AAaP,OAAO,MAAMI,iBAAiB,GAAG,MAAoC;EACnE,OAAOT,MAAM,CAACQ,mBAAP,GACH;IACEE,gBAAgB,EAAE,CAACR,SAAS,CAACS,UAAX,EAAuBT,SAAS,CAACU,SAAjC,CADpB;IAEEC,4BAA4B,EAAE,KAFhC;IAGEC,YAAY,EAAE,KAHhB;IAIEC,oBAAoB,EAAE,KAJxB;IAKEC,eAAe,EAAE,KALnB;IAMEC,qBAAqB,EAAEhB,UAAU,CAACiB;EANpC,CADG,GASH;IACER,gBAAgB,EAAE,CAACR,SAAS,CAACS,UAAX,EAAuBT,SAAS,CAACU,SAAjC,EAA4CV,SAAS,CAACiB,YAAtD,EAAoEjB,SAAS,CAACkB,YAA9E,CADpB;IAEEP,4BAA4B,EAAE,IAFhC;IAGEC,YAAY,EAAE,IAHhB;IAIEC,oBAAoB,EAAE,IAJxB;IAKEC,eAAe,EAAE,IALnB;IAMEC,qBAAqB,EAAE;EANzB,CATJ;AAiBD,CAlBM"},"metadata":{},"sourceType":"module"}