{"ast":null,"code":"export function monkeyPatchInjectorWithPreAssignedBindings(injector) {\n  injector.oldInvoke = injector.invoke;\n\n  injector.invoke = (fn, self, locals, serviceName) => {\n    var _locals$$scope;\n\n    const parentScope = locals === null || locals === void 0 ? void 0 : (_locals$$scope = locals.$scope) === null || _locals$$scope === void 0 ? void 0 : _locals$$scope.$parent;\n\n    if (parentScope) {\n      var _parentScope$ctrl, _parentScope$ctrl2, _parentScope$ctrl3, _parentScope$$parent, _parentScope$$parent$, _parentScope$$parent$2;\n\n      // PanelCtrl\n      if (parentScope.panel) {\n        self.panel = parentScope.panel;\n      } // Panels & dashboard SettingsCtrl\n\n\n      if (parentScope.dashboard) {\n        self.dashboard = parentScope.dashboard;\n      } // Query editors\n\n\n      if ((_parentScope$ctrl = parentScope.ctrl) !== null && _parentScope$ctrl !== void 0 && _parentScope$ctrl.target) {\n        self.panelCtrl = parentScope.ctrl;\n        self.datasource = parentScope.ctrl.datasource;\n        self.target = parentScope.ctrl.target;\n      } // Data source ConfigCtrl\n\n\n      if ((_parentScope$ctrl2 = parentScope.ctrl) !== null && _parentScope$ctrl2 !== void 0 && _parentScope$ctrl2.datasourceMeta) {\n        self.meta = parentScope.ctrl.datasourceMeta;\n        self.current = parentScope.ctrl.current;\n      } // Data source AnnotationsQueryCtrl\n\n\n      if ((_parentScope$ctrl3 = parentScope.ctrl) !== null && _parentScope$ctrl3 !== void 0 && _parentScope$ctrl3.currentAnnotation) {\n        self.annotation = parentScope.ctrl.currentAnnotation;\n        self.datasource = parentScope.ctrl.currentDatasource;\n      } // App config ctrl\n\n\n      if (parentScope.isAppConfigCtrl) {\n        self.appEditCtrl = parentScope.ctrl;\n        self.appModel = parentScope.ctrl.model;\n      } // App page ctrl\n\n\n      if ((_parentScope$$parent = parentScope.$parent) !== null && _parentScope$$parent !== void 0 && (_parentScope$$parent$ = _parentScope$$parent.$parent) !== null && _parentScope$$parent$ !== void 0 && (_parentScope$$parent$2 = _parentScope$$parent$.ctrl) !== null && _parentScope$$parent$2 !== void 0 && _parentScope$$parent$2.appModel) {\n        var _parentScope$$parent2, _parentScope$$parent3, _parentScope$$parent4;\n\n        self.appModel = (_parentScope$$parent2 = parentScope.$parent) === null || _parentScope$$parent2 === void 0 ? void 0 : (_parentScope$$parent3 = _parentScope$$parent2.$parent) === null || _parentScope$$parent3 === void 0 ? void 0 : (_parentScope$$parent4 = _parentScope$$parent3.ctrl) === null || _parentScope$$parent4 === void 0 ? void 0 : _parentScope$$parent4.appModel;\n      }\n    }\n\n    return injector.oldInvoke(fn, self, locals, serviceName);\n  };\n}","map":{"version":3,"names":["monkeyPatchInjectorWithPreAssignedBindings","injector","oldInvoke","invoke","fn","self","locals","serviceName","parentScope","$scope","$parent","panel","dashboard","ctrl","target","panelCtrl","datasource","datasourceMeta","meta","current","currentAnnotation","annotation","currentDatasource","isAppConfigCtrl","appEditCtrl","appModel","model"],"sources":["/home/soula/grafana/public/app/angular/injectorMonkeyPatch.ts"],"sourcesContent":["export function monkeyPatchInjectorWithPreAssignedBindings(injector: any) {\n  injector.oldInvoke = injector.invoke;\n  injector.invoke = (fn: any, self: any, locals: any, serviceName: any) => {\n    const parentScope = locals?.$scope?.$parent;\n\n    if (parentScope) {\n      // PanelCtrl\n      if (parentScope.panel) {\n        self.panel = parentScope.panel;\n      }\n\n      // Panels & dashboard SettingsCtrl\n      if (parentScope.dashboard) {\n        self.dashboard = parentScope.dashboard;\n      }\n\n      // Query editors\n      if (parentScope.ctrl?.target) {\n        self.panelCtrl = parentScope.ctrl;\n        self.datasource = parentScope.ctrl.datasource;\n        self.target = parentScope.ctrl.target;\n      }\n\n      // Data source ConfigCtrl\n      if (parentScope.ctrl?.datasourceMeta) {\n        self.meta = parentScope.ctrl.datasourceMeta;\n        self.current = parentScope.ctrl.current;\n      }\n\n      // Data source AnnotationsQueryCtrl\n      if (parentScope.ctrl?.currentAnnotation) {\n        self.annotation = parentScope.ctrl.currentAnnotation;\n        self.datasource = parentScope.ctrl.currentDatasource;\n      }\n\n      // App config ctrl\n      if (parentScope.isAppConfigCtrl) {\n        self.appEditCtrl = parentScope.ctrl;\n        self.appModel = parentScope.ctrl.model;\n      }\n\n      // App page ctrl\n      if (parentScope.$parent?.$parent?.ctrl?.appModel) {\n        self.appModel = parentScope.$parent?.$parent?.ctrl?.appModel;\n      }\n    }\n\n    return injector.oldInvoke(fn, self, locals, serviceName);\n  };\n}\n"],"mappings":"AAAA,OAAO,SAASA,0CAAT,CAAoDC,QAApD,EAAmE;EACxEA,QAAQ,CAACC,SAAT,GAAqBD,QAAQ,CAACE,MAA9B;;EACAF,QAAQ,CAACE,MAAT,GAAkB,CAACC,EAAD,EAAUC,IAAV,EAAqBC,MAArB,EAAkCC,WAAlC,KAAuD;IAAA;;IACvE,MAAMC,WAAW,GAAGF,MAAH,aAAGA,MAAH,yCAAGA,MAAM,CAAEG,MAAX,mDAAG,eAAgBC,OAApC;;IAEA,IAAIF,WAAJ,EAAiB;MAAA;;MACf;MACA,IAAIA,WAAW,CAACG,KAAhB,EAAuB;QACrBN,IAAI,CAACM,KAAL,GAAaH,WAAW,CAACG,KAAzB;MACD,CAJc,CAMf;;;MACA,IAAIH,WAAW,CAACI,SAAhB,EAA2B;QACzBP,IAAI,CAACO,SAAL,GAAiBJ,WAAW,CAACI,SAA7B;MACD,CATc,CAWf;;;MACA,yBAAIJ,WAAW,CAACK,IAAhB,8CAAI,kBAAkBC,MAAtB,EAA8B;QAC5BT,IAAI,CAACU,SAAL,GAAiBP,WAAW,CAACK,IAA7B;QACAR,IAAI,CAACW,UAAL,GAAkBR,WAAW,CAACK,IAAZ,CAAiBG,UAAnC;QACAX,IAAI,CAACS,MAAL,GAAcN,WAAW,CAACK,IAAZ,CAAiBC,MAA/B;MACD,CAhBc,CAkBf;;;MACA,0BAAIN,WAAW,CAACK,IAAhB,+CAAI,mBAAkBI,cAAtB,EAAsC;QACpCZ,IAAI,CAACa,IAAL,GAAYV,WAAW,CAACK,IAAZ,CAAiBI,cAA7B;QACAZ,IAAI,CAACc,OAAL,GAAeX,WAAW,CAACK,IAAZ,CAAiBM,OAAhC;MACD,CAtBc,CAwBf;;;MACA,0BAAIX,WAAW,CAACK,IAAhB,+CAAI,mBAAkBO,iBAAtB,EAAyC;QACvCf,IAAI,CAACgB,UAAL,GAAkBb,WAAW,CAACK,IAAZ,CAAiBO,iBAAnC;QACAf,IAAI,CAACW,UAAL,GAAkBR,WAAW,CAACK,IAAZ,CAAiBS,iBAAnC;MACD,CA5Bc,CA8Bf;;;MACA,IAAId,WAAW,CAACe,eAAhB,EAAiC;QAC/BlB,IAAI,CAACmB,WAAL,GAAmBhB,WAAW,CAACK,IAA/B;QACAR,IAAI,CAACoB,QAAL,GAAgBjB,WAAW,CAACK,IAAZ,CAAiBa,KAAjC;MACD,CAlCc,CAoCf;;;MACA,4BAAIlB,WAAW,CAACE,OAAhB,0EAAI,qBAAqBA,OAAzB,4EAAI,sBAA8BG,IAAlC,mDAAI,uBAAoCY,QAAxC,EAAkD;QAAA;;QAChDpB,IAAI,CAACoB,QAAL,4BAAgBjB,WAAW,CAACE,OAA5B,mFAAgB,sBAAqBA,OAArC,mFAAgB,sBAA8BG,IAA9C,0DAAgB,sBAAoCY,QAApD;MACD;IACF;;IAED,OAAOxB,QAAQ,CAACC,SAAT,CAAmBE,EAAnB,EAAuBC,IAAvB,EAA6BC,MAA7B,EAAqCC,WAArC,CAAP;EACD,CA9CD;AA+CD"},"metadata":{},"sourceType":"module"}