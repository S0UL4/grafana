{"ast":null,"code":"import { css, cx } from '@emotion/css';\nimport React from 'react';\nimport { components } from 'react-select';\nimport { useStyles2 } from '../../themes';\nimport { useDelayedSwitch } from '../../utils/useDelayedSwitch';\nimport { Spinner } from '../Spinner/Spinner';\nimport { FadeTransition } from '../transitions/FadeTransition';\nimport { SlideOutTransition } from '../transitions/SlideOutTransition';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst getStyles = theme => {\n  const singleValue = css`\n    label: singleValue;\n    color: ${theme.components.input.text};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    box-sizing: border-box;\n    max-width: 100%;\n    grid-area: 1 / 1 / 2 / 3;\n  `;\n  const spinnerWrapper = css`\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    margin-right: 10px;\n    position: relative;\n    vertical-align: middle;\n    overflow: hidden;\n  `;\n  const spinnerIcon = css`\n    width: 100%;\n    height: 100%;\n    position: absolute;\n  `;\n  const disabled = css`\n    color: ${theme.colors.text.disabled};\n  `;\n  const isOpen = css`\n    color: ${theme.colors.text.disabled};\n  `;\n  return {\n    singleValue,\n    spinnerWrapper,\n    spinnerIcon,\n    disabled,\n    isOpen\n  };\n};\n\nexport const SingleValue = props => {\n  var _data$label;\n\n  const {\n    children,\n    data,\n    isDisabled\n  } = props;\n  const styles = useStyles2(getStyles);\n  const loading = useDelayedSwitch(data.loading || false, {\n    delay: 250,\n    duration: 750\n  });\n  return /*#__PURE__*/_jsxs(components.SingleValue, Object.assign({}, props, {\n    className: cx(styles.singleValue, isDisabled && styles.disabled, props.selectProps.menuIsOpen && styles.isOpen),\n    children: [data.imgUrl ? /*#__PURE__*/_jsx(FadeWithImage, {\n      loading: loading,\n      imgUrl: data.imgUrl,\n      styles: styles,\n      alt: (_data$label = data.label) !== null && _data$label !== void 0 ? _data$label : data.value\n    }) : /*#__PURE__*/_jsx(SlideOutTransition, {\n      horizontal: true,\n      size: 16,\n      visible: loading,\n      duration: 150,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: styles.spinnerWrapper,\n        children: /*#__PURE__*/_jsx(Spinner, {\n          className: styles.spinnerIcon,\n          inline: true\n        })\n      })\n    }), !data.hideText && children]\n  }));\n};\n\nconst FadeWithImage = props => {\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: props.styles.spinnerWrapper,\n    children: [/*#__PURE__*/_jsx(FadeTransition, {\n      duration: 150,\n      visible: props.loading,\n      children: /*#__PURE__*/_jsx(Spinner, {\n        className: props.styles.spinnerIcon,\n        inline: true\n      })\n    }), /*#__PURE__*/_jsx(FadeTransition, {\n      duration: 150,\n      visible: !props.loading,\n      children: /*#__PURE__*/_jsx(\"img\", {\n        className: props.styles.spinnerIcon,\n        src: props.imgUrl,\n        alt: props.alt\n      })\n    })]\n  });\n};","map":{"version":3,"names":["css","cx","React","components","useStyles2","useDelayedSwitch","Spinner","FadeTransition","SlideOutTransition","getStyles","theme","singleValue","input","text","spinnerWrapper","spinnerIcon","disabled","colors","isOpen","SingleValue","props","children","data","isDisabled","styles","loading","delay","duration","selectProps","menuIsOpen","imgUrl","label","value","hideText","FadeWithImage","alt"],"sources":["/home/soula/grafana/packages/grafana-ui/src/components/Select/SingleValue.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React from 'react';\nimport { components, GroupBase, SingleValueProps } from 'react-select';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes';\nimport { useDelayedSwitch } from '../../utils/useDelayedSwitch';\nimport { Spinner } from '../Spinner/Spinner';\nimport { FadeTransition } from '../transitions/FadeTransition';\nimport { SlideOutTransition } from '../transitions/SlideOutTransition';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const singleValue = css`\n    label: singleValue;\n    color: ${theme.components.input.text};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    box-sizing: border-box;\n    max-width: 100%;\n    grid-area: 1 / 1 / 2 / 3;\n  `;\n\n  const spinnerWrapper = css`\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    margin-right: 10px;\n    position: relative;\n    vertical-align: middle;\n    overflow: hidden;\n  `;\n\n  const spinnerIcon = css`\n    width: 100%;\n    height: 100%;\n    position: absolute;\n  `;\n\n  const disabled = css`\n    color: ${theme.colors.text.disabled};\n  `;\n\n  const isOpen = css`\n    color: ${theme.colors.text.disabled};\n  `;\n\n  return { singleValue, spinnerWrapper, spinnerIcon, disabled, isOpen };\n};\n\ntype StylesType = ReturnType<typeof getStyles>;\n\nexport type Props<T> = SingleValueProps<SelectableValue<T>, boolean, GroupBase<SelectableValue<T>>>;\n\nexport const SingleValue = <T extends unknown>(props: Props<T>) => {\n  const { children, data, isDisabled } = props;\n  const styles = useStyles2(getStyles);\n  const loading = useDelayedSwitch(data.loading || false, { delay: 250, duration: 750 });\n\n  return (\n    <components.SingleValue\n      {...props}\n      className={cx(styles.singleValue, isDisabled && styles.disabled, props.selectProps.menuIsOpen && styles.isOpen)}\n    >\n      {data.imgUrl ? (\n        <FadeWithImage\n          loading={loading}\n          imgUrl={data.imgUrl}\n          styles={styles}\n          alt={(data.label ?? data.value) as string}\n        />\n      ) : (\n        <SlideOutTransition horizontal size={16} visible={loading} duration={150}>\n          <div className={styles.spinnerWrapper}>\n            <Spinner className={styles.spinnerIcon} inline />\n          </div>\n        </SlideOutTransition>\n      )}\n      {!data.hideText && children}\n    </components.SingleValue>\n  );\n};\n\nconst FadeWithImage = (props: { loading: boolean; imgUrl: string; styles: StylesType; alt?: string }) => {\n  return (\n    <div className={props.styles.spinnerWrapper}>\n      <FadeTransition duration={150} visible={props.loading}>\n        <Spinner className={props.styles.spinnerIcon} inline />\n      </FadeTransition>\n      <FadeTransition duration={150} visible={!props.loading}>\n        <img className={props.styles.spinnerIcon} src={props.imgUrl} alt={props.alt} />\n      </FadeTransition>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}