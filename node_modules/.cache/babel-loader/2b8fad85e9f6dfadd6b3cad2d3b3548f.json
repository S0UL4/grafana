{"ast":null,"code":"import { ArrayVector, FieldType, dateTime } from '@grafana/data';\nexport function feedToDataFrame(feed) {\n  const date = new ArrayVector([]);\n  const title = new ArrayVector([]);\n  const link = new ArrayVector([]);\n  const content = new ArrayVector([]);\n  const ogImage = new ArrayVector([]);\n\n  for (const item of feed.items) {\n    const val = dateTime(item.pubDate);\n\n    try {\n      date.buffer.push(val.valueOf());\n      title.buffer.push(item.title);\n      link.buffer.push(item.link);\n      ogImage.buffer.push(item.ogImage);\n\n      if (item.content) {\n        const body = item.content.replace(/<\\/?[^>]+(>|$)/g, '');\n        content.buffer.push(body);\n      }\n    } catch (err) {\n      console.warn('Error reading news item:', err, item);\n    }\n  }\n\n  return {\n    fields: [{\n      name: 'date',\n      type: FieldType.time,\n      config: {\n        displayName: 'Date'\n      },\n      values: date\n    }, {\n      name: 'title',\n      type: FieldType.string,\n      config: {},\n      values: title\n    }, {\n      name: 'link',\n      type: FieldType.string,\n      config: {},\n      values: link\n    }, {\n      name: 'content',\n      type: FieldType.string,\n      config: {},\n      values: content\n    }, {\n      name: 'ogImage',\n      type: FieldType.string,\n      config: {},\n      values: ogImage\n    }],\n    length: date.length\n  };\n}","map":{"version":3,"names":["ArrayVector","FieldType","dateTime","feedToDataFrame","feed","date","title","link","content","ogImage","item","items","val","pubDate","buffer","push","valueOf","body","replace","err","console","warn","fields","name","type","time","config","displayName","values","string","length"],"sources":["/home/soula/grafana/public/app/plugins/panel/news/utils.ts"],"sourcesContent":["import { ArrayVector, FieldType, DataFrame, dateTime } from '@grafana/data';\n\nimport { Feed } from './types';\n\nexport function feedToDataFrame(feed: Feed): DataFrame {\n  const date = new ArrayVector<number>([]);\n  const title = new ArrayVector<string>([]);\n  const link = new ArrayVector<string>([]);\n  const content = new ArrayVector<string>([]);\n  const ogImage = new ArrayVector<string | undefined | null>([]);\n\n  for (const item of feed.items) {\n    const val = dateTime(item.pubDate);\n\n    try {\n      date.buffer.push(val.valueOf());\n      title.buffer.push(item.title);\n      link.buffer.push(item.link);\n      ogImage.buffer.push(item.ogImage);\n\n      if (item.content) {\n        const body = item.content.replace(/<\\/?[^>]+(>|$)/g, '');\n        content.buffer.push(body);\n      }\n    } catch (err) {\n      console.warn('Error reading news item:', err, item);\n    }\n  }\n\n  return {\n    fields: [\n      { name: 'date', type: FieldType.time, config: { displayName: 'Date' }, values: date },\n      { name: 'title', type: FieldType.string, config: {}, values: title },\n      { name: 'link', type: FieldType.string, config: {}, values: link },\n      { name: 'content', type: FieldType.string, config: {}, values: content },\n      { name: 'ogImage', type: FieldType.string, config: {}, values: ogImage },\n    ],\n    length: date.length,\n  };\n}\n"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAA4CC,QAA5C,QAA4D,eAA5D;AAIA,OAAO,SAASC,eAAT,CAAyBC,IAAzB,EAAgD;EACrD,MAAMC,IAAI,GAAG,IAAIL,WAAJ,CAAwB,EAAxB,CAAb;EACA,MAAMM,KAAK,GAAG,IAAIN,WAAJ,CAAwB,EAAxB,CAAd;EACA,MAAMO,IAAI,GAAG,IAAIP,WAAJ,CAAwB,EAAxB,CAAb;EACA,MAAMQ,OAAO,GAAG,IAAIR,WAAJ,CAAwB,EAAxB,CAAhB;EACA,MAAMS,OAAO,GAAG,IAAIT,WAAJ,CAA2C,EAA3C,CAAhB;;EAEA,KAAK,MAAMU,IAAX,IAAmBN,IAAI,CAACO,KAAxB,EAA+B;IAC7B,MAAMC,GAAG,GAAGV,QAAQ,CAACQ,IAAI,CAACG,OAAN,CAApB;;IAEA,IAAI;MACFR,IAAI,CAACS,MAAL,CAAYC,IAAZ,CAAiBH,GAAG,CAACI,OAAJ,EAAjB;MACAV,KAAK,CAACQ,MAAN,CAAaC,IAAb,CAAkBL,IAAI,CAACJ,KAAvB;MACAC,IAAI,CAACO,MAAL,CAAYC,IAAZ,CAAiBL,IAAI,CAACH,IAAtB;MACAE,OAAO,CAACK,MAAR,CAAeC,IAAf,CAAoBL,IAAI,CAACD,OAAzB;;MAEA,IAAIC,IAAI,CAACF,OAAT,EAAkB;QAChB,MAAMS,IAAI,GAAGP,IAAI,CAACF,OAAL,CAAaU,OAAb,CAAqB,iBAArB,EAAwC,EAAxC,CAAb;QACAV,OAAO,CAACM,MAAR,CAAeC,IAAf,CAAoBE,IAApB;MACD;IACF,CAVD,CAUE,OAAOE,GAAP,EAAY;MACZC,OAAO,CAACC,IAAR,CAAa,0BAAb,EAAyCF,GAAzC,EAA8CT,IAA9C;IACD;EACF;;EAED,OAAO;IACLY,MAAM,EAAE,CACN;MAAEC,IAAI,EAAE,MAAR;MAAgBC,IAAI,EAAEvB,SAAS,CAACwB,IAAhC;MAAsCC,MAAM,EAAE;QAAEC,WAAW,EAAE;MAAf,CAA9C;MAAuEC,MAAM,EAAEvB;IAA/E,CADM,EAEN;MAAEkB,IAAI,EAAE,OAAR;MAAiBC,IAAI,EAAEvB,SAAS,CAAC4B,MAAjC;MAAyCH,MAAM,EAAE,EAAjD;MAAqDE,MAAM,EAAEtB;IAA7D,CAFM,EAGN;MAAEiB,IAAI,EAAE,MAAR;MAAgBC,IAAI,EAAEvB,SAAS,CAAC4B,MAAhC;MAAwCH,MAAM,EAAE,EAAhD;MAAoDE,MAAM,EAAErB;IAA5D,CAHM,EAIN;MAAEgB,IAAI,EAAE,SAAR;MAAmBC,IAAI,EAAEvB,SAAS,CAAC4B,MAAnC;MAA2CH,MAAM,EAAE,EAAnD;MAAuDE,MAAM,EAAEpB;IAA/D,CAJM,EAKN;MAAEe,IAAI,EAAE,SAAR;MAAmBC,IAAI,EAAEvB,SAAS,CAAC4B,MAAnC;MAA2CH,MAAM,EAAE,EAAnD;MAAuDE,MAAM,EAAEnB;IAA/D,CALM,CADH;IAQLqB,MAAM,EAAEzB,IAAI,CAACyB;EARR,CAAP;AAUD"},"metadata":{},"sourceType":"module"}