{"ast":null,"code":"// works with webpack plugin: scripts/webpack/plugins/CorsWorkerPlugin.js\nexport class CorsWorker extends window.Worker {\n  constructor(url, options) {\n    // by default, worker inherits HTML document's location and pathname which leads to wrong public path value\n    // the CorsWorkerPlugin will override it with the value based on the initial worker chunk, ie.\n    //    initial worker chunk: http://host.com/cdn/scripts/worker-123.js\n    //    resulting public path: http://host.com/cdn/scripts\n    const scriptUrl = url.toString();\n    const urlParts = scriptUrl.split('/');\n    urlParts.pop();\n    const scriptsBasePathUrl = `${urlParts.join('/')}/`;\n    const importScripts = `importScripts('${scriptUrl}');`;\n    const objectURL = URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${scriptsBasePathUrl}'; ${importScripts}`], {\n      type: 'application/javascript'\n    }));\n    super(objectURL, options);\n    URL.revokeObjectURL(objectURL);\n  }\n\n}","map":{"version":3,"names":["CorsWorker","window","Worker","constructor","url","options","scriptUrl","toString","urlParts","split","pop","scriptsBasePathUrl","join","importScripts","objectURL","URL","createObjectURL","Blob","type","revokeObjectURL"],"sources":["/home/soula/grafana/public/app/core/utils/CorsWorker.ts"],"sourcesContent":["// works with webpack plugin: scripts/webpack/plugins/CorsWorkerPlugin.js\nexport class CorsWorker extends window.Worker {\n  constructor(url: URL, options?: WorkerOptions) {\n    // by default, worker inherits HTML document's location and pathname which leads to wrong public path value\n    // the CorsWorkerPlugin will override it with the value based on the initial worker chunk, ie.\n    //    initial worker chunk: http://host.com/cdn/scripts/worker-123.js\n    //    resulting public path: http://host.com/cdn/scripts\n\n    const scriptUrl = url.toString();\n    const urlParts = scriptUrl.split('/');\n    urlParts.pop();\n    const scriptsBasePathUrl = `${urlParts.join('/')}/`;\n\n    const importScripts = `importScripts('${scriptUrl}');`;\n    const objectURL = URL.createObjectURL(\n      new Blob([`__webpack_worker_public_path__ = '${scriptsBasePathUrl}'; ${importScripts}`], {\n        type: 'application/javascript',\n      })\n    );\n    super(objectURL, options);\n    URL.revokeObjectURL(objectURL);\n  }\n}\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,UAAN,SAAyBC,MAAM,CAACC,MAAhC,CAAuC;EAC5CC,WAAW,CAACC,GAAD,EAAWC,OAAX,EAAoC;IAC7C;IACA;IACA;IACA;IAEA,MAAMC,SAAS,GAAGF,GAAG,CAACG,QAAJ,EAAlB;IACA,MAAMC,QAAQ,GAAGF,SAAS,CAACG,KAAV,CAAgB,GAAhB,CAAjB;IACAD,QAAQ,CAACE,GAAT;IACA,MAAMC,kBAAkB,GAAI,GAAEH,QAAQ,CAACI,IAAT,CAAc,GAAd,CAAmB,GAAjD;IAEA,MAAMC,aAAa,GAAI,kBAAiBP,SAAU,KAAlD;IACA,MAAMQ,SAAS,GAAGC,GAAG,CAACC,eAAJ,CAChB,IAAIC,IAAJ,CAAS,CAAE,qCAAoCN,kBAAmB,MAAKE,aAAc,EAA5E,CAAT,EAAyF;MACvFK,IAAI,EAAE;IADiF,CAAzF,CADgB,CAAlB;IAKA,MAAMJ,SAAN,EAAiBT,OAAjB;IACAU,GAAG,CAACI,eAAJ,CAAoBL,SAApB;EACD;;AApB2C"},"metadata":{},"sourceType":"module"}