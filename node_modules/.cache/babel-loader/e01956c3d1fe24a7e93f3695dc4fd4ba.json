{"ast":null,"code":"import { css, cx } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { AccessoryButton, InputGroup } from '@grafana/experimental';\nimport { Input, stylesFactory, useTheme2 } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const MultiFilterItem = ({\n  filter,\n  onChange,\n  onDelete,\n  keyPlaceholder\n}) => {\n  var _filter$value;\n\n  const [localKey, setLocalKey] = useState(filter.key || '');\n  const [localValue, setLocalValue] = useState(((_filter$value = filter.value) === null || _filter$value === void 0 ? void 0 : _filter$value.join(', ')) || '');\n  const theme = useTheme2();\n  const styles = getOperatorStyles(theme);\n  return /*#__PURE__*/_jsx(\"div\", {\n    \"data-testid\": \"cloudwatch-multifilter-item\",\n    children: /*#__PURE__*/_jsxs(InputGroup, {\n      children: [/*#__PURE__*/_jsx(Input, {\n        \"data-testid\": \"cloudwatch-multifilter-item-key\",\n        \"aria-label\": \"Filter key\",\n        value: localKey,\n        placeholder: keyPlaceholder !== null && keyPlaceholder !== void 0 ? keyPlaceholder : 'key',\n        onChange: e => setLocalKey(e.currentTarget.value),\n        onBlur: () => {\n          if (localKey && localKey !== filter.key) {\n            onChange(Object.assign({}, filter, {\n              key: localKey\n            }));\n          }\n        }\n      }), /*#__PURE__*/_jsx(\"span\", {\n        className: cx(styles.root),\n        children: \"=\"\n      }), /*#__PURE__*/_jsx(Input, {\n        \"data-testid\": \"cloudwatch-multifilter-item-value\",\n        \"aria-label\": \"Filter value\",\n        value: localValue,\n        placeholder: \"value1, value2,...\",\n        onChange: e => setLocalValue(e.currentTarget.value),\n        onBlur: () => {\n          const newValues = localValue.split(',').map(v => v.trim());\n\n          if (localValue && newValues !== filter.value) {\n            onChange(Object.assign({}, filter, {\n              value: newValues\n            }));\n          }\n\n          setLocalValue(newValues.join(', '));\n        }\n      }), /*#__PURE__*/_jsx(AccessoryButton, {\n        \"aria-label\": \"remove\",\n        icon: \"times\",\n        variant: \"secondary\",\n        onClick: onDelete,\n        type: \"button\"\n      })]\n    })\n  });\n};\nconst getOperatorStyles = stylesFactory(theme => ({\n  root: css({\n    padding: theme.spacing(0, 1),\n    alignSelf: 'center'\n  })\n}));","map":{"version":3,"names":["css","cx","React","useState","AccessoryButton","InputGroup","Input","stylesFactory","useTheme2","MultiFilterItem","filter","onChange","onDelete","keyPlaceholder","localKey","setLocalKey","key","localValue","setLocalValue","value","join","theme","styles","getOperatorStyles","e","currentTarget","root","newValues","split","map","v","trim","padding","spacing","alignSelf"],"sources":["/home/soula/grafana/public/app/plugins/datasource/cloudwatch/components/VariableQueryEditor/MultiFilterItem.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { FunctionComponent, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { AccessoryButton, InputGroup } from '@grafana/experimental';\nimport { Input, stylesFactory, useTheme2 } from '@grafana/ui';\n\nimport { MultiFilterCondition } from './MultiFilter';\n\nexport interface Props {\n  filter: MultiFilterCondition;\n  onChange: (value: MultiFilterCondition) => void;\n  onDelete: () => void;\n  keyPlaceholder?: string;\n}\n\nexport const MultiFilterItem: FunctionComponent<Props> = ({ filter, onChange, onDelete, keyPlaceholder }) => {\n  const [localKey, setLocalKey] = useState(filter.key || '');\n  const [localValue, setLocalValue] = useState(filter.value?.join(', ') || '');\n  const theme = useTheme2();\n  const styles = getOperatorStyles(theme);\n\n  return (\n    <div data-testid=\"cloudwatch-multifilter-item\">\n      <InputGroup>\n        <Input\n          data-testid=\"cloudwatch-multifilter-item-key\"\n          aria-label=\"Filter key\"\n          value={localKey}\n          placeholder={keyPlaceholder ?? 'key'}\n          onChange={(e) => setLocalKey(e.currentTarget.value)}\n          onBlur={() => {\n            if (localKey && localKey !== filter.key) {\n              onChange({ ...filter, key: localKey });\n            }\n          }}\n        />\n\n        <span className={cx(styles.root)}>=</span>\n\n        <Input\n          data-testid=\"cloudwatch-multifilter-item-value\"\n          aria-label=\"Filter value\"\n          value={localValue}\n          placeholder=\"value1, value2,...\"\n          onChange={(e) => setLocalValue(e.currentTarget.value)}\n          onBlur={() => {\n            const newValues = localValue.split(',').map((v) => v.trim());\n            if (localValue && newValues !== filter.value) {\n              onChange({ ...filter, value: newValues });\n            }\n            setLocalValue(newValues.join(', '));\n          }}\n        />\n\n        <AccessoryButton aria-label=\"remove\" icon=\"times\" variant=\"secondary\" onClick={onDelete} type=\"button\" />\n      </InputGroup>\n    </div>\n  );\n};\n\nconst getOperatorStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  root: css({\n    padding: theme.spacing(0, 1),\n    alignSelf: 'center',\n  }),\n}));\n"],"mappings":"AAAA,SAASA,GAAT,EAAcC,EAAd,QAAwB,cAAxB;AACA,OAAOC,KAAP,IAAmCC,QAAnC,QAAmD,OAAnD;AAGA,SAASC,eAAT,EAA0BC,UAA1B,QAA4C,uBAA5C;AACA,SAASC,KAAT,EAAgBC,aAAhB,EAA+BC,SAA/B,QAAgD,aAAhD;;;AAWA,OAAO,MAAMC,eAAyC,GAAG,CAAC;EAAEC,MAAF;EAAUC,QAAV;EAAoBC,QAApB;EAA8BC;AAA9B,CAAD,KAAoD;EAAA;;EAC3G,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAACO,MAAM,CAACM,GAAP,IAAc,EAAf,CAAxC;EACA,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC,kBAAAO,MAAM,CAACS,KAAP,gEAAcC,IAAd,CAAmB,IAAnB,MAA4B,EAA7B,CAA5C;EACA,MAAMC,KAAK,GAAGb,SAAS,EAAvB;EACA,MAAMc,MAAM,GAAGC,iBAAiB,CAACF,KAAD,CAAhC;EAEA,oBACE;IAAK,eAAY,6BAAjB;IAAA,uBACE,MAAC,UAAD;MAAA,wBACE,KAAC,KAAD;QACE,eAAY,iCADd;QAEE,cAAW,YAFb;QAGE,KAAK,EAAEP,QAHT;QAIE,WAAW,EAAED,cAAF,aAAEA,cAAF,cAAEA,cAAF,GAAoB,KAJjC;QAKE,QAAQ,EAAGW,CAAD,IAAOT,WAAW,CAACS,CAAC,CAACC,aAAF,CAAgBN,KAAjB,CAL9B;QAME,MAAM,EAAE,MAAM;UACZ,IAAIL,QAAQ,IAAIA,QAAQ,KAAKJ,MAAM,CAACM,GAApC,EAAyC;YACvCL,QAAQ,mBAAMD,MAAN;cAAcM,GAAG,EAAEF;YAAnB,GAAR;UACD;QACF;MAVH,EADF,eAcE;QAAM,SAAS,EAAEb,EAAE,CAACqB,MAAM,CAACI,IAAR,CAAnB;QAAA;MAAA,EAdF,eAgBE,KAAC,KAAD;QACE,eAAY,mCADd;QAEE,cAAW,cAFb;QAGE,KAAK,EAAET,UAHT;QAIE,WAAW,EAAC,oBAJd;QAKE,QAAQ,EAAGO,CAAD,IAAON,aAAa,CAACM,CAAC,CAACC,aAAF,CAAgBN,KAAjB,CALhC;QAME,MAAM,EAAE,MAAM;UACZ,MAAMQ,SAAS,GAAGV,UAAU,CAACW,KAAX,CAAiB,GAAjB,EAAsBC,GAAtB,CAA2BC,CAAD,IAAOA,CAAC,CAACC,IAAF,EAAjC,CAAlB;;UACA,IAAId,UAAU,IAAIU,SAAS,KAAKjB,MAAM,CAACS,KAAvC,EAA8C;YAC5CR,QAAQ,mBAAMD,MAAN;cAAcS,KAAK,EAAEQ;YAArB,GAAR;UACD;;UACDT,aAAa,CAACS,SAAS,CAACP,IAAV,CAAe,IAAf,CAAD,CAAb;QACD;MAZH,EAhBF,eA+BE,KAAC,eAAD;QAAiB,cAAW,QAA5B;QAAqC,IAAI,EAAC,OAA1C;QAAkD,OAAO,EAAC,WAA1D;QAAsE,OAAO,EAAER,QAA/E;QAAyF,IAAI,EAAC;MAA9F,EA/BF;IAAA;EADF,EADF;AAqCD,CA3CM;AA6CP,MAAMW,iBAAiB,GAAGhB,aAAa,CAAEc,KAAD,KAA2B;EACjEK,IAAI,EAAE1B,GAAG,CAAC;IACRgC,OAAO,EAAEX,KAAK,CAACY,OAAN,CAAc,CAAd,EAAiB,CAAjB,CADD;IAERC,SAAS,EAAE;EAFH,CAAD;AADwD,CAA3B,CAAD,CAAvC"},"metadata":{},"sourceType":"module"}