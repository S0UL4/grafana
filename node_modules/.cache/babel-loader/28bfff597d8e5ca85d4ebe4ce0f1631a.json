{"ast":null,"code":"var _Icon, _Icon2, _span, _span2, _span3, _em, _td;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from 'react';\nimport { Select, Icon, Button } from '@grafana/ui';\nimport { dashboardPermissionLevels } from 'app/types/acl';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst setClassNameHelper = inherited => {\n  return inherited ? 'gf-form-disabled' : '';\n};\n\nfunction ItemAvatar({\n  item\n}) {\n  if (item.userAvatarUrl) {\n    return /*#__PURE__*/_jsx(\"img\", {\n      className: \"filter-table__avatar\",\n      src: item.userAvatarUrl\n    });\n  }\n\n  if (item.teamAvatarUrl) {\n    return /*#__PURE__*/_jsx(\"img\", {\n      className: \"filter-table__avatar\",\n      src: item.teamAvatarUrl\n    });\n  }\n\n  if (item.role === 'Editor') {\n    return _Icon || (_Icon = /*#__PURE__*/_jsx(Icon, {\n      size: \"lg\",\n      name: \"edit\"\n    }));\n  }\n\n  return _Icon2 || (_Icon2 = /*#__PURE__*/_jsx(Icon, {\n    size: \"lg\",\n    name: \"eye\"\n  }));\n}\n\nfunction ItemDescription({\n  item\n}) {\n  if (item.userId) {\n    return _span || (_span = /*#__PURE__*/_jsx(\"span\", {\n      className: \"filter-table__weak-italic\",\n      children: \"(User)\"\n    }));\n  }\n\n  if (item.teamId) {\n    return _span2 || (_span2 = /*#__PURE__*/_jsx(\"span\", {\n      className: \"filter-table__weak-italic\",\n      children: \"(Team)\"\n    }));\n  }\n\n  return _span3 || (_span3 = /*#__PURE__*/_jsx(\"span\", {\n    className: \"filter-table__weak-italic\",\n    children: \"(Role)\"\n  }));\n}\n\nexport default class PermissionsListItem extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onPermissionChanged\", option => {\n      this.props.onPermissionChanged(this.props.item, option.value);\n    });\n\n    _defineProperty(this, \"onRemoveItem\", () => {\n      this.props.onRemoveItem(this.props.item);\n    });\n  }\n\n  render() {\n    const {\n      item,\n      folderInfo\n    } = this.props;\n    const inheritedFromRoot = item.dashboardId === -1 && !item.inherited;\n    const currentPermissionLevel = dashboardPermissionLevels.find(dp => dp.value === item.permission);\n    return /*#__PURE__*/_jsxs(\"tr\", {\n      className: setClassNameHelper(Boolean(item === null || item === void 0 ? void 0 : item.inherited)),\n      children: [/*#__PURE__*/_jsx(\"td\", {\n        style: {\n          width: '1%'\n        },\n        children: /*#__PURE__*/_jsx(ItemAvatar, {\n          item: item\n        })\n      }), /*#__PURE__*/_jsxs(\"td\", {\n        style: {\n          width: '90%'\n        },\n        children: [item.name, \" \", /*#__PURE__*/_jsx(ItemDescription, {\n          item: item\n        })]\n      }), /*#__PURE__*/_jsxs(\"td\", {\n        children: [item.inherited && folderInfo && /*#__PURE__*/_jsxs(\"em\", {\n          className: \"muted no-wrap\",\n          children: [\"Inherited from folder\", ' ', folderInfo.canViewFolderPermissions ? /*#__PURE__*/_jsx(\"a\", {\n            className: \"text-link\",\n            href: `${folderInfo.url}/permissions`,\n            children: folderInfo.title\n          }) : folderInfo.title]\n        }), inheritedFromRoot && (_em || (_em = /*#__PURE__*/_jsx(\"em\", {\n          className: \"muted no-wrap\",\n          children: \"Default Permission\"\n        })))]\n      }), _td || (_td = /*#__PURE__*/_jsx(\"td\", {\n        className: \"query-keyword\",\n        children: \"Can\"\n      })), /*#__PURE__*/_jsx(\"td\", {\n        children: /*#__PURE__*/_jsx(Select, {\n          \"aria-label\": `Permission level for \"${item.name}\"`,\n          isSearchable: false,\n          options: dashboardPermissionLevels,\n          onChange: this.onPermissionChanged,\n          disabled: item.inherited,\n          value: currentPermissionLevel,\n          width: 25\n        })\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: !item.inherited ? /*#__PURE__*/_jsx(Button, {\n          \"aria-label\": `Remove permission for \"${item.name}\"`,\n          size: \"sm\",\n          variant: \"destructive\",\n          icon: \"times\",\n          onClick: this.onRemoveItem\n        }) : /*#__PURE__*/_jsx(Button, {\n          \"aria-label\": `Remove permission for \"${item.name}\" (Disabled)`,\n          size: \"sm\",\n          disabled: true,\n          icon: \"times\"\n        })\n      })]\n    });\n  }\n\n}","map":{"version":3,"names":["React","PureComponent","Select","Icon","Button","dashboardPermissionLevels","setClassNameHelper","inherited","ItemAvatar","item","userAvatarUrl","teamAvatarUrl","role","ItemDescription","userId","teamId","PermissionsListItem","option","props","onPermissionChanged","value","onRemoveItem","render","folderInfo","inheritedFromRoot","dashboardId","currentPermissionLevel","find","dp","permission","Boolean","width","name","canViewFolderPermissions","url","title"],"sources":["/home/soula/grafana/public/app/core/components/PermissionList/PermissionListItem.tsx"],"sourcesContent":["import React, { PureComponent } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select, Icon, Button } from '@grafana/ui';\nimport { FolderInfo } from 'app/types';\nimport { dashboardPermissionLevels, DashboardAcl, PermissionLevel } from 'app/types/acl';\n\nconst setClassNameHelper = (inherited: boolean) => {\n  return inherited ? 'gf-form-disabled' : '';\n};\n\nfunction ItemAvatar({ item }: { item: DashboardAcl }) {\n  if (item.userAvatarUrl) {\n    return <img className=\"filter-table__avatar\" src={item.userAvatarUrl} />;\n  }\n  if (item.teamAvatarUrl) {\n    return <img className=\"filter-table__avatar\" src={item.teamAvatarUrl} />;\n  }\n  if (item.role === 'Editor') {\n    return <Icon size=\"lg\" name=\"edit\" />;\n  }\n\n  return <Icon size=\"lg\" name=\"eye\" />;\n}\n\nfunction ItemDescription({ item }: { item: DashboardAcl }) {\n  if (item.userId) {\n    return <span className=\"filter-table__weak-italic\">(User)</span>;\n  }\n  if (item.teamId) {\n    return <span className=\"filter-table__weak-italic\">(Team)</span>;\n  }\n  return <span className=\"filter-table__weak-italic\">(Role)</span>;\n}\n\ninterface Props {\n  item: DashboardAcl;\n  onRemoveItem: (item: DashboardAcl) => void;\n  onPermissionChanged: (item: DashboardAcl, level: PermissionLevel) => void;\n  folderInfo?: FolderInfo;\n}\n\nexport default class PermissionsListItem extends PureComponent<Props> {\n  onPermissionChanged = (option: SelectableValue<PermissionLevel>) => {\n    this.props.onPermissionChanged(this.props.item, option.value!);\n  };\n\n  onRemoveItem = () => {\n    this.props.onRemoveItem(this.props.item);\n  };\n\n  render() {\n    const { item, folderInfo } = this.props;\n    const inheritedFromRoot = item.dashboardId === -1 && !item.inherited;\n    const currentPermissionLevel = dashboardPermissionLevels.find((dp) => dp.value === item.permission);\n\n    return (\n      <tr className={setClassNameHelper(Boolean(item?.inherited))}>\n        <td style={{ width: '1%' }}>\n          <ItemAvatar item={item} />\n        </td>\n        <td style={{ width: '90%' }}>\n          {item.name} <ItemDescription item={item} />\n        </td>\n        <td>\n          {item.inherited && folderInfo && (\n            <em className=\"muted no-wrap\">\n              Inherited from folder{' '}\n              {folderInfo.canViewFolderPermissions ? (\n                <a className=\"text-link\" href={`${folderInfo.url}/permissions`}>\n                  {folderInfo.title}\n                </a>\n              ) : (\n                folderInfo.title\n              )}\n            </em>\n          )}\n          {inheritedFromRoot && <em className=\"muted no-wrap\">Default Permission</em>}\n        </td>\n        <td className=\"query-keyword\">Can</td>\n        <td>\n          <Select\n            aria-label={`Permission level for \"${item.name}\"`}\n            isSearchable={false}\n            options={dashboardPermissionLevels}\n            onChange={this.onPermissionChanged}\n            disabled={item.inherited}\n            value={currentPermissionLevel}\n            width={25}\n          />\n        </td>\n        <td>\n          {!item.inherited ? (\n            <Button\n              aria-label={`Remove permission for \"${item.name}\"`}\n              size=\"sm\"\n              variant=\"destructive\"\n              icon=\"times\"\n              onClick={this.onRemoveItem}\n            />\n          ) : (\n            <Button aria-label={`Remove permission for \"${item.name}\" (Disabled)`} size=\"sm\" disabled icon=\"times\" />\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}