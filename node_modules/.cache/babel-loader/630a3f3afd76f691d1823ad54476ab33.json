{"ast":null,"code":"import { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { Button, HorizontalGroup, Modal, stylesFactory, useTheme } from '@grafana/ui';\nimport { FolderPicker } from 'app/core/components/Select/FolderPicker';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { moveDashboards } from 'app/features/manage-dashboards/state/actions';\nimport { getCheckedDashboards } from '../utils';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport const MoveToFolderModal = ({\n  results,\n  onMoveItems,\n  isOpen,\n  onDismiss\n}) => {\n  const [folder, setFolder] = useState(null);\n  const theme = useTheme();\n  const styles = getStyles(theme);\n  const selectedDashboards = getCheckedDashboards(results);\n  const notifyApp = useAppNotification();\n\n  const moveTo = () => {\n    if (folder && selectedDashboards.length) {\n      var _folder$title;\n\n      const folderTitle = (_folder$title = folder.title) !== null && _folder$title !== void 0 ? _folder$title : 'General';\n      moveDashboards(selectedDashboards.map(d => d.uid), folder).then(result => {\n        if (result.successCount > 0) {\n          const ending = result.successCount === 1 ? '' : 's';\n          const header = `Dashboard${ending} Moved`;\n          const msg = `${result.successCount} dashboard${ending} moved to ${folderTitle}`;\n          notifyApp.success(header, msg);\n        }\n\n        if (result.totalCount === result.alreadyInFolderCount) {\n          notifyApp.error('Error', `Dashboard already belongs to folder ${folderTitle}`);\n        } else {\n          onMoveItems(selectedDashboards, folder);\n        }\n\n        onDismiss();\n      });\n    }\n  };\n\n  return isOpen ? /*#__PURE__*/_jsx(Modal, {\n    className: styles.modal,\n    title: \"Choose Dashboard Folder\",\n    icon: \"folder-plus\",\n    isOpen: isOpen,\n    onDismiss: onDismiss,\n    children: /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.content,\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          children: [\"Move the \", selectedDashboards.length, \" selected dashboard\", selectedDashboards.length === 1 ? '' : 's', \" to the following folder:\"]\n        }), /*#__PURE__*/_jsx(FolderPicker, {\n          onChange: f => setFolder(f)\n        })]\n      }), /*#__PURE__*/_jsxs(HorizontalGroup, {\n        justify: \"center\",\n        children: [/*#__PURE__*/_jsx(Button, {\n          variant: \"primary\",\n          onClick: moveTo,\n          children: \"Move\"\n        }), /*#__PURE__*/_jsx(Button, {\n          variant: \"secondary\",\n          onClick: onDismiss,\n          children: \"Cancel\"\n        })]\n      })]\n    })\n  }) : null;\n};\nconst getStyles = stylesFactory(theme => {\n  return {\n    modal: css`\n      width: 500px;\n    `,\n    content: css`\n      margin-bottom: ${theme.spacing.lg};\n    `\n  };\n});","map":{"version":3,"names":["css","React","useState","Button","HorizontalGroup","Modal","stylesFactory","useTheme","FolderPicker","useAppNotification","moveDashboards","getCheckedDashboards","MoveToFolderModal","results","onMoveItems","isOpen","onDismiss","folder","setFolder","theme","styles","getStyles","selectedDashboards","notifyApp","moveTo","length","folderTitle","title","map","d","uid","then","result","successCount","ending","header","msg","success","totalCount","alreadyInFolderCount","error","modal","content","f","spacing","lg"],"sources":["/home/soula/grafana/public/app/features/search/components/MoveToFolderModal.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { FC, useState } from 'react';\n\nimport { GrafanaTheme } from '@grafana/data';\nimport { Button, HorizontalGroup, Modal, stylesFactory, useTheme } from '@grafana/ui';\nimport { FolderPicker } from 'app/core/components/Select/FolderPicker';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { moveDashboards } from 'app/features/manage-dashboards/state/actions';\nimport { FolderInfo } from 'app/types';\n\nimport { DashboardSection, OnMoveItems } from '../types';\nimport { getCheckedDashboards } from '../utils';\n\ninterface Props {\n  onMoveItems: OnMoveItems;\n  results: DashboardSection[];\n  isOpen: boolean;\n  onDismiss: () => void;\n}\n\nexport const MoveToFolderModal: FC<Props> = ({ results, onMoveItems, isOpen, onDismiss }) => {\n  const [folder, setFolder] = useState<FolderInfo | null>(null);\n  const theme = useTheme();\n  const styles = getStyles(theme);\n  const selectedDashboards = getCheckedDashboards(results);\n  const notifyApp = useAppNotification();\n\n  const moveTo = () => {\n    if (folder && selectedDashboards.length) {\n      const folderTitle = folder.title ?? 'General';\n\n      moveDashboards(selectedDashboards.map((d) => d.uid) as string[], folder).then((result: any) => {\n        if (result.successCount > 0) {\n          const ending = result.successCount === 1 ? '' : 's';\n          const header = `Dashboard${ending} Moved`;\n          const msg = `${result.successCount} dashboard${ending} moved to ${folderTitle}`;\n          notifyApp.success(header, msg);\n        }\n\n        if (result.totalCount === result.alreadyInFolderCount) {\n          notifyApp.error('Error', `Dashboard already belongs to folder ${folderTitle}`);\n        } else {\n          onMoveItems(selectedDashboards, folder);\n        }\n\n        onDismiss();\n      });\n    }\n  };\n\n  return isOpen ? (\n    <Modal\n      className={styles.modal}\n      title=\"Choose Dashboard Folder\"\n      icon=\"folder-plus\"\n      isOpen={isOpen}\n      onDismiss={onDismiss}\n    >\n      <>\n        <div className={styles.content}>\n          <p>\n            Move the {selectedDashboards.length} selected dashboard{selectedDashboards.length === 1 ? '' : 's'} to the\n            following folder:\n          </p>\n          <FolderPicker onChange={(f) => setFolder(f as FolderInfo)} />\n        </div>\n\n        <HorizontalGroup justify=\"center\">\n          <Button variant=\"primary\" onClick={moveTo}>\n            Move\n          </Button>\n          <Button variant=\"secondary\" onClick={onDismiss}>\n            Cancel\n          </Button>\n        </HorizontalGroup>\n      </>\n    </Modal>\n  ) : null;\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    modal: css`\n      width: 500px;\n    `,\n    content: css`\n      margin-bottom: ${theme.spacing.lg};\n    `,\n  };\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}