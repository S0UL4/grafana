{"ast":null,"code":"var _Icon, _Tooltip, _Icon2, _span;\n\nimport React from 'react';\nimport { Button, Icon, Select, Tooltip } from '@grafana/ui';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport const PermissionListItem = ({\n  item,\n  permissionLevels,\n  canSet,\n  onRemove,\n  onChange\n}) => /*#__PURE__*/_jsxs(\"tr\", {\n  children: [/*#__PURE__*/_jsx(\"td\", {\n    style: {\n      width: '1%'\n    },\n    children: getAvatar(item)\n  }), /*#__PURE__*/_jsx(\"td\", {\n    style: {\n      width: '90%'\n    },\n    children: getDescription(item)\n  }), /*#__PURE__*/_jsx(\"td\", {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"gf-form\",\n      children: /*#__PURE__*/_jsx(Select, {\n        className: \"width-20\",\n        disabled: !canSet || !item.isManaged,\n        onChange: p => onChange(item, p.value),\n        value: permissionLevels.find(p => p === item.permission),\n        options: permissionLevels.map(p => ({\n          value: p,\n          label: p\n        }))\n      })\n    })\n  }), /*#__PURE__*/_jsx(\"td\", {\n    children: /*#__PURE__*/_jsx(Tooltip, {\n      content: getPermissionInfo(item),\n      children: _Icon || (_Icon = /*#__PURE__*/_jsx(Icon, {\n        name: \"info-circle\"\n      }))\n    })\n  }), /*#__PURE__*/_jsx(\"td\", {\n    children: item.isManaged ? /*#__PURE__*/_jsx(Button, {\n      size: \"sm\",\n      icon: \"times\",\n      variant: \"destructive\",\n      disabled: !canSet,\n      onClick: () => onRemove(item),\n      \"aria-label\": `Remove permission for ${getName(item)}`\n    }) : _Tooltip || (_Tooltip = /*#__PURE__*/_jsx(Tooltip, {\n      content: \"Provisioned permission\",\n      children: /*#__PURE__*/_jsx(Button, {\n        size: \"sm\",\n        icon: \"lock\"\n      })\n    }))\n  })]\n});\n\nconst getAvatar = item => {\n  if (item.teamId) {\n    return /*#__PURE__*/_jsx(\"img\", {\n      className: \"filter-table__avatar\",\n      src: item.teamAvatarUrl,\n      alt: `Avatar for team ${item.teamId}`\n    });\n  } else if (item.userId) {\n    return /*#__PURE__*/_jsx(\"img\", {\n      className: \"filter-table__avatar\",\n      src: item.userAvatarUrl,\n      alt: `Avatar for user ${item.userId}`\n    });\n  }\n\n  return _Icon2 || (_Icon2 = /*#__PURE__*/_jsx(Icon, {\n    size: \"xl\",\n    name: \"shield\"\n  }));\n};\n\nconst getName = item => {\n  if (item.userId) {\n    return item.userLogin;\n  }\n\n  if (item.teamId) {\n    return item.team;\n  }\n\n  return item.builtInRole;\n};\n\nconst getDescription = item => {\n  if (item.userId) {\n    return /*#__PURE__*/_jsxs(\"span\", {\n      children: [item.userLogin, \" \"]\n    }, \"name\");\n  } else if (item.teamId) {\n    return /*#__PURE__*/_jsxs(\"span\", {\n      children: [item.team, \" \"]\n    }, \"name\");\n  } else if (item.builtInRole) {\n    return /*#__PURE__*/_jsxs(\"span\", {\n      children: [item.builtInRole, \" \"]\n    }, \"name\");\n  }\n\n  return _span || (_span = /*#__PURE__*/_jsx(\"span\", {}, \"name\"));\n};\n\nconst getPermissionInfo = p => `Actions: ${[...new Set(p.actions)].sort().join(' ')}`;","map":{"version":3,"names":["React","Button","Icon","Select","Tooltip","PermissionListItem","item","permissionLevels","canSet","onRemove","onChange","width","getAvatar","getDescription","isManaged","p","value","find","permission","map","label","getPermissionInfo","getName","teamId","teamAvatarUrl","userId","userAvatarUrl","userLogin","team","builtInRole","Set","actions","sort","join"],"sources":["/home/soula/grafana/public/app/core/components/AccessControl/PermissionListItem.tsx"],"sourcesContent":["import React from 'react';\n\nimport { Button, Icon, Select, Tooltip } from '@grafana/ui';\n\nimport { ResourcePermission } from './types';\n\ninterface Props {\n  item: ResourcePermission;\n  permissionLevels: string[];\n  canSet: boolean;\n  onRemove: (item: ResourcePermission) => void;\n  onChange: (item: ResourcePermission, permission: string) => void;\n}\n\nexport const PermissionListItem = ({ item, permissionLevels, canSet, onRemove, onChange }: Props) => (\n  <tr>\n    <td style={{ width: '1%' }}>{getAvatar(item)}</td>\n    <td style={{ width: '90%' }}>{getDescription(item)}</td>\n    <td>\n      <div className=\"gf-form\">\n        <Select\n          className=\"width-20\"\n          disabled={!canSet || !item.isManaged}\n          onChange={(p) => onChange(item, p.value!)}\n          value={permissionLevels.find((p) => p === item.permission)}\n          options={permissionLevels.map((p) => ({ value: p, label: p }))}\n        />\n      </div>\n    </td>\n    <td>\n      <Tooltip content={getPermissionInfo(item)}>\n        <Icon name=\"info-circle\" />\n      </Tooltip>\n    </td>\n    <td>\n      {item.isManaged ? (\n        <Button\n          size=\"sm\"\n          icon=\"times\"\n          variant=\"destructive\"\n          disabled={!canSet}\n          onClick={() => onRemove(item)}\n          aria-label={`Remove permission for ${getName(item)}`}\n        />\n      ) : (\n        <Tooltip content=\"Provisioned permission\">\n          <Button size=\"sm\" icon=\"lock\" />\n        </Tooltip>\n      )}\n    </td>\n  </tr>\n);\n\nconst getAvatar = (item: ResourcePermission) => {\n  if (item.teamId) {\n    return <img className=\"filter-table__avatar\" src={item.teamAvatarUrl} alt={`Avatar for team ${item.teamId}`} />;\n  } else if (item.userId) {\n    return <img className=\"filter-table__avatar\" src={item.userAvatarUrl} alt={`Avatar for user ${item.userId}`} />;\n  }\n  return <Icon size=\"xl\" name=\"shield\" />;\n};\n\nconst getName = (item: ResourcePermission) => {\n  if (item.userId) {\n    return item.userLogin;\n  }\n  if (item.teamId) {\n    return item.team;\n  }\n  return item.builtInRole;\n};\n\nconst getDescription = (item: ResourcePermission) => {\n  if (item.userId) {\n    return <span key=\"name\">{item.userLogin} </span>;\n  } else if (item.teamId) {\n    return <span key=\"name\">{item.team} </span>;\n  } else if (item.builtInRole) {\n    return <span key=\"name\">{item.builtInRole} </span>;\n  }\n  return <span key=\"name\" />;\n};\n\nconst getPermissionInfo = (p: ResourcePermission) => `Actions: ${[...new Set(p.actions)].sort().join(' ')}`;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}