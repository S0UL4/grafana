{"ast":null,"code":"import React, { useEffect } from 'react';\nimport { PluginState } from '@grafana/data';\nimport { getDefaultOptions, getTransformerOptionPane } from '../spatial/optionsHelper';\nimport { addHeatmapCalculationOptions } from './editor/helper';\nimport { heatmapTransformer } from './heatmap'; // Nothing defined in state\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst supplier = (builder, context) => {\n  var _context$options;\n\n  const options = (_context$options = context.options) !== null && _context$options !== void 0 ? _context$options : {};\n  addHeatmapCalculationOptions('', builder, options);\n};\n\nexport const HeatmapTransformerEditor = props => {\n  useEffect(() => {\n    var _props$options$xBucke;\n\n    if (!((_props$options$xBucke = props.options.xBuckets) !== null && _props$options$xBucke !== void 0 && _props$options$xBucke.mode)) {\n      const opts = getDefaultOptions(supplier);\n      props.onChange(Object.assign({}, opts, props.options));\n      console.log('geometry useEffect', opts);\n    }\n  }); // Shared with spatial transformer\n\n  const pane = getTransformerOptionPane(props, supplier);\n  return /*#__PURE__*/_jsx(\"div\", {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      children: pane.items.map(v => v.render())\n    })\n  });\n};\nexport const heatmapTransformRegistryItem = {\n  id: heatmapTransformer.id,\n  editor: HeatmapTransformerEditor,\n  transformation: heatmapTransformer,\n  name: heatmapTransformer.name,\n  description: heatmapTransformer.description,\n  state: PluginState.alpha\n};","map":{"version":3,"names":["React","useEffect","PluginState","getDefaultOptions","getTransformerOptionPane","addHeatmapCalculationOptions","heatmapTransformer","supplier","builder","context","options","HeatmapTransformerEditor","props","xBuckets","mode","opts","onChange","console","log","pane","items","map","v","render","heatmapTransformRegistryItem","id","editor","transformation","name","description","state","alpha"],"sources":["/home/soula/grafana/public/app/features/transformers/calculateHeatmap/HeatmapTransformerEditor.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport {\n  PanelOptionsEditorBuilder,\n  PluginState,\n  StandardEditorContext,\n  TransformerRegistryItem,\n  TransformerUIProps,\n} from '@grafana/data';\n\nimport { getDefaultOptions, getTransformerOptionPane } from '../spatial/optionsHelper';\n\nimport { addHeatmapCalculationOptions } from './editor/helper';\nimport { HeatmapTransformerOptions, heatmapTransformer } from './heatmap';\n\n// Nothing defined in state\nconst supplier = (\n  builder: PanelOptionsEditorBuilder<HeatmapTransformerOptions>,\n  context: StandardEditorContext<HeatmapTransformerOptions>\n) => {\n  const options = context.options ?? {};\n\n  addHeatmapCalculationOptions('', builder, options);\n};\n\nexport const HeatmapTransformerEditor: React.FC<TransformerUIProps<HeatmapTransformerOptions>> = (props) => {\n  useEffect(() => {\n    if (!props.options.xBuckets?.mode) {\n      const opts = getDefaultOptions(supplier);\n      props.onChange({ ...opts, ...props.options });\n      console.log('geometry useEffect', opts);\n    }\n  });\n\n  // Shared with spatial transformer\n  const pane = getTransformerOptionPane<HeatmapTransformerOptions>(props, supplier);\n  return (\n    <div>\n      <div>{pane.items.map((v) => v.render())}</div>\n    </div>\n  );\n};\n\nexport const heatmapTransformRegistryItem: TransformerRegistryItem<HeatmapTransformerOptions> = {\n  id: heatmapTransformer.id,\n  editor: HeatmapTransformerEditor,\n  transformation: heatmapTransformer,\n  name: heatmapTransformer.name,\n  description: heatmapTransformer.description,\n  state: PluginState.alpha,\n};\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAEEC,WAFF,QAMO,eANP;AAQA,SAASC,iBAAT,EAA4BC,wBAA5B,QAA4D,0BAA5D;AAEA,SAASC,4BAAT,QAA6C,iBAA7C;AACA,SAAoCC,kBAApC,QAA8D,WAA9D,C,CAEA;;;;AACA,MAAMC,QAAQ,GAAG,CACfC,OADe,EAEfC,OAFe,KAGZ;EAAA;;EACH,MAAMC,OAAO,uBAAGD,OAAO,CAACC,OAAX,+DAAsB,EAAnC;EAEAL,4BAA4B,CAAC,EAAD,EAAKG,OAAL,EAAcE,OAAd,CAA5B;AACD,CAPD;;AASA,OAAO,MAAMC,wBAAiF,GAAIC,KAAD,IAAW;EAC1GX,SAAS,CAAC,MAAM;IAAA;;IACd,IAAI,2BAACW,KAAK,CAACF,OAAN,CAAcG,QAAf,kDAAC,sBAAwBC,IAAzB,CAAJ,EAAmC;MACjC,MAAMC,IAAI,GAAGZ,iBAAiB,CAACI,QAAD,CAA9B;MACAK,KAAK,CAACI,QAAN,mBAAoBD,IAApB,EAA6BH,KAAK,CAACF,OAAnC;MACAO,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCH,IAAlC;IACD;EACF,CANQ,CAAT,CAD0G,CAS1G;;EACA,MAAMI,IAAI,GAAGf,wBAAwB,CAA4BQ,KAA5B,EAAmCL,QAAnC,CAArC;EACA,oBACE;IAAA,uBACE;MAAA,UAAMY,IAAI,CAACC,KAAL,CAAWC,GAAX,CAAgBC,CAAD,IAAOA,CAAC,CAACC,MAAF,EAAtB;IAAN;EADF,EADF;AAKD,CAhBM;AAkBP,OAAO,MAAMC,4BAAgF,GAAG;EAC9FC,EAAE,EAAEnB,kBAAkB,CAACmB,EADuE;EAE9FC,MAAM,EAAEf,wBAFsF;EAG9FgB,cAAc,EAAErB,kBAH8E;EAI9FsB,IAAI,EAAEtB,kBAAkB,CAACsB,IAJqE;EAK9FC,WAAW,EAAEvB,kBAAkB,CAACuB,WAL8D;EAM9FC,KAAK,EAAE5B,WAAW,CAAC6B;AAN2E,CAAzF"},"metadata":{},"sourceType":"module"}